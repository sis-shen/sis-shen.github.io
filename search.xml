<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>è¿›ç¨‹é—´é€šä¿¡</title>
      <link href="/2024/08/02/progressMSG/"/>
      <url>/2024/08/02/progressMSG/</url>
      
        <content type="html"><![CDATA[<p>æœ¬ç¯‡åšå®¢æ›´åå‘äºæ€»æ‹¬å’Œå¯¼èˆª,éƒ¨åˆ†æ¦‚å¿µæ›´ç»†è‡´çš„ä»‹ç»å°†å†…åµŒé“¾æ¥åœ¨æ–‡ç« ä¸­</p><p><strong>é‡ç‚¹å†…å®¹</strong></p><ul><li>åˆè¯†è¿›ç¨‹é—´é€šä¿¡</li><li>ç®¡é“</li><li>æ¶ˆæ¯é˜Ÿåˆ—</li><li>å…±äº«å†…å­˜</li><li>ä¿¡å·é‡</li></ul><h1 id="è¿›ç¨‹é—´é€šä¿¡çš„ç›®çš„"><a href="#è¿›ç¨‹é—´é€šä¿¡çš„ç›®çš„" class="headerlink" title="è¿›ç¨‹é—´é€šä¿¡çš„ç›®çš„"></a>è¿›ç¨‹é—´é€šä¿¡çš„ç›®çš„</h1><ul><li>æ•°æ®ä¼ è¾“ï¼š ä¸€ä¸ªè¿›ç¨‹éœ€è¦å°†å®ƒçš„æ•°æ®<strong>å‘é€</strong>ç»™å¦ä¸€ä¸ªè¿›ç¨‹</li><li>èµ„æºå…±äº«ï¼š å¤šä¸ªè¿›ç¨‹ä¹‹é—´<strong>å…±äº«</strong>åŒæ ·çš„èµ„æº</li><li>é€šçŸ¥äº‹ä»¶ï¼šä¸€ä¸ªè¿›ç¨‹éœ€è¦å‘å¦ä¸€ä¸ªæˆ–ä¸€ç»„è¿›ç¨‹<strong>å‘é€æ¶ˆæ¯</strong>ï¼Œ<strong>é€šçŸ¥</strong>å®ƒï¼ˆå®ƒä»¬ï¼‰å‘ç”Ÿäº†æŸç§äº‹ä»¶ï¼ˆå¦‚å­è¿›ç¨‹ç»ˆæ­¢æ—¶è¦é€šçŸ¥çˆ¶è¿›ç¨‹ï¼‰</li><li>è¿›ç¨‹æ§åˆ¶ï¼š æœ‰äº›è¿›ç¨‹å¸Œæœ›<strong>å®Œå…¨æ§åˆ¶</strong>å¦ä¸€ä¸ªè¿›ç¨‹çš„æ‰§è¡Œï¼ˆå¦‚Debugè¿›ç¨‹ï¼‰ï¼Œæ­¤æ—¶æ§åˆ¶è¿›ç¨‹å¸Œæœ›èƒ½å¤Ÿæ‹¦æˆªå¦ä¸€ä¸ªè¿›ç¨‹çš„æ‰€æœ‰é™·å…¥å’Œå¼‚å¸¸ï¼Œå¹¶èƒ½å¤ŸåŠæ—¶çŸ¥é“å®ƒçš„çŠ¶æ€æ”¹å˜</li></ul><h1 id="è¿›ç¨‹é—´é€šä¿¡çš„ä¸»è¦æ–¹å¼"><a href="#è¿›ç¨‹é—´é€šä¿¡çš„ä¸»è¦æ–¹å¼" class="headerlink" title="è¿›ç¨‹é—´é€šä¿¡çš„ä¸»è¦æ–¹å¼"></a>è¿›ç¨‹é—´é€šä¿¡çš„ä¸»è¦æ–¹å¼</h1><ul><li>ç®¡é“</li><li>System Vè¿›ç¨‹é—´é€šä¿¡</li><li>POSIXè¿›ç¨‹é—´é€šä¿¡</li></ul><h1 id="è¿›ç¨‹é—´é€šä¿¡çš„åˆ†ç±»"><a href="#è¿›ç¨‹é—´é€šä¿¡çš„åˆ†ç±»" class="headerlink" title="è¿›ç¨‹é—´é€šä¿¡çš„åˆ†ç±»"></a>è¿›ç¨‹é—´é€šä¿¡çš„åˆ†ç±»</h1><h2 id="ç®¡é“"><a href="#ç®¡é“" class="headerlink" title="ç®¡é“"></a>ç®¡é“</h2><ul><li>åŒ¿åç®¡é“</li><li>å‘½åç®¡é“</li></ul><h2 id="System-V-IPC"><a href="#System-V-IPC" class="headerlink" title="System V IPC"></a>System V IPC</h2><ul><li>System V æ¶ˆæ¯é˜Ÿåˆ—</li><li>SysTem V å…±äº«å†…å­˜</li><li>System V ä¿¡å·é‡</li></ul><h2 id="POSIX-IPC"><a href="#POSIX-IPC" class="headerlink" title="POSIX IPC"></a>POSIX IPC</h2><ul><li>æ¶ˆæ¯é˜Ÿåˆ—</li><li>å…±äº«å†…å­˜</li><li>ä¿¡å·é‡</li><li>äº’æ–¥é‡</li><li>æ¡ä»¶å˜é‡</li><li>è¯»å†™é”</li></ul><h1 id="ç®¡é“-1"><a href="#ç®¡é“-1" class="headerlink" title="ç®¡é“"></a>ç®¡é“</h1>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>è¿›ç¨‹é—´é€šä¿¡--åŒ¿åç®¡é“ä¸å‘½åç®¡é“</title>
      <link href="/2024/08/02/pipe/"/>
      <url>/2024/08/02/pipe/</url>
      
        <content type="html"><![CDATA[<h1 id="ä»€ä¹ˆæ˜¯ç®¡é“æ–‡ä»¶"><a href="#ä»€ä¹ˆæ˜¯ç®¡é“æ–‡ä»¶" class="headerlink" title="ä»€ä¹ˆæ˜¯ç®¡é“æ–‡ä»¶"></a>ä»€ä¹ˆæ˜¯ç®¡é“æ–‡ä»¶</h1><h1 id="åŒ¿åç®¡é“"><a href="#åŒ¿åç®¡é“" class="headerlink" title="åŒ¿åç®¡é“"></a>åŒ¿åç®¡é“</h1><h2 id="å°å°é¡¹ç›®â€“è¿›ç¨‹æ± "><a href="#å°å°é¡¹ç›®â€“è¿›ç¨‹æ± " class="headerlink" title="å°å°é¡¹ç›®â€“è¿›ç¨‹æ± "></a>å°å°é¡¹ç›®â€“è¿›ç¨‹æ± </h2><p>è¯¦è§<a href="https://www.supdriver.top/2024/08/02/processPool/">æ­¤åšå®¢ğŸ”—</a></p><h1 id="å‘½åç®¡é“"><a href="#å‘½åç®¡é“" class="headerlink" title="å‘½åç®¡é“"></a>å‘½åç®¡é“</h1>]]></content>
      
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Linuxã€‘ç®€æ˜“è¿›ç¨‹æ± </title>
      <link href="/2024/08/02/processPool/"/>
      <url>/2024/08/02/processPool/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>ã€æ•°æ®ç»“æ„ã€‘ä¸€æ­¥åˆ°èƒƒï¼Œé”®å€¼å¯¹ç‰ˆäºŒå‰æœç´¢æ ‘</title>
      <link href="/2024/07/27/BSTree/"/>
      <url>/2024/07/27/BSTree/</url>
      
        <content type="html"><![CDATA[<h1 id="ä»€ä¹ˆæ˜¯äºŒå‰æœç´¢æ ‘"><a href="#ä»€ä¹ˆæ˜¯äºŒå‰æœç´¢æ ‘" class="headerlink" title="ä»€ä¹ˆæ˜¯äºŒå‰æœç´¢æ ‘"></a>ä»€ä¹ˆæ˜¯äºŒå‰æœç´¢æ ‘</h1><p>äºŒå‰æœç´¢æ ‘çš„<code>å®šä¹‰</code>æ˜¯ä¸€é¢—äºŒå‰æ ‘çš„æ‰€æœ‰èŠ‚ç‚¹æ»¡è¶³:<code>æ ¹çš„å·¦å³å­©å­å­˜åœ¨æ—¶ï¼Œæ»¡è¶³ å·¦å­©å­ &lt; æ ¹ &lt; å³å­©å­</code></p><p><code>é€’å½’å®šä¹‰</code>åˆ™æ˜¯:</p><ol><li><code>å·¦å­æ ‘çš„æ ¹</code> &lt; <code>æ ¹</code> &lt; <code>å³å­æ ‘çš„æ ¹</code></li><li><code>å·¦å­æ ‘æ˜¯äºŒå‰æœç´¢æ ‘</code>,<code>å³å­æ ‘æ˜¯äºŒå‰æœç´¢æ ‘</code></li></ol><h2 id="å†™ä¸€ä¸ªéªŒè¯äºŒå‰æœç´¢æ ‘çš„å‡½æ•°"><a href="#å†™ä¸€ä¸ªéªŒè¯äºŒå‰æœç´¢æ ‘çš„å‡½æ•°" class="headerlink" title="å†™ä¸€ä¸ªéªŒè¯äºŒå‰æœç´¢æ ‘çš„å‡½æ•°"></a>å†™ä¸€ä¸ªéªŒè¯äºŒå‰æœç´¢æ ‘çš„å‡½æ•°</h2><p><a href="https://leetcode.cn/problems/validate-binary-search-tree/">Leetecodeé¢˜ç›®é“¾æ¥ğŸ”—</a></p><h1 id="å°è£…ä¸€ä¸ªäºŒå‰æ ‘ç±»"><a href="#å°è£…ä¸€ä¸ªäºŒå‰æ ‘ç±»" class="headerlink" title="å°è£…ä¸€ä¸ªäºŒå‰æ ‘ç±»"></a>å°è£…ä¸€ä¸ªäºŒå‰æ ‘ç±»</h1><h2 id="æ–‡ä»¶å¸ƒç½®"><a href="#æ–‡ä»¶å¸ƒç½®" class="headerlink" title="æ–‡ä»¶å¸ƒç½®"></a>æ–‡ä»¶å¸ƒç½®</h2><ul><li><code>BSTree.h</code>ç”¨äºå£°æ˜å’Œå®ç°<code>BSTree</code>ç±»</li><li><code>test.cpp</code>ç”¨äºæµ‹è¯•</li></ul><h3 id="å¤´æ–‡ä»¶"><a href="#å¤´æ–‡ä»¶" class="headerlink" title="å¤´æ–‡ä»¶"></a>å¤´æ–‡ä»¶</h3><p><code>BSTree.h</code></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;utility&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>test.cpp</code></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;BSTree.h&quot;</span></span></span><br></pre></td></tr></table></figure><h2 id="å‘½åç©ºé—´"><a href="#å‘½åç©ºé—´" class="headerlink" title="å‘½åç©ºé—´"></a>å‘½åç©ºé—´</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> key_value</span><br></pre></td></tr></table></figure><p>è¿™é‡Œä½¿ç”¨<code>key_value</code>ä½œä¸ºå‘½åç©ºé—´ï¼Œè¡¨ç¤ºè¿™æ˜¯é”®å€¼è¡¨ç¤ºçš„æœç´¢äºŒå‰æ ‘</p><h2 id="å®šä¹‰èŠ‚ç‚¹"><a href="#å®šä¹‰èŠ‚ç‚¹" class="headerlink" title="å®šä¹‰èŠ‚ç‚¹"></a>å®šä¹‰èŠ‚ç‚¹</h2><p>äºŒå‰æ ‘çš„èŠ‚ç‚¹ç”¨äºå‚¨å­˜<code>é”®å€¼å¯¹</code>å’Œ<code>å·¦å³æŒ‡é’ˆ</code>ï¼Œå¹¶æä¾›<code>é»˜è®¤æ„é€ å‡½æ•°</code>,ä½¿ç”¨<code>åˆå§‹åŒ–åˆ—è¡¨</code>åˆå§‹åŒ–æˆå‘˜å˜é‡</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">K</span>,<span class="keyword">class</span> <span class="title class_">V</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BSTNode</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">BSTNode</span>(<span class="type">const</span> K&amp; key = <span class="built_in">K</span>(), <span class="type">const</span> V&amp; value = <span class="built_in">V</span>())</span><br><span class="line">        :_left(<span class="literal">nullptr</span>)</span><br><span class="line">        , _right(<span class="literal">nullptr</span>)</span><br><span class="line">        , _key(key)</span><br><span class="line">        , _value(value)</span><br><span class="line">    &#123;&#125;</span><br><span class="line">    BSTNode&lt;K, V&gt;* _left;<span class="comment">//æŒ‡å‘å·¦å­æ ‘</span></span><br><span class="line">    BSTNode&lt;K, V&gt;* _right;<span class="comment">//æŒ‡å‘å³å­æ ‘</span></span><br><span class="line">    K _key;<span class="comment">//å‚¨å­˜é”®</span></span><br><span class="line">    V _value;<span class="comment">//å‚¨å­˜å€¼</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="å°è£…äºŒå‰æœç´¢æ ‘"><a href="#å°è£…äºŒå‰æœç´¢æ ‘" class="headerlink" title="å°è£…äºŒå‰æœç´¢æ ‘"></a>å°è£…äºŒå‰æœç´¢æ ‘</h2><p><code>Binary Search Tree</code>,è¿™é‡Œç”¨ç®€ç§°<code>BSTree</code>å°è£…</p><h3 id="åŸºæœ¬æ¶æ„"><a href="#åŸºæœ¬æ¶æ„" class="headerlink" title="åŸºæœ¬æ¶æ„"></a>åŸºæœ¬æ¶æ„</h3><p>é‰´äºè¯¥ç±»çš„æ¥å£åŸºæœ¬ä¾èµ–äºæˆå‘˜å˜é‡ï¼Œæ‰€ä»¥å…ˆç»„ç»‡å¥½æˆå‘˜å˜é‡</p><p>ä½œä¸ºä¸€é¢—<code>äºŒå‰æ ‘ç±»</code>,æˆå‘˜å˜é‡ä»…éœ€ä¸€ä¸ª<code>æŒ‡å‘æ ¹çš„æŒ‡</code>é’ˆå³å¯</p><p>å†æ¬¡ä¹‹å‰å…ˆç”¨<code>typedef</code>å®šä¹‰ä¸€ä¸ª<code>èŠ‚ç‚¹ç±»</code>å‡ºæ¥ç”¨äºç®€åŒ–ä»£ç </p><p>æœ€åæä¾›ä¸€ä¸ª<code>é»˜è®¤æ„é€ å‡½æ•°</code>å°†<code>_root</code>åˆå§‹åŒ–ä¸º<code>nullptr</code></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">K</span>,<span class="keyword">class</span> <span class="title class_">V</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BSTree</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">typedef</span> BSTNode&lt;K, V&gt; Node;<span class="comment">//ä½¿ç”¨typedefç®€åŒ–ä»£ç </span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">BSTree</span>() :_root(<span class="literal">nullptr</span>) &#123;&#125;<span class="comment">//æä¾›é»˜è®¤æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">Node* _root;<span class="comment">//æŒ‡å‘æ ¹èŠ‚ç‚¹çš„æŒ‡é’ˆä½œä¸ºæˆå‘˜å˜é‡</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="insertå‡½æ•°"><a href="#insertå‡½æ•°" class="headerlink" title="insertå‡½æ•°"></a><code>insert</code>å‡½æ•°</h3><p>å‡†å¤‡å¥½åç¬¬ä¸€ä¸ªæ¥å£å°±æ˜¯<code>insert</code>,ç”¨äºæ„å»ºæœç´¢äºŒå‰æ ‘</p><p>è¿™é‡Œéœ€è¦è€ƒè™‘çš„æƒ…å†µæœ‰</p><ul><li>ç©ºæ ‘æ—¶çš„æ’å…¥</li><li>æ’å…¥çš„<code>key</code>å·²å­˜åœ¨</li><li>ä¸€èˆ¬æƒ…å†µä¸‹æˆåŠŸçš„æ’å…¥</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">insert</span><span class="params">(<span class="type">const</span> K&amp; key, <span class="type">const</span> V&amp; value)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (_root == <span class="literal">nullptr</span>)<span class="comment">//ç©ºæ ‘</span></span><br><span class="line">    &#123;</span><br><span class="line">        _root = <span class="keyword">new</span> <span class="built_in">Node</span>(key, value);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Node* cur = _root;</span><br><span class="line">    Node* parent = <span class="literal">nullptr</span>;</span><br><span class="line">    <span class="keyword">while</span> (cur)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (key &lt; cur-&gt;_key)<span class="comment">//keyæ¯”å½“å‰èŠ‚ç‚¹å°ï¼Œå¾€å·¦å­æ ‘èµ°</span></span><br><span class="line">        &#123;</span><br><span class="line">            parent = cur;</span><br><span class="line">            cur = cur-&gt;_left;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (key &gt; cur-&gt;_key)<span class="comment">//å¾€å³å­æ ‘èµ°</span></span><br><span class="line">        &#123;</span><br><span class="line">            parent = cur;</span><br><span class="line">            cur = cur-&gt;_right;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;<span class="comment">//keyå·²å­˜åœ¨ï¼Œæ’å…¥å¤±è´¥</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æ­¤æ—¶curä¸ºnullptr, parentä¸ºcurçš„ç»“ç‚¹</span></span><br><span class="line">    <span class="keyword">if</span> (key &lt; parent-&gt;_key)parent-&gt;_left = <span class="keyword">new</span> <span class="built_in">Node</span>(key, value);</span><br><span class="line">    <span class="keyword">else</span> parent-&gt;_right = <span class="keyword">new</span> <span class="built_in">Node</span>(key, value);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;<span class="comment">//æˆåŠŸæ’å…¥</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="in-orderå‡½æ•°"><a href="#in-orderå‡½æ•°" class="headerlink" title="in_orderå‡½æ•°"></a><code>in_order</code>å‡½æ•°</h3><p>ä½¿ç”¨æ­¤å‡½æ•°<code>å‰åºéå†æ‰“å°</code>äºŒå‰æ ‘æ¥éªŒè¯å…¶æ»¡è¶³<code>æœç´¢æ ‘</code>çš„æ€§è´¨</p><p>è¿™é‡Œä½¿ç”¨é€’å½’æ‰“å°,æ‰€ä»¥è¦å€ŸåŠ©<code>_in_order</code>å­å‡½æ•°</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">in_order</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        _in_order(_root);<span class="comment">//ä¼ å…¥æ ¹ç»“ç‚¹</span></span><br><span class="line">        std::cout &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    <span class="type">void</span> _in_order(Node* root)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="literal">nullptr</span>) <span class="keyword">return</span>;</span><br><span class="line">        _in_order(root-&gt;_left);<span class="comment">//å…ˆè®¿é—®å·¦ç»“ç‚¹</span></span><br><span class="line">        std::cout &lt;&lt; root-&gt;_value &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; std::endl;<span class="comment">//å†è®¿é—®æ ¹ç»“ç‚¹</span></span><br><span class="line">        _in_order(root-&gt;_right);<span class="comment">//æœ€åè®¿é—®å³ç»“ç‚¹</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>ç„¶åå†™ä¸€æ®µæµ‹è¯•ä»£ç æµ‹è¯•æ€§è´¨</p><blockquote><p>test.cpp</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;BSTree.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">arr</span><span class="params">(&#123; <span class="number">2</span>,<span class="number">3</span>,<span class="number">1</span>,<span class="number">5</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">7</span> &#125;)</span></span>;<span class="comment">//å‡†å¤‡å¾…æ’å…¥çš„é”®å€¼å¯¹</span></span><br><span class="line">key_value::BSTree&lt;<span class="type">int</span>, <span class="type">int</span>&gt; bst;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; arr.<span class="built_in">size</span>(); ++i)</span><br><span class="line">&#123;</span><br><span class="line">bst.<span class="built_in">insert</span>(arr[i],arr[i]);<span class="comment">//è¿™é‡Œä½¿é”®å€¼ç›¸åŒï¼Œæ–¹ä¾¿è§‚å¯Ÿ</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">bst.<span class="built_in">in_order</span>();<span class="comment">//æµ‹è¯•</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="findå‡½æ•°"><a href="#findå‡½æ•°" class="headerlink" title="findå‡½æ•°"></a><code>find</code>å‡½æ•°</h3><p>å¯ä»¥ç”¨<code>find</code>å‡½æ•°æŸ¥æ‰¾å¯¹åº”<code>key</code>çš„ç»“ç‚¹ã€‚</p><p>åŒæ—¶è§‚å¯Ÿå¯çŸ¥ï¼Œæ§åˆ¶<code>cur</code>å’Œ<code>parent</code>çš„ç§»åŠ¨çš„ä»£ç æ®µå’Œå‰é¢çš„å‡½æ•°å¾ˆåƒï¼Œæ‰€ä»¥ç»™<code>find</code>å‡½æ•°åˆ†å‡ºæ¥ä¸€ä¸ª<code>_find</code>å­å‡½æ•°ï¼Œå¹¶ä½¿å®ƒè¿”å›<code>pair&lt;Node*,Node*&gt;</code>ï¼Œå°†è¿™ä¸¤ä¸ªæŒ‡é’ˆè¿”å›åˆ©äºå…¶å®ƒå‡½æ•°å¯¹<code>_find</code>çš„å›è°ƒ</p><p>åŒæ—¶ä¸ºäº†ç®€åŒ–ä»£ç ï¼Œç»§ç»­ç”¨<code>typedef</code>å°è£…ç±»å‹</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">typedef</span> std::pair&lt; Node*, Node* &gt; PNN;<span class="comment">//ç®€åŒ–ä»£ç </span></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">find</span><span class="params">(<span class="type">const</span> K&amp; key)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> _find(key).first != <span class="literal">nullptr</span>;<span class="comment">//æ£€æŸ¥æ˜¯å¦æ‰¾åˆ°</span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line"></span><br><span class="line">    PNN _find(<span class="type">const</span> K&amp; key)<span class="comment">//è¿”å›PNNç”¨äºç®€åŒ–å…¶å®ƒæ¥å£</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (_root == <span class="literal">nullptr</span>) <span class="keyword">return</span> &#123;<span class="literal">nullptr</span>,<span class="literal">nullptr</span>&#125;;</span><br><span class="line">        Node* cur = _root;</span><br><span class="line">        Node* parent = <span class="literal">nullptr</span>;</span><br><span class="line">        <span class="keyword">while</span> (cur)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (key &lt; cur-&gt;_key)<span class="comment">//keyæ¯”å½“å‰èŠ‚ç‚¹å°ï¼Œå¾€å·¦å­æ ‘èµ°</span></span><br><span class="line">            &#123;</span><br><span class="line">                parent = cur;</span><br><span class="line">                cur = cur-&gt;_left;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (key &gt; cur-&gt;_key)<span class="comment">//å¾€å³å­æ ‘èµ°</span></span><br><span class="line">            &#123;</span><br><span class="line">                parent = cur;</span><br><span class="line">                cur = cur-&gt;_right;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">//æ‰¾åˆ°key</span></span><br><span class="line">                <span class="keyword">return</span> &#123; cur,parent &#125;;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//æ²¡æ‰¾åˆ°key,curä¸ºnullptr</span></span><br><span class="line">        <span class="keyword">return</span> &#123; <span class="literal">nullptr</span>,parent &#125;;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h4 id="é‡å†™insertå‡½æ•°"><a href="#é‡å†™insertå‡½æ•°" class="headerlink" title="é‡å†™insertå‡½æ•°"></a>é‡å†™<code>insert</code>å‡½æ•°</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">bool</span> <span class="title">insert</span><span class="params">(<span class="type">const</span> K&amp; key, <span class="type">const</span> V&amp; value)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (_root == <span class="literal">nullptr</span>)<span class="comment">//ç©ºæ ‘</span></span><br><span class="line">    &#123;</span><br><span class="line">        _root = <span class="keyword">new</span> <span class="built_in">Node</span>(key, value);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//====ä¿®æ”¹çš„éƒ¨åˆ†====</span></span><br><span class="line">    PNN pnn = _find(key);</span><br><span class="line"></span><br><span class="line">    Node* cur = pnn.first;</span><br><span class="line">    Node* parent = pnn.second;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (cur != <span class="literal">nullptr</span>)<span class="comment">//è¯¥keyå·²å­˜åœ¨ï¼Œæ’å…¥å¤±è´¥</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//================</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//æ­¤æ—¶curä¸ºnullptr, parentä¸ºcurçš„ç»“ç‚¹</span></span><br><span class="line">    <span class="keyword">if</span> (key &lt; parent-&gt;_key)parent-&gt;_left = <span class="keyword">new</span> <span class="built_in">Node</span>(key, value);</span><br><span class="line">    <span class="keyword">else</span> parent-&gt;_right = <span class="keyword">new</span> <span class="built_in">Node</span>(key, value);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;<span class="comment">//æˆåŠŸæ’å…¥</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="eraseå‡½æ•°"><a href="#eraseå‡½æ•°" class="headerlink" title="eraseå‡½æ•°"></a><code>erase</code>å‡½æ•°</h3><p>è¿™é‡Œä¹Ÿå¯ä»¥å¤ç”¨<code>_find</code>æ¥æ–¹ä¾¿åœ°åˆ é™¤ç»“ç‚¹</p><p>è¿™é‡Œè¦è€ƒè™‘çš„æƒ…å†µæœ‰:</p><ul><li>æ ‘ä¸ºç©º</li><li>åˆ é™¤æœ€åä¸€ä¸ªç»“ç‚¹</li><li>åˆ é™¤æ ¹èŠ‚ç‚¹</li><li>å·¦å­æ ‘ä¸ºç©ºï¼ˆåŒ…æ‹¬å¶å­ç»“ç‚¹ï¼‰</li><li>å³å­æ ‘ä¸ºç©º</li><li>åˆ é™¤ä¸€èˆ¬çš„ç»“ç‚¹</li></ul><p>å½“æ ‘æœ‰<code>&gt;=2</code>ä¸ªç»“ç‚¹ï¼Œä¸”è¦åˆ é™¤<code>éå¶å­</code>ç»“ç‚¹æ—¶ï¼Œè¦è€ƒè™‘<code>ç»“ç‚¹æ›¿æ¢</code>ï¼Œå¦åˆ™äºŒå‰æ ‘ä¼šæ–­æ‰ï¼Œè¿™é‡Œä¸€èˆ¬ä¸¤ç§ç­–ç•¥ï¼Œå–å·¦å­æ ‘çš„æœ€å³ç»“ç‚¹ï¼ˆæœ€å¤§ç»“ç‚¹ï¼‰ï¼Œæˆ–å–å³å­æ ‘çš„æœ€å·¦ç»“ç‚¹ï¼ˆæœ€å°ç»“ç‚¹ï¼‰</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">erase</span><span class="params">(<span class="type">const</span> K&amp; key)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (_root == <span class="literal">nullptr</span>)<span class="keyword">return</span> <span class="literal">false</span>;<span class="comment">//ç©ºæ ‘æ— æ³•åˆ é™¤</span></span><br><span class="line">        <span class="keyword">if</span> (_root-&gt;_key == key &amp;&amp; _root-&gt;_left == <span class="literal">nullptr</span> &amp;&amp; _root-&gt;_right == <span class="literal">nullptr</span>)<span class="comment">//åˆ é™¤æœ€åä¸€ä¸ªç»“ç‚¹</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">delete</span> _root;</span><br><span class="line">            _root = <span class="literal">nullptr</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        PNN pnn = _find(key);</span><br><span class="line">        Node* cur = pnn.first;</span><br><span class="line">        Node* parent = pnn.second;</span><br><span class="line">        <span class="keyword">if</span> (cur == <span class="literal">nullptr</span>) <span class="keyword">return</span> <span class="literal">false</span>;<span class="comment">//æ²¡æ‰¾åˆ°è¯¥ç»“ç‚¹</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//ä¸‹é¢çš„curå¿…ä¸ä¸ºç©º</span></span><br><span class="line">        <span class="keyword">if</span>(cur-&gt;_left == <span class="literal">nullptr</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (cur == _root)<span class="comment">//ä¸ºæ ¹èŠ‚ç‚¹æ—¶è¦æ›¿æ¢æ ¹èŠ‚ç‚¹</span></span><br><span class="line">            &#123;</span><br><span class="line">                Node* right = _root-&gt;_right;</span><br><span class="line">                <span class="keyword">delete</span> _root;</span><br><span class="line">                _root = right;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//æ²¡æœ‰å·¦å­æ ‘ï¼Œåˆ™ç›´æ¥ç§»é™¤ç»“ç‚¹,å³å­æ ‘æ›¿ä»£åŸç»“ç‚¹</span></span><br><span class="line">            <span class="keyword">if</span> (cur == parent-&gt;_left) parent-&gt;_left = cur-&gt;_right;</span><br><span class="line">            <span class="keyword">else</span> parent-&gt;_right = cur-&gt;_right;</span><br><span class="line">            <span class="keyword">delete</span> cur;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (cur-&gt;_right == <span class="literal">nullptr</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (cur == _root)</span><br><span class="line">            &#123;</span><br><span class="line">                Node* left = _root-&gt;_left;</span><br><span class="line">                <span class="keyword">delete</span> _root;</span><br><span class="line">                _root = left;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//ç›´æ¥è¿‡ç»§å·¦å­æ ‘</span></span><br><span class="line">            <span class="keyword">if</span> (cur == parent-&gt;_left)parent-&gt;_left = cur-&gt;_left;</span><br><span class="line">            <span class="keyword">else</span> parent-&gt;_right = cur-&gt;_left;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//æ‰¾åˆ°å·¦å­æ ‘çš„æœ€å³ç»“ç‚¹</span></span><br><span class="line">            Node* _cur = cur-&gt;_left;</span><br><span class="line">            Node* _parent = cur;</span><br><span class="line">            <span class="keyword">while</span> (_cur-&gt;_right != <span class="literal">nullptr</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                _parent = _cur;</span><br><span class="line">                _cur = _cur-&gt;_right;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//ç§»èµ°ç»“ç‚¹</span></span><br><span class="line">            <span class="keyword">if</span> (_cur == _parent-&gt;_left) _parent-&gt;_left = <span class="literal">nullptr</span>;</span><br><span class="line">            <span class="keyword">else</span> _parent-&gt;_right = <span class="literal">nullptr</span>;</span><br><span class="line">            <span class="comment">//è·å–curçš„å·¦å³ç»“ç‚¹,å¿…é¡»å†ç§»èµ°ç»“ç‚¹åï¼Œå¦åˆ™å¯èƒ½å‡ºç°æŒ‡å‘è‡ªå·±çš„ç»“ç‚¹</span></span><br><span class="line">            _cur-&gt;_left = cur-&gt;_left;</span><br><span class="line">            _cur-&gt;_right = cur-&gt;_right;</span><br><span class="line">            <span class="comment">//ä»£æ›¿curçš„ä½ç½®</span></span><br><span class="line">            <span class="keyword">if</span> (cur == _root)<span class="comment">//åˆ é™¤æ ¹ç»“ç‚¹æ—¶</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">delete</span> _root;</span><br><span class="line">                _root = _cur;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span><span class="comment">//åˆ é™¤æ™®é€šç»“ç‚¹æ—¶</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (cur == parent-&gt;_left) parent-&gt;_left = _cur;</span><br><span class="line">                <span class="keyword">else</span> parent-&gt;_right = _cur;</span><br><span class="line">                <span class="keyword">delete</span> cur;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="æ‹·è´æ„é€ "><a href="#æ‹·è´æ„é€ " class="headerlink" title="æ‹·è´æ„é€ "></a>æ‹·è´æ„é€ </h3><p>åˆ©ç”¨äºŒå‰æ ‘çš„æ€§è´¨ï¼Œå¯ä»¥å†æ„å»ºä¸ª<code>copy</code>å­å‡½æ•°æ¥é€’å½’æ‹·è´</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">BSTree</span>(<span class="type">const</span> BSTree&lt;K&gt;&amp; t)</span><br><span class="line">    &#123;</span><br><span class="line">        _root = <span class="built_in">Copy</span>(t._root);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    <span class="function">Node* <span class="title">copy</span><span class="params">(Node* root)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="literal">nullptr</span>) <span class="keyword">return</span> <span class="literal">nullptr</span>;<span class="comment">//é€’å½’å‡ºå£</span></span><br><span class="line">        Node* pnode = <span class="keyword">new</span> <span class="built_in">Node</span>(root-&gt;_key, root-&gt;_value);<span class="comment">//å¤åˆ¶ç»“ç‚¹</span></span><br><span class="line">        pnode-&gt;_left = <span class="built_in">copy</span>(root-&gt;_left);</span><br><span class="line">        pnode-&gt;_right = <span class="built_in">copy</span>(root-&gt;_right);</span><br><span class="line">        <span class="keyword">return</span> pnode;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="ææ„å‡½æ•°"><a href="#ææ„å‡½æ•°" class="headerlink" title="ææ„å‡½æ•°"></a>ææ„å‡½æ•°</h3><p>è¿™é‡Œä¹Ÿç”¨<code>destroy</code>å­å‡½æ•°æ¥é€’å½’åœ°ååºéå†ä¾æ¬¡åˆ é™¤å„ä¸ªç»“ç‚¹</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    ~<span class="built_in">BSTree</span>()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">destroy</span>(_root);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">destroy</span><span class="params">(Node* root)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="literal">nullptr</span>) <span class="keyword">return</span>;</span><br><span class="line">        <span class="built_in">destroy</span>(root-&gt;_left);</span><br><span class="line">        <span class="built_in">destroy</span>(root-&gt;_right);</span><br><span class="line">        <span class="keyword">delete</span> root;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>è‡³æ­¤ï¼Œä¸€ä¸ªåŸºæœ¬çš„äºŒå‰æœç´¢æ ‘å·²å°è£…å®Œæˆ</p><p>å®ç°çš„åŠŸèƒ½æœ‰</p><ul><li>æ„å»ºäºŒå‰æœç´¢æ ‘</li><li>æ‹·è´å¤åˆ¶äºŒå‰æ ‘</li><li>æŒ‰<code>key</code>å€¼æŸ¥æ‰¾</li><li>æŒ‰<code>key</code>å€¼åˆ é™¤</li></ul><h3 id="å®Œæ•´ä»£ç "><a href="#å®Œæ•´ä»£ç " class="headerlink" title="å®Œæ•´ä»£ç "></a>å®Œæ•´ä»£ç </h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">pragma</span> once</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;utility&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> key_value</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">K</span>,<span class="keyword">class</span> <span class="title class_">V</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BSTNode</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">BSTNode</span>(<span class="type">const</span> K&amp; key = <span class="built_in">K</span>(), <span class="type">const</span> V&amp; value = <span class="built_in">V</span>())</span><br><span class="line">:_left(<span class="literal">nullptr</span>)</span><br><span class="line">, _right(<span class="literal">nullptr</span>)</span><br><span class="line">, _key(key)</span><br><span class="line">, _value(value)</span><br><span class="line">&#123;&#125;</span><br><span class="line">BSTNode&lt;K, V&gt;* _left;<span class="comment">//æŒ‡å‘å·¦å­æ ‘</span></span><br><span class="line">BSTNode&lt;K, V&gt;* _right;<span class="comment">//æŒ‡å‘å³å­æ ‘</span></span><br><span class="line">K _key;<span class="comment">//å‚¨å­˜é”®</span></span><br><span class="line">V _value;<span class="comment">//å‚¨å­˜å€¼</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">K</span>,<span class="keyword">class</span> <span class="title class_">V</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BSTree</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">typedef</span> BSTNode&lt;K, V&gt; Node;<span class="comment">//ä½¿ç”¨typedefç®€åŒ–ä»£ç </span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">BSTree</span>() :_root(<span class="literal">nullptr</span>) &#123;&#125;<span class="comment">//æä¾›é»˜è®¤æ„é€ å‡½æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">BSTree</span>(<span class="type">const</span> BSTree&lt;K, V&gt;&amp; bst)</span><br><span class="line">&#123;</span><br><span class="line">_root = <span class="built_in">copy</span>(bst._root);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">~<span class="built_in">BSTree</span>()</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">destroy</span>(_root);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">insert</span><span class="params">(<span class="type">const</span> K&amp; key, <span class="type">const</span> V&amp; value)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span> (_root == <span class="literal">nullptr</span>)<span class="comment">//ç©ºæ ‘</span></span><br><span class="line">&#123;</span><br><span class="line">_root = <span class="keyword">new</span> <span class="built_in">Node</span>(key, value);</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//====ä¿®æ”¹çš„éƒ¨åˆ†====</span></span><br><span class="line">PNN pnn = _find(key);</span><br><span class="line"></span><br><span class="line">Node* cur = pnn.first;</span><br><span class="line">Node* parent = pnn.second;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (cur != <span class="literal">nullptr</span>)<span class="comment">//è¯¥keyå·²å­˜åœ¨ï¼Œæ’å…¥å¤±è´¥</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//================</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ­¤æ—¶curä¸ºnullptr, parentä¸ºcurçš„ç»“ç‚¹</span></span><br><span class="line"><span class="keyword">if</span> (key &lt; parent-&gt;_key)parent-&gt;_left = <span class="keyword">new</span> <span class="built_in">Node</span>(key, value);</span><br><span class="line"><span class="keyword">else</span> parent-&gt;_right = <span class="keyword">new</span> <span class="built_in">Node</span>(key, value);</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;<span class="comment">//æˆåŠŸæ’å…¥</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">in_order</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">_in_order(_root);<span class="comment">//ä¼ å…¥æ ¹ç»“ç‚¹</span></span><br><span class="line">std::cout &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line"><span class="type">void</span> _in_order(Node* root)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (root == <span class="literal">nullptr</span>) <span class="keyword">return</span>;</span><br><span class="line">_in_order(root-&gt;_left);<span class="comment">//å…ˆè®¿é—®å·¦ç»“ç‚¹</span></span><br><span class="line">std::cout &lt;&lt; root-&gt;_value &lt;&lt; <span class="string">&quot; &quot;</span>;<span class="comment">//å†è®¿é—®æ ¹ç»“ç‚¹</span></span><br><span class="line">_in_order(root-&gt;_right);<span class="comment">//æœ€åè®¿é—®å³ç»“ç‚¹</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="keyword">typedef</span> std::pair&lt; Node*, Node* &gt; PNN;<span class="comment">//ç®€åŒ–ä»£ç </span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">find</span><span class="params">(<span class="type">const</span> K&amp; key)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> _find(key).first != <span class="literal">nullptr</span>;<span class="comment">//æ£€æŸ¥æ˜¯å¦æ‰¾åˆ°</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line"></span><br><span class="line">PNN _find(<span class="type">const</span> K&amp; key)<span class="comment">//è¿”å›PNNç”¨äºç®€åŒ–å…¶å®ƒæ¥å£</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (_root == <span class="literal">nullptr</span>) <span class="keyword">return</span> &#123;<span class="literal">nullptr</span>,<span class="literal">nullptr</span>&#125;;</span><br><span class="line">Node* cur = _root;</span><br><span class="line">Node* parent = <span class="literal">nullptr</span>;</span><br><span class="line"><span class="keyword">while</span> (cur)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (key &lt; cur-&gt;_key)<span class="comment">//keyæ¯”å½“å‰èŠ‚ç‚¹å°ï¼Œå¾€å·¦å­æ ‘èµ°</span></span><br><span class="line">&#123;</span><br><span class="line">parent = cur;</span><br><span class="line">cur = cur-&gt;_left;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (key &gt; cur-&gt;_key)<span class="comment">//å¾€å³å­æ ‘èµ°</span></span><br><span class="line">&#123;</span><br><span class="line">parent = cur;</span><br><span class="line">cur = cur-&gt;_right;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//æ‰¾åˆ°key</span></span><br><span class="line"><span class="keyword">return</span> &#123; cur,parent &#125;;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ²¡æ‰¾åˆ°key,curä¸ºnullptr</span></span><br><span class="line"><span class="keyword">return</span> &#123; <span class="literal">nullptr</span>,parent &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">erase</span><span class="params">(<span class="type">const</span> K&amp; key)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span> (_root == <span class="literal">nullptr</span>)<span class="keyword">return</span> <span class="literal">false</span>;<span class="comment">//ç©ºæ ‘æ— æ³•åˆ é™¤</span></span><br><span class="line"><span class="keyword">if</span> (_root-&gt;_key == key &amp;&amp; _root-&gt;_left == <span class="literal">nullptr</span> &amp;&amp; _root-&gt;_right == <span class="literal">nullptr</span>)<span class="comment">//åˆ é™¤æœ€åä¸€ä¸ªç»“ç‚¹</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">delete</span> _root;</span><br><span class="line">_root = <span class="literal">nullptr</span>;</span><br><span class="line">&#125;</span><br><span class="line">PNN pnn = _find(key);</span><br><span class="line">Node* cur = pnn.first;</span><br><span class="line">Node* parent = pnn.second;</span><br><span class="line"><span class="keyword">if</span> (cur == <span class="literal">nullptr</span>) <span class="keyword">return</span> <span class="literal">false</span>;<span class="comment">//æ²¡æ‰¾åˆ°è¯¥ç»“ç‚¹</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¸‹é¢çš„curå¿…ä¸ä¸ºç©º</span></span><br><span class="line"><span class="keyword">if</span>(cur-&gt;_left == <span class="literal">nullptr</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (cur == _root)<span class="comment">//ä¸ºæ ¹èŠ‚ç‚¹æ—¶è¦æ›¿æ¢æ ¹èŠ‚ç‚¹</span></span><br><span class="line">&#123;</span><br><span class="line">Node* right = _root-&gt;_right;</span><br><span class="line"><span class="keyword">delete</span> _root;</span><br><span class="line">_root = right;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ²¡æœ‰å·¦å­æ ‘ï¼Œåˆ™ç›´æ¥ç§»é™¤ç»“ç‚¹,å³å­æ ‘æ›¿ä»£åŸç»“ç‚¹</span></span><br><span class="line"><span class="keyword">if</span> (cur == parent-&gt;_left) parent-&gt;_left = cur-&gt;_right;</span><br><span class="line"><span class="keyword">else</span> parent-&gt;_right = cur-&gt;_right;</span><br><span class="line"><span class="keyword">delete</span> cur;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (cur-&gt;_right == <span class="literal">nullptr</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (cur == _root)</span><br><span class="line">&#123;</span><br><span class="line">Node* left = _root-&gt;_left;</span><br><span class="line"><span class="keyword">delete</span> _root;</span><br><span class="line">_root = left;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ç›´æ¥è¿‡ç»§å·¦å­æ ‘</span></span><br><span class="line"><span class="keyword">if</span> (cur == parent-&gt;_left)parent-&gt;_left = cur-&gt;_left;</span><br><span class="line"><span class="keyword">else</span> parent-&gt;_right = cur-&gt;_left;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> </span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//æ‰¾åˆ°å·¦å­æ ‘çš„æœ€å³ç»“ç‚¹</span></span><br><span class="line">Node* _cur = cur-&gt;_left;</span><br><span class="line">Node* _parent = cur;</span><br><span class="line"><span class="keyword">while</span> (_cur-&gt;_right != <span class="literal">nullptr</span>)</span><br><span class="line">&#123;</span><br><span class="line">_parent = _cur;</span><br><span class="line">_cur = _cur-&gt;_right;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ç§»èµ°ç»“ç‚¹</span></span><br><span class="line"><span class="keyword">if</span> (_cur == _parent-&gt;_left) _parent-&gt;_left = <span class="literal">nullptr</span>;</span><br><span class="line"><span class="keyword">else</span> _parent-&gt;_right = <span class="literal">nullptr</span>;</span><br><span class="line"><span class="comment">//è·å–curçš„å·¦å³ç»“ç‚¹,å¿…é¡»å†ç§»èµ°ç»“ç‚¹åï¼Œå¦åˆ™å¯èƒ½å‡ºç°æŒ‡å‘è‡ªå·±çš„ç»“ç‚¹</span></span><br><span class="line">_cur-&gt;_left = cur-&gt;_left;</span><br><span class="line">_cur-&gt;_right = cur-&gt;_right;</span><br><span class="line"><span class="comment">//ä»£æ›¿curçš„ä½ç½®</span></span><br><span class="line"><span class="keyword">if</span> (cur == _root)<span class="comment">//åˆ é™¤æ ¹ç»“ç‚¹æ—¶</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">delete</span> _root;</span><br><span class="line">_root = _cur;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span><span class="comment">//åˆ é™¤æ™®é€šç»“ç‚¹æ—¶</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (cur == parent-&gt;_left) parent-&gt;_left = _cur;</span><br><span class="line"><span class="keyword">else</span> parent-&gt;_right = _cur;</span><br><span class="line"><span class="keyword">delete</span> cur;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line"><span class="function">Node* <span class="title">copy</span><span class="params">(Node* root)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span> (root == <span class="literal">nullptr</span>) <span class="keyword">return</span> <span class="literal">nullptr</span>;<span class="comment">//é€’å½’å‡ºå£</span></span><br><span class="line">Node* pnode = <span class="keyword">new</span> <span class="built_in">Node</span>(root-&gt;_key, root-&gt;_value);<span class="comment">//å¤åˆ¶ç»“ç‚¹</span></span><br><span class="line">pnode-&gt;_left = <span class="built_in">copy</span>(root-&gt;_left);</span><br><span class="line">pnode-&gt;_right = <span class="built_in">copy</span>(root-&gt;_right);</span><br><span class="line"><span class="keyword">return</span> pnode;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">destroy</span><span class="params">(Node* root)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span> (root == <span class="literal">nullptr</span>) <span class="keyword">return</span>;</span><br><span class="line"><span class="built_in">destroy</span>(root-&gt;_left);</span><br><span class="line"><span class="built_in">destroy</span>(root-&gt;_right);</span><br><span class="line"><span class="keyword">delete</span> root;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">Node* _root;<span class="comment">//æŒ‡å‘æ ¹èŠ‚ç‚¹çš„æŒ‡é’ˆä½œä¸ºæˆå‘˜å˜é‡</span></span><br><span class="line">&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> æ•°æ®ç»“æ„ äºŒå‰æ ‘ æœç´¢æ ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ–‡ä»¶ç¼“å†²åŒº</title>
      <link href="/2024/07/26/c-file-cache/"/>
      <url>/2024/07/26/c-file-cache/</url>
      
        <content type="html"><![CDATA[<p>å‰ç½®åšå®¢ <a href="https://www.supdriver.top/2024/07/10/basicIO/">åŸºç¡€IO</a></p><h1 id="ä¸ºä»€ä¹ˆæœ‰ç¼“å†²"><a href="#ä¸ºä»€ä¹ˆæœ‰ç¼“å†²" class="headerlink" title="ä¸ºä»€ä¹ˆæœ‰ç¼“å†²"></a>ä¸ºä»€ä¹ˆæœ‰ç¼“å†²</h1><p>å› ä¸º<code>ç£ç›˜çš„è¯»å†™</code>ä¸<code>å†…å­˜çš„è¯»å†™</code>æ“ä½œé€Ÿåº¦ç›¸æ¯”ï¼Œç£ç›˜çš„è¯»å†™æ˜¯ç›¸å·®æ•°é‡çº§çš„æ…¢ï¼Œæ‰€ä»¥ä¸ºäº†æé«˜å†…å­˜<strong>å¤šæ¬¡</strong>ï¼Œ<strong>é¢‘ç¹</strong>è¯»å†™ç£ç›˜æ–‡ä»¶çš„æ•ˆç‡ï¼Œ<code>ç¼“å†²åŒº</code>è¢«æŠ•å…¥ä½¿ç”¨ã€‚å°¤å…¶æ˜¯å†…å­˜å†…å®¹<strong>å†™å…¥</strong>ç£ç›˜æ—¶ï¼Œå¸¸å¸¸å…ˆå†™å…¥<code>å†…å­˜çº§ç¼“å†²åŒº</code>ï¼Œå†åœ¨ç‰¹å®šè§„åˆ™ä¸‹ä¸€æ¬¡æ€§å°†<code>ç¼“å†²åŒº</code>çš„å†…å®¹å†™å…¥ç£ç›˜</p><p>**æœ¬æ–‡ä»¥<code>Cè¯­è¨€</code>æä¾›çš„ç”¨æˆ·çº§ç¼“å†²åŒºä¸ºä¾‹ä»‹ç»ç¼“å†²åŒº</p><h1 id="ç¼“å†²åŒºçš„åˆ·æ–°è§„åˆ™"><a href="#ç¼“å†²åŒºçš„åˆ·æ–°è§„åˆ™" class="headerlink" title="ç¼“å†²åŒºçš„åˆ·æ–°è§„åˆ™"></a>ç¼“å†²åŒºçš„åˆ·æ–°è§„åˆ™</h1><p>é¦–å…ˆå½“ä¸€ä¸ªè¿›ç¨‹<strong>æ­£å¸¸é€€å‡º</strong>æ—¶ï¼Œä¼šå…ˆåˆ·æ–°ç¼“å†²åŒºå†å…³é—­æ–‡ä»¶,æ­¤æ—¶å¿…å®šæœ‰ä¸€æ¬¡åˆ·æ–°</p><p>è€Œå½“è¿›ç¨‹<strong>è¿è¡Œæ—¶</strong>ç¼“å†²åŒºçš„åˆ·æ–°ç­–ç•¥ä¸»è¦æœ‰ä»¥ä¸‹ä¸‰ç§</p><ul><li><code>æ— ç¼“å†²</code> å†…å®¹ç›´æ¥å†™å…¥æ–‡ä»¶</li><li><code>è¡Œç¼“å†²</code> è¾“å…¥ä¸€èˆ¬å†…å®¹ä¸åˆ·æ–°ï¼Œé‡åˆ°<code>\n</code>æ—¶åˆ·æ–°ä¸€æ¬¡ç¼“å†²åŒº</li><li><code>å…¨ç¼“å†²</code> ç¼“å†²åŒºæœ‰å®¹é‡é™åˆ¶ï¼Œ<strong>æ»¡äº†</strong>ä¹‹åå°±åˆ·æ–°</li></ul><h1 id="è®¤è¯†ä¸€ä¸‹Cè¯­è¨€çš„ç¼“å†²åŒº"><a href="#è®¤è¯†ä¸€ä¸‹Cè¯­è¨€çš„ç¼“å†²åŒº" class="headerlink" title="è®¤è¯†ä¸€ä¸‹Cè¯­è¨€çš„ç¼“å†²åŒº"></a>è®¤è¯†ä¸€ä¸‹Cè¯­è¨€çš„ç¼“å†²åŒº</h1><p><em>è¿™é‡Œçš„ç³»ç»Ÿç¯å¢ƒæ˜¯Linux</em></p><h2 id="åˆ·æ–°è§„åˆ™"><a href="#åˆ·æ–°è§„åˆ™" class="headerlink" title="åˆ·æ–°è§„åˆ™"></a>åˆ·æ–°è§„åˆ™</h2><p>è¿è¡Œå¦‚ä¸‹ä»£ç </p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    FILE* pfile = fopen(<span class="string">&quot;file.txt&quot;</span>,<span class="string">&quot;w&quot;</span>);<span class="comment">//æ‰“å¼€ç©ºæ–‡ä»¶</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">fprintf</span>(<span class="built_in">stdout</span>,<span class="string">&quot;stdout&quot;</span>);<span class="comment">//å‘æ ‡å‡†è¾“å‡ºè¾“å‡º</span></span><br><span class="line">    <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>,<span class="string">&quot;strerr&quot;</span>);<span class="comment">//å‘æ ‡å‡†é”™è¯¯è¾“å‡ºè¾“å‡º</span></span><br><span class="line">    <span class="built_in">fprintf</span>(pfile,<span class="string">&quot;file&quot;</span>);<span class="comment">//å‘æ–‡ä»¶è¾“å‡º</span></span><br><span class="line">    _exit(<span class="number">0</span>);<span class="comment">//ä¸åˆ·æ–°ç¼“å†²åŒºï¼Œç›´æ¥é€€å‡º</span></span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»ˆç«¯å’Œæ–‡ä»¶çš„å†…å®¹ä¸º:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stderr</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°åªæœ‰<code>æ ‡å‡†é”™è¯¯è¾“å‡º</code>æœ‰å®é™…çš„è¾“å‡º,è€Œ<code>æ ‡å‡†è¾“å‡º</code>å’Œ<code>æ–‡ä»¶è¾“å‡º</code>éƒ½æ²¡æœ‰è¾“å‡º</p><p>ç›®å‰å¯ä»¥å¾—å‡ºï¼š</p><ul><li><code>æ ‡å‡†é”™è¯¯è¾“å‡º</code>æ˜¯<code>æ— ç¼“å†²</code>çš„åˆ·æ–°è§„åˆ™</li></ul><p>å› æ­¤æˆ‘ä»¬å†è¿è¡Œå¦‚ä¸‹ä»£ç ï¼Œå†è¾“å‡ºå†…å®¹åé¢åŠ ä¸Š<code>\n</code>æ¢è¡Œ</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    FILE* pfile = fopen(<span class="string">&quot;file.txt&quot;</span>,<span class="string">&quot;w&quot;</span>);<span class="comment">//æ‰“å¼€ç©ºæ–‡ä»¶</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">fprintf</span>(<span class="built_in">stdout</span>,<span class="string">&quot;stdout\n&quot;</span>);<span class="comment">//å‘æ ‡å‡†è¾“å‡ºè¾“å‡º</span></span><br><span class="line">    <span class="built_in">fprintf</span>(pfile,<span class="string">&quot;file\n&quot;</span>);<span class="comment">//å‘æ–‡ä»¶è¾“å‡º</span></span><br><span class="line">    _exit(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»ˆç«¯è¾“å‡ºå†…å®¹ä¸º</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">stdout</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>è€Œæ–‡ä»¶ä¾ç„¶ä¸ºç©º</strong></p><p>ç”±æ­¤å¯å¾—:</p><ul><li><code>æ ‡å‡†è¾“å‡º</code>éµå¾ª<code>è¡Œç¼“å†²</code>çš„åˆ·æ–°è§„åˆ™</li><li><code>æ–‡ä»¶è¾“å‡º</code>éµå¾ª<code>å…¨ç¼“å†²</code>çš„åˆ·æ–°è§„åˆ™</li></ul><h2 id="ç¼“å†²åŒºåœ¨forkä¸­çš„è¡Œä¸º"><a href="#ç¼“å†²åŒºåœ¨forkä¸­çš„è¡Œä¸º" class="headerlink" title="ç¼“å†²åŒºåœ¨forkä¸­çš„è¡Œä¸º"></a>ç¼“å†²åŒºåœ¨forkä¸­çš„è¡Œä¸º</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;hello1 &quot;</span>);<span class="comment">//çˆ¶è¿›ç¨‹å‘æ ‡å‡†è¾“å‡ºæ‰“å°ä¸€å¥è¯</span></span><br><span class="line">    <span class="built_in">fprintf</span>(<span class="built_in">stdout</span>,<span class="string">&quot;hello2 &quot;</span>);<span class="comment">//çˆ¶è¿›ç¨‹å‘æ ‡å‡†è¾“å‡ºæ‰“å°ä¸€å¥è¯</span></span><br><span class="line"></span><br><span class="line">    fork();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šæ®µä»£ç çš„è¾“å‡ºå†…å®¹ä¸º</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hello1 hello2 hello1 hello2 </span><br></pre></td></tr></table></figure><p>å¯è§<code>fork</code>å‰çš„ç¼“å†²åŒºå†…å®¹è¢«æ‰“å°äº†ä¸¤æ¬¡ï¼ˆçˆ¶å­è¿›ç¨‹å„ä¸€æ¬¡ï¼‰ï¼Œæ‰€ä»¥<code>fork</code>ä¹Ÿä¼šå¤åˆ¶<code>ç¼“å†²åŒº</code>çš„å†…å®¹</p><p>å®é™…ä¸Š<code>ç¼“å†²åŒº</code>å±äºè¿›ç¨‹çš„ä¸€éƒ¨åˆ†ï¼Œä¸”<code>fork</code>æ—¶éµå¾ª<code>å†™æ—¶æ‹·è´</code></p><h1 id="æ¨¡æ‹Ÿä¸€ä¸‹Cè¯­è¨€çš„æ–‡ä»¶æ¥å£ï¼ˆåŒ…æ‹¬ç¼“å†²åŒºï¼‰"><a href="#æ¨¡æ‹Ÿä¸€ä¸‹Cè¯­è¨€çš„æ–‡ä»¶æ¥å£ï¼ˆåŒ…æ‹¬ç¼“å†²åŒºï¼‰" class="headerlink" title="æ¨¡æ‹Ÿä¸€ä¸‹Cè¯­è¨€çš„æ–‡ä»¶æ¥å£ï¼ˆåŒ…æ‹¬ç¼“å†²åŒºï¼‰"></a>æ¨¡æ‹Ÿä¸€ä¸‹Cè¯­è¨€çš„æ–‡ä»¶æ¥å£ï¼ˆåŒ…æ‹¬ç¼“å†²åŒºï¼‰</h1><h2 id="ä¸»è¦ç›®æ ‡"><a href="#ä¸»è¦ç›®æ ‡" class="headerlink" title="ä¸»è¦ç›®æ ‡"></a>ä¸»è¦ç›®æ ‡</h2><p>é‡‡ç”¨<code>Mystdio.h</code>å£°æ˜ï¼Œ<code>Mystdio.c</code>å®ç°çš„æ–¹å¼ï¼Œå°è£…<code>read</code>,<code>write</code>,<code>close</code>ç³»ç»Ÿè°ƒç”¨æ¥å£ã€‚å¹¶æä¾›ç”¨æˆ·çº§ç¼“å†²åŒºå’Œç¼“å†²åŒºçš„åˆ·æ–°ç­‰åŠŸèƒ½</p><h2 id="å£°æ˜ç»“æ„ä½“å’Œæ¥å£"><a href="#å£°æ˜ç»“æ„ä½“å’Œæ¥å£" class="headerlink" title="å£°æ˜ç»“æ„ä½“å’Œæ¥å£"></a>å£°æ˜ç»“æ„ä½“å’Œæ¥å£</h2><p>æˆ‘ä»¬å…ˆæŠŠä¸»è¦çš„æ¥å£å’Œä¸»è¦çš„å†…å®¹åšå‡ºæ¥çœ‹çœ‹å°è£…æ•ˆæœ</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> __MYSTDIO_H__ <span class="comment">//åˆ©ç”¨é¢„ç¼–è¯‘é˜²æ­¢å¤´æ–‡ä»¶è¢«é‡å¤ç¼–è¯‘</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> __MYSTDIO_H__</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å£°æ˜æ–‡ä»¶ç»“æ„ä½“</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">IO_FILE</span>&#123;</span></span><br><span class="line">    <span class="type">int</span> fileno;</span><br><span class="line">&#125;_FILE;</span><br><span class="line"></span><br><span class="line">_FILE * _fopen(<span class="type">const</span> <span class="type">char</span> *filename,<span class="type">const</span> <span class="type">char</span> *flag);</span><br><span class="line"><span class="type">int</span> _fwrite(_FILE* fp,<span class="type">const</span> <span class="type">char</span>*s, <span class="type">int</span> len);</span><br><span class="line"><span class="type">void</span> _fclose(_FILE* fp);</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> </span></span><br></pre></td></tr></table></figure><h2 id="éƒ¨åˆ†å®ç°æ¥å£"><a href="#éƒ¨åˆ†å®ç°æ¥å£" class="headerlink" title="éƒ¨åˆ†å®ç°æ¥å£"></a>éƒ¨åˆ†å®ç°æ¥å£</h2><p>å®ç°çš„éƒ¨åˆ†ç”±<code>Mystdio.c</code>å®Œæˆ</p><h3 id="å¤´æ–‡ä»¶"><a href="#å¤´æ–‡ä»¶" class="headerlink" title="å¤´æ–‡ä»¶"></a>å¤´æ–‡ä»¶</h3><p>è¿™é‡Œçš„å¤´æ–‡ä»¶è¦èƒ½å¤Ÿæä¾›ä½¿ç”¨ç³»ç»Ÿè°ƒç”¨æ¥å£,ä»¥åŠè°ƒç”¨å †åŒºçš„æ¥å£,æ‰€ä»¥ å¤´æ–‡ä»¶å¦‚ä¸‹:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;Mystdio.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/stat.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;fcntl.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br></pre></td></tr></table></figure><h3 id="fopenå‡½æ•°"><a href="#fopenå‡½æ•°" class="headerlink" title="_fopenå‡½æ•°"></a>_fopenå‡½æ•°</h3><p>æˆ‘ä»¬å…ˆæ¨¡æ‹Ÿå®ç°<code>fopen</code>å‡½æ•°çš„ä¸»è¦åŠŸèƒ½ï¼Œä¸»è¦å®ç°<code>&quot;w&quot;``&quot;a&quot;``&quot;r&quot;</code>çš„æ‰“å¼€æ¨¡å¼</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> FILE_MODE 0666 <span class="comment">//è®¾ç½®é»˜è®¤çš„æ–‡ä»¶æƒé™</span></span></span><br><span class="line"></span><br><span class="line">_FILE * _fopen(<span class="type">const</span> <span class="type">char</span> *filename,<span class="type">const</span> <span class="type">char</span> *flag)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> f = <span class="number">0</span>;<span class="comment">//å‡†å¤‡ç©ºä½å›¾</span></span><br><span class="line">    <span class="type">int</span> fd = <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">strcmp</span>(flag,<span class="string">&quot;w&quot;</span>) == <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        f = (O_CREAT|O_WRONLY|O_TRUNC);</span><br><span class="line">        fd = open(filename,f,FILE_MODE);<span class="comment">//æ‰“å¼€æ–‡ä»¶</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">strcmp</span>(flag,<span class="string">&quot;a&quot;</span>) == <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        f = (O_CREAT|O_WRONLY|O_APPEND);</span><br><span class="line">        fd = open(filename,f,FILE_MODE);<span class="comment">//æ‰“å¼€æ–‡ä»¶</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">strcmp</span>(flag,<span class="string">&quot;w&quot;</span>) == <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        f = O_RDONLY;</span><br><span class="line">        fd = open(filename,f);<span class="comment">//æ‰“å¼€æ–‡ä»¶</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> <span class="literal">NULL</span>;<span class="comment">//éæ³•çš„æ‰“å¼€æ¨¡å¼</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(fd == <span class="number">-1</span>) <span class="keyword">return</span> <span class="literal">NULL</span>;<span class="comment">//æ‰“å¼€å¤±è´¥</span></span><br><span class="line">    </span><br><span class="line">    _FILE *fp = (_FILE*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(_FILE));<span class="comment">//åˆ›å»º_FILEç»“æ„ä½“</span></span><br><span class="line">    fp-&gt;fileno = fp;<span class="comment">//è®¾ç½®_FILEç»“æ„ä½“</span></span><br><span class="line">    <span class="keyword">return</span> fp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Linuxæ–‡ä»¶ç³»ç»Ÿ</title>
      <link href="/2024/07/26/filesys/"/>
      <url>/2024/07/26/filesys/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Cè¯­è¨€æ–‡ä»¶æ“ä½œ</title>
      <link href="/2024/07/15/cfileop/"/>
      <url>/2024/07/15/cfileop/</url>
      
        <content type="html"><![CDATA[<h1 id="ç”¨æˆ·çº§æ–‡ä»¶æ“ä½œ"><a href="#ç”¨æˆ·çº§æ–‡ä»¶æ“ä½œ" class="headerlink" title="ç”¨æˆ·çº§æ–‡ä»¶æ“ä½œ"></a>ç”¨æˆ·çº§æ–‡ä»¶æ“ä½œ</h1><p><code>Cè¯­è¨€</code>çš„æ–‡ä»¶æ“ä½œä¹Ÿæ˜¯ç”¨æˆ·çº§çš„æ–‡ä»¶æ“ä½œï¼Œé€šè¿‡<code>FILE</code>å¯¹è±¡æ¥<strong>ç®¡ç†</strong>æ¯ä¸€ä¸ª<code>è¢«æ‰“å¼€çš„æ–‡ä»¶</code>ï¼Œä»¥åŠæä¾›äº†<strong>ç”¨æˆ·çº§</strong>æ–‡ä»¶ç¼“å†²åŒºï¼Œå› æ­¤è¿˜æ¶‰åŠåˆ°å†²åˆ·ç¼“å†²åŒºç­‰é—®é¢˜</p><h2 id="FILE-ç±»"><a href="#FILE-ç±»" class="headerlink" title="FILE ç±»"></a><code>FILE</code> ç±»</h2><p><code>FILE</code>ç±»æè¿°äº†ä¸€ä¸ªæ–‡ä»¶æµã€‚é‡Œé¢å­˜å‚¨äº†<strong>æ–‡ä»¶æ§åˆ¶</strong>æ‰€éœ€çš„ä¿¡æ¯:</p><ul><li>æŒ‡å‘è‡ªèº«ç¼“å†²åŒºçš„çš„<code>æŒ‡é’ˆ</code></li><li>ä½ç½®æŒ‡ç¤ºå™¨</li><li>çŠ¶æ€æŒ‡ç¤ºå™¨</li></ul><p>æ‰€ä»¥<code>Cè¯­è¨€</code>ä¸­å¯¹æ–‡ä»¶çš„ç®¡ç†å°±æ˜¯å¯¹<code>FILE</code>å¯¹è±¡çš„ç®¡ç†</p><h1 id="åŸºç¡€æ“ä½œ-é’ˆå¯¹ä¸€èˆ¬æ–‡ä»¶"><a href="#åŸºç¡€æ“ä½œ-é’ˆå¯¹ä¸€èˆ¬æ–‡ä»¶" class="headerlink" title="åŸºç¡€æ“ä½œ - é’ˆå¯¹ä¸€èˆ¬æ–‡ä»¶"></a>åŸºç¡€æ“ä½œ - é’ˆå¯¹ä¸€èˆ¬æ–‡ä»¶</h1><h2 id="åŸºç¡€ç¤ºä¾‹"><a href="#åŸºç¡€ç¤ºä¾‹" class="headerlink" title="åŸºç¡€ç¤ºä¾‹"></a>åŸºç¡€ç¤ºä¾‹</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">FILE* pfile = fopen(<span class="string">&quot;file.txt&quot;</span>, <span class="string">&quot;w&quot;</span>);<span class="comment">//&quot;w&quot;æ¨¡å¼æ‰“å¼€æ–‡ä»¶file.txt</span></span><br><span class="line"><span class="type">int</span> code = <span class="number">1</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">char</span>* msg = <span class="string">&quot;this is a msg&quot;</span>;</span><br><span class="line"><span class="built_in">fprintf</span>(pfile, <span class="string">&quot;get msg : %s code:%d&quot;</span>, msg, code);<span class="comment">//æ ¼å¼åŒ–è¾“å‡ºå­—ç¬¦ä¸²</span></span><br><span class="line">fclose(pfile);<span class="comment">//å†²åˆ·ç¼“å†²åŒºå¹¶å…³é—­æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šä»£ç åˆ›å»ºäº†ä¸€ä¸ª<code>file.txt</code>æ–‡ä»¶ï¼Œè¾“å…¥<code>æ ¼å¼åŒ–å­—ç¬¦ä¸²</code>(å°±å’Œä½¿ç”¨printfæ‰“å°ä¸€æ ·)ã€‚ç„¶åç”¨<code>flcose</code>å…³é—­æ–‡ä»¶æµ</p><h2 id="fopen-æ‰“å¼€æ–‡ä»¶"><a href="#fopen-æ‰“å¼€æ–‡ä»¶" class="headerlink" title="fopen æ‰“å¼€æ–‡ä»¶"></a>fopen æ‰“å¼€æ–‡ä»¶</h2><p><code>fopen</code>èƒ½å¤Ÿæ‰“å¼€ä»¥å„ç§<code>æ¨¡å¼</code>ç£ç›˜ä¸Šçš„æ–‡ä»¶</p><p><code>FILE* fopen( const char * filename, const char * mode );</code></p><p><strong>è¿”å›å€¼</strong>:</p><ul><li>æˆåŠŸæ—¶ï¼Œè¿”å›ä¸€ä¸ªä¸ä¸ºç©ºçš„<code>FILE*</code>æŒ‡é’ˆï¼Œç”¨äºæ§åˆ¶è¯¥æ–‡ä»¶</li><li>å¤±è´¥æ—¶ï¼Œè¿”å›<code>NULL</code>ç©ºæŒ‡é’ˆå¹¶è®¾ç½®äº†å…¨å±€å˜é‡<code>errno</code></li></ul><h3 id="å¸¸è§æ¨¡å¼"><a href="#å¸¸è§æ¨¡å¼" class="headerlink" title="å¸¸è§æ¨¡å¼"></a>å¸¸è§æ¨¡å¼</h3><p>| æ¨¡å¼ | ç®€è¿° |<br>| &#x3D;&#x3D;&#x3D; | &#x3D;&#x3D;&#x3D; |<br>| <code>&quot;w&quot;</code> | åˆ›å»ºä¸€ä¸ª<strong>æ–°çš„ç©ºæ–‡ä»¶</strong>ç”¨äºè¾“å‡ºæ“ä½œã€‚å¦‚æœå·²å­˜åœ¨<code>åŒåæ–‡ä»¶</code>,æ¸…é™¤åŸæ–‡ä»¶å¹¶å½“ä½œæ–°æ–‡ä»¶å¤„ç† |<br>| <code>&quot;r&quot;</code> | åªè¯»æ¨¡å¼æ‰“å¼€æ–‡ä»¶ã€‚ä¸”è¯¥æ–‡ä»¶å¿…é¡»å­˜åœ¨ |<br>| <code>&quot;a&quot;</code> | æ‰“å¼€å·²æœ‰æ–‡ä»¶æ—¶ï¼Œä»…ç”¨äºåœ¨æ–‡ä»¶æœ«å°¾<code>è¿½åŠ </code>æ–°çš„å†…å®¹ã€‚å¹¶ä¸”é‡å®šä½å‡½æ•°<code>(fseek,fsetpos,reweind)</code>ä¼šè¢«å¿½ç•¥ï¼Œå³ä½¿æˆåŠŸè°ƒç”¨ï¼Œä¹Ÿæ²¡æœ‰æ•ˆæœï¼›å½“æ–‡ä»¶ä¸å­˜åœ¨æ—¶ï¼Œä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ç©ºæ–‡ä»¶ |<br>| â€œ<code>r+</code>â€œ | è¯»å†™æ¨¡å¼æ‰“å¼€å·²æœ‰æ–‡ä»¶ï¼Œ<strong>ä¸ä¼šæ¸…é™¤</strong>åŸæ–‡ä»¶å†…å®¹,å¹¶ä¸”è¯»å†™æ—¶å‡ä»æ–‡ä»¶å¼€å¤´å¼€å§‹ã€‚æ‰“å¼€åç¬¬ä¸€æ¬¡æ“ä½œä¸ºå†™å…¥æ—¶ï¼Œä»æ–‡ä»¶å¤´éƒ¨å¼€å§‹é€å­—ç¬¦è¦†ç›–åŸæ–‡ä»¶ã€‚<strong>æ³¨</strong>è¯»å†™æ¨¡å¼åŒæ—¶åªèƒ½<code>è¯»</code>æˆ–<code>å†™</code>çš„ä¸€ç§ï¼Œç¬¬ä¸€æ¬¡å–å†³äºå…ˆè¿›è¡Œå“ªç§æ“ä½œï¼Œå¯ä»¥ç”¨<code>fseek</code>å‡½æ•°è½¬æ¢è¯»å†™æ¨¡å¼ |<br>| â€œ<code>w+</code>â€œ | è¯»å†™æ¨¡å¼æ‰“å¼€æ–°æ–‡ä»¶ï¼Œè‹¥å­˜åœ¨ï¼Œåˆ™æ¸…é™¤åŸæ–‡ä»¶å†…å®¹;è¯»å†™æ¨¡å¼çš„åˆ‡æ¢å’Œ<code>&quot;r+&quot;</code>æ¨¡å¼ç›¸åŒï¼Œå”¯ä¸€çš„åŒºåˆ«å°±æ˜¯æ‰“å¼€æ—¶æ˜¯å¦æ¸…é™¤åŸæ–‡ä»¶å†…å®¹ |<br>| â€œ<code>a+</code>â€œ | ä»æ–‡ä»¶æœ«å°¾æ‰“å¼€è¯»å†™æ¨¡å¼ï¼Œ<strong>ä¸ä¼šæ¸…é™¤åŸæ–‡ä»¶å†…å®¹</strong>ï¼Œè‹¥æ‰“å¼€åç¬¬ä¸€æ¬¡æ“ä½œä¸ºå†™ï¼Œåˆ™ä»æ–‡ä»¶æœ«å°¾å¼€å§‹ï¼›è‹¥ç¬¬ä¸€æ¬¡æ“ä½œä¸ºè¯»ï¼Œåˆ™ä»å¤´å¼€å§‹ï¼›è¯»å†™æ¨¡å¼çš„åˆ‡æ¢åŒä¸Š |</p><h3 id="äºŒè¿›åˆ¶æ¨¡å¼"><a href="#äºŒè¿›åˆ¶æ¨¡å¼" class="headerlink" title="äºŒè¿›åˆ¶æ¨¡å¼"></a>äºŒè¿›åˆ¶æ¨¡å¼</h3><p>å¦‚æœè¦ä»¥äºŒè¿›åˆ¶æ¨¡å¼æ‰“å¼€æ–‡ä»¶ï¼Œåªéœ€è¦åœ¨ä¸Šé¢çš„æ¨¡å¼æœ«å°¾åŠ ä¸Šå­—ç¬¦<code>b</code></p><p>è‹¥æœ‰<code>+</code>,åˆ™<code>b</code>æ—¢å¯ä»¥æ”¾åœ¨æœ«å°¾ä¹Ÿå¯ä»¥æ”¾åœ¨ä¸­é—´</p><ul><li><code>r+b</code> <code>w+b</code> <code>a+b</code></li><li><code>rb+</code> <code>wb+</code> <code>ab+</code></li></ul><h3 id="å¼ºåˆ¶æ–°å»ºæ–‡ä»¶"><a href="#å¼ºåˆ¶æ–°å»ºæ–‡ä»¶" class="headerlink" title="å¼ºåˆ¶æ–°å»ºæ–‡ä»¶"></a>å¼ºåˆ¶æ–°å»ºæ–‡ä»¶</h3><p>æ–°çš„Cè¯­è¨€æ ‡å‡†,<code>C2011</code>(ä¸æ˜¯C++11),æ·»åŠ äº†ä¸€ç§æ–°çš„è¯´æ˜ç¬¦<code>w</code>,å¯ä»¥è¢«æ·»åŠ åœ¨ä»»æ„<code>&quot;w&quot;</code>åé¢</p><ul><li><code>&quot;wx&quot;</code> <code>&quot;wbx&quot;</code> <code>&quot;w+x&quot;</code>  <code>&quot;w+bx&quot;</code>&#x2F;<code>&quot;wb+x&quot;</code></li></ul><p>å½“æ–‡ä»¶<strong>å­˜åœ¨</strong>æ—¶,<code>w</code>ä¼š<strong>å¼ºåˆ¶</strong><code>fopen</code>å‡½æ•°å¤±è´¥,è¿”å›ä¸€ä¸ª<code>NULL</code>ç©ºæŒ‡é’ˆ</p><h2 id="freopen-é‡å®šå‘æ–‡ä»¶æµ"><a href="#freopen-é‡å®šå‘æ–‡ä»¶æµ" class="headerlink" title="freopen é‡å®šå‘æ–‡ä»¶æµ"></a>freopen é‡å®šå‘æ–‡ä»¶æµ</h2><p><code>FILE* freopen ( const char *filename, const char *mode, FILE * pFile );</code></p><ul><li>å¦‚æœä¼ å…¥äº†æ–°çš„æ–‡ä»¶å(ä¸<code>pFile</code>æ§åˆ¶çš„æ–‡ä»¶ç›¸æ¯”),è¯¥å‡½æ•°ä¼š<strong>å…³é—­</strong><code>pFile</code>åŸæœ¬æŒ‡å‘çš„æ–‡ä»¶æµï¼Œå¹¶å–æ¶ˆå…³è”ã€‚ç„¶å<strong>ä¸è®º</strong>æ˜¯å¦æˆåŠŸå…³é—­ï¼Œ<code>freopen</code>ä¼šç”¨å’Œ<code>fopen</code>åŒæ ·çš„æ–¹å¼æ‰“å¼€è¯¥æ–‡ä»¶</li><li>å¦‚æœæ–‡ä»¶åè¿˜æ˜¯åŸæ–‡ä»¶ï¼Œåˆ™åªä¼šæ”¹å˜æ‰“å¼€æ¨¡å¼</li></ul><p><strong>è¿”å›å€¼</strong>:</p><ul><li>æˆåŠŸæ—¶ï¼Œè¿”å›<code>pFile</code>å†…å‚¨å­˜çš„åœ°å€</li><li>å¤±è´¥æ—¶ï¼Œè¿”å›<code>NULL</code></li></ul><h3 id="ç‰¹åˆ«çš„"><a href="#ç‰¹åˆ«çš„" class="headerlink" title="ç‰¹åˆ«çš„"></a>ç‰¹åˆ«çš„</h3><p><code>freopen</code>ç”¨äºè¿›ç¨‹çš„è¾“å…¥è¾“å‡ºé‡å®šå‘ä¼šç‰¹åˆ«æœ‰ç”¨</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">freopen (<span class="string">&quot;outfile.txt&quot;</span>,<span class="string">&quot;w&quot;</span>,<span class="built_in">stdout</span>);<span class="comment">//æ ‡å‡†è¾“å‡ºé‡å®šå‘åˆ°æ–‡ä»¶</span></span><br><span class="line"></span><br><span class="line">freopen (<span class="string">&quot;readfile.txt&quot;</span>,<span class="string">&quot;w&quot;</span>,<span class="built_in">stdin</span>);<span class="comment">//æ ‡å‡†è¾“å…¥é‡å®šå‘åˆ°æ–‡ä»¶</span></span><br><span class="line"></span><br><span class="line">freopen (<span class="string">&quot;errdfile.txt&quot;</span>,<span class="string">&quot;w&quot;</span>,<span class="built_in">stderr</span>);<span class="comment">//æ ‡å‡†é”™è¯¯è¾“å‡ºé‡å®šå‘åˆ°æ–‡ä»¶</span></span><br></pre></td></tr></table></figure><h2 id="é‡å®šä½-æ–‡ä»¶æµä½ç½®æŒ‡ç¤ºå™¨-stream-position-indicator"><a href="#é‡å®šä½-æ–‡ä»¶æµä½ç½®æŒ‡ç¤ºå™¨-stream-position-indicator" class="headerlink" title="é‡å®šä½ æ–‡ä»¶æµä½ç½®æŒ‡ç¤ºå™¨(stream position indicator)"></a>é‡å®šä½ æ–‡ä»¶æµä½ç½®æŒ‡ç¤ºå™¨(stream position indicator)</h2><h3 id="æ–‡ä»¶çš„æŠ½è±¡å†…å­˜ç»“æ„"><a href="#æ–‡ä»¶çš„æŠ½è±¡å†…å­˜ç»“æ„" class="headerlink" title="æ–‡ä»¶çš„æŠ½è±¡å†…å­˜ç»“æ„"></a>æ–‡ä»¶çš„æŠ½è±¡å†…å­˜ç»“æ„</h3><p>é¦–å…ˆæˆ‘ä»¬è¦æ˜ç¡®ä¸€ä¸‹æ–‡ä»¶çš„å†…å­˜ç»“æ„ï¼Œå¦‚ä¸‹å›¾</p><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/PixPin_2024-07-20_21-23-32.png"></p><p>è¿™é‡ŒåŠä¸‹æ–‡ç”¨å›¾ä¸­çš„<code>ptr</code>ä»£æŒ‡æ ‡é¢˜çš„ä¸­çš„ <code>æ–‡ä»¶æµä½ç½®æŒ‡ç¤ºå™¨</code>,è¿™ä¸ª<code>ptr</code>å†³å®šäº†æ¯ä¸€æ¬¡å¯¹æ–‡ä»¶çš„<code>è¯»/å†™</code>æ“ä½œçš„<strong>èµ·ç‚¹</strong>,åŒæ—¶æ¯ä¸€æ¬¡<code>è¯»/å†™</code>æ“ä½œéƒ½ä¼šä½¿<code>ptr</code>è‡ªåŠ¨å¾€åèµ°ï¼Œå› æ­¤è¦æ˜¾ç¤ºæ§åˆ¶<code>ptr</code>ï¼Œå°±å¾—ä½¿ç”¨<code>fseek,fsetpos</code>ç­‰æ¥å£</p><h2 id="fseek-é‡å®šä½"><a href="#fseek-é‡å®šä½" class="headerlink" title="fseek é‡å®šä½"></a>fseek é‡å®šä½</h2><p><code>int fseek ( FILE *pFile, long int offset, int origin );</code></p><p><code>fseek</code>èƒ½è¿‡ç›´æ¥é‡å®šä½<code>ptr</code>æ‰€æŒ‡çš„</p><h3 id="å‚æ•°"><a href="#å‚æ•°" class="headerlink" title="å‚æ•°"></a>å‚æ•°</h3><ul><li><code>pFile</code>ï¼šç”¨äºæ§åˆ¶æ–‡ä»¶çš„<code>FILE*</code>ç±»å‹æŒ‡é’ˆ</li><li><code>offset</code>ï¼šåˆ™æ˜¯<strong>åç§»é‡</strong>ï¼Œé•¿æ•´å‹ï¼Œè¡¨ç¤ºåç§»å¤šå°‘å­—èŠ‚</li><li><code>origin</code>ï¼šè¯¥å½¢å‚æ ‡æ³¨äº†<strong>åç§»é‡</strong>ç›¸å¯¹äºå“ªä¸ªä½ç½®è®¡ç®—<strong>å®é™…ä½ç½®</strong></li></ul><p><code>origin</code>æœ‰ä¸‰ä¸ªå®å¯ä»¥é€‰<br>| å® | å®é™…ä½ç½® |<br>| <code>SEEK_SET</code> | åç§»é‡ä»<code>æ–‡ä»¶å¤´</code>å¼€å§‹ç®— |<br>| <code>SEEK_CUR</code> | åç§»é‡ä»<code>å½“å‰æ–‡ä»¶æŒ‡é’ˆptr(ä¸Šæ–‡ä»‹ç»çš„)æ‰€åœ¨ä½ç½®</code>å¼€å§‹ç®— |<br>| <code>SEEK_END</code> | åç§»é‡ä»<code>æ–‡ä»¶å°¾</code>å¼€å§‹ç®— |</p><h3 id="è¿”å›å€¼"><a href="#è¿”å›å€¼" class="headerlink" title="è¿”å›å€¼"></a>è¿”å›å€¼</h3><ul><li>æˆåŠŸæ—¶,è¿”å›<code>0</code></li><li>å¤±è´¥æ—¶ï¼Œè¿”å›<code>éé›¶å€¼</code>ï¼ŒåŒæ—¶ï¼Œ<strong>è¿™æ¡è¯­å¥å¤±æ•ˆ</strong>,ä¸Šæ–‡è¯´çš„<code>ptr</code>æ²¡æœ‰æ”¹å˜</li></ul><h2 id="fgetpos-å’Œ-fsetpos-è®¾ç½®-ptr"><a href="#fgetpos-å’Œ-fsetpos-è®¾ç½®-ptr" class="headerlink" title="fgetpos å’Œ fsetpos è®¾ç½® ptr"></a>fgetpos å’Œ fsetpos è®¾ç½® ptr</h2><p>å¯ä»¥ç”¨<code>fgetpos</code>è·å–<code>ptr</code>çš„å½“å‰ä½ç½®ï¼Œå¹¶ä½¿ç”¨<code>è¾“å‡ºå‹å‚æ•°</code>è¾“å‡ºä¸€ä¸ª<code>fpos_t</code>ç±»å‹çš„å˜é‡ï¼Œè€Œ<code>fsetpos</code>å¯ä»¥ç”¨<code>fpos_t</code>ç±»å‹çš„å½¢å‚è®¾ç½®<code>ptr</code>çš„å½“å‰ä½ç½®</p><p>å°±å¥½æ¯”<code>ptr</code>æ˜¯å½“å‰åæ ‡ï¼Œæ¯æ¬¡<code>fgetpos</code>å¾—åˆ°ä¸€ä¸ªä¼ é€ç‚¹ä¿¡æ¯ï¼Œè€Œ<code>fsetpos</code>å°±å¯ä»¥ç”¨è¿™ä¸ªä¼ é€ç‚¹ä¿¡æ¯ä¼ é€<code>ptr</code>è¿‡å»</p><p><em>ç¤ºä¾‹å¦‚ä¸‹</em></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//å‡†å¤‡ä¸€ä¸ªæ–‡ä»¶</span></span><br><span class="line">FILE* pfile = fopen(<span class="string">&quot;file.txt&quot;</span>, <span class="string">&quot;w&quot;</span>);<span class="comment">//&quot;w&quot;æ¨¡å¼æ‰“å¼€æ–‡ä»¶file.txt</span></span><br><span class="line"><span class="type">int</span> code = <span class="number">1</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">char</span>* msg = <span class="string">&quot;this is a msg&quot;</span>;</span><br><span class="line"><span class="built_in">fprintf</span>(pfile, <span class="string">&quot;get msg : %s code:%d&quot;</span>, msg, code);</span><br><span class="line">fclose(pfile);</span><br><span class="line"><span class="comment">//===========</span></span><br><span class="line"></span><br><span class="line"><span class="type">fpos_t</span> pos1,pos2;</span><br><span class="line">pfile = fopen(<span class="string">&quot;file.txt&quot;</span>, <span class="string">&quot;r&quot;</span>);</span><br><span class="line"></span><br><span class="line">fgetpos(pfile, &amp;pos1);</span><br><span class="line">fgetc(pfile);</span><br><span class="line">fgetpos(pfile, &amp;pos2);</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; ++i)</span><br><span class="line">&#123;</span><br><span class="line">fsetpos(pfile, &amp;pos2);<span class="comment">//å¾ªç¯ä»¤ptræŒ‡å‘ç¬¬äºŒä¸ªå­—ç¬¦</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;ç¬¬2ä¸ªå­—ç¬¦ä¸º: %c\n&quot;</span>, fgetc(pfile));</span><br><span class="line">&#125;                                                     </span><br><span class="line">fsetpos(pfile, &amp;pos1);<span class="comment">//ä»¤ptræŒ‡å‘ç¬¬ä¸€ä¸ªå­—ç¬¦</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;ç¬¬1ä¸ªå­—ç¬¦ä¸º: %c\n&quot;</span>, fgetc(pfile));</span><br><span class="line"></span><br><span class="line">fclose(pfile);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ç¬¬2ä¸ªå­—ç¬¦ä¸º: e</span><br><span class="line">ç¬¬2ä¸ªå­—ç¬¦ä¸º: e</span><br><span class="line">ç¬¬2ä¸ªå­—ç¬¦ä¸º: e</span><br><span class="line">ç¬¬1ä¸ªå­—ç¬¦ä¸º: g</span><br></pre></td></tr></table></figure><h2 id="fclose-å…³é—­æ–‡ä»¶æµ"><a href="#fclose-å…³é—­æ–‡ä»¶æµ" class="headerlink" title="fclose å…³é—­æ–‡ä»¶æµ"></a>fclose å…³é—­æ–‡ä»¶æµ</h2><p>å¯ä»¥ç”¨<code>fclose</code>æ˜¾å¼åœ°å…³é—­æ–‡ä»¶æµ</p><p>ç”¨æ³•ä¸º<code>fclose(pFile);</code></p><p>è¿›ç¨‹æ­£å¸¸é€€å‡ºæ—¶ï¼Œä¹Ÿä¼šè‡ªåŠ¨å…³é—­æ–‡ä»¶æµ</p><h2 id="fprintf-æ ¼å¼åŒ–è¾“å‡ºå­—ç¬¦ä¸²"><a href="#fprintf-æ ¼å¼åŒ–è¾“å‡ºå­—ç¬¦ä¸²" class="headerlink" title="fprintf æ ¼å¼åŒ–è¾“å‡ºå­—ç¬¦ä¸²"></a>fprintf æ ¼å¼åŒ–è¾“å‡ºå­—ç¬¦ä¸²</h2><p><code>fprintf</code>èƒ½æ ¼å¼åŒ–è¾“å‡ºå­—ç¬¦ä¸²åˆ°æŒ‡å®šæ–‡ä»¶æµï¼Œé™¤äº†è¦<strong>æŒ‡å®š</strong>æ–‡ä»¶æµï¼Œæ ¼å¼åŒ–å­—ç¬¦ä¸²çš„æ–¹å¼å’Œ<code>printf</code>ä¸€æ ·</p><ul><li>ä¸”<code>fprintf(stdout,format,...)</code>å’Œ<code>printf(format,...)</code>æ•ˆæœä¸€æ ·</li></ul><h2 id="fputs-è¾“å‡ºå­—ç¬¦ä¸²"><a href="#fputs-è¾“å‡ºå­—ç¬¦ä¸²" class="headerlink" title="fputs è¾“å‡ºå­—ç¬¦ä¸²"></a>fputs è¾“å‡ºå­—ç¬¦ä¸²</h2><p><code>int fputs ( const char * str, FILE * stream );</code></p><p><code>fputs</code>èƒ½å°†<code>Cè¯­è¨€</code>çš„å­—ç¬¦ä¸²è¾“å…¥åˆ°æŒ‡å®šæ–‡ä»¶æµä¸­</p><h2 id="fwrite-è¾“å‡ºå†…å­˜æ•°æ®å—"><a href="#fwrite-è¾“å‡ºå†…å­˜æ•°æ®å—" class="headerlink" title="fwrite è¾“å‡ºå†…å­˜æ•°æ®å—"></a>fwrite è¾“å‡ºå†…å­˜æ•°æ®å—</h2><p><code>size_t fread(void *ptr, size_t size, size_t nmemb, FILE *stream);</code></p><ul><li><code>ptr</code>æ˜¯æŒ‡å‘<code>å†…å­˜æ•°æ®å—</code>çš„æŒ‡é’ˆ</li><li><code>size</code>æ˜¯æ¯ä¸ª<code>æ•°ç»„å…ƒç´ </code>çš„å¤§å°</li><li><code>nmemb</code>æ˜¯å…ƒç´ æ•°é‡</li><li><code>stream</code>æ˜¯æ–‡ä»¶æµ</li></ul><p>fwriteå¯ä»¥å‘æŒ‡å®šæ–‡ä»¶æµè¾“å…¥ç‰¹å®šå¤§å°çš„å†…å­˜æ•°æ®å—</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">FILE* pfile = fopen(<span class="string">&quot;file.txt&quot;</span>, <span class="string">&quot;w&quot;</span>);<span class="comment">//&quot;w&quot;æ¨¡å¼æ‰“å¼€æ–‡ä»¶file.txt</span></span><br><span class="line"><span class="type">char</span> msg[] = <span class="string">&quot;this is a msg&quot;</span>;</span><br><span class="line">fwrite(msg, <span class="keyword">sizeof</span>(<span class="type">char</span>), <span class="built_in">strlen</span>(msg), pfile);</span><br><span class="line"></span><br><span class="line">fclose(pfile);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="fscanf-æ ¼å¼åŒ–è¾“å…¥"><a href="#fscanf-æ ¼å¼åŒ–è¾“å…¥" class="headerlink" title="fscanf æ ¼å¼åŒ–è¾“å…¥"></a>fscanf æ ¼å¼åŒ–è¾“å…¥</h2><p><code>fscanf</code>èƒ½åƒ<code>scanf</code>è¯»å–æ ‡å‡†è¾“å…¥æµä¸€æ ·,è¯»å–æŒ‡å®šæ–‡ä»¶æµ</p><ul><li>ä¸”<code>scanf(stdin,format,...)</code>å’Œ<code>printf(format,...)</code>æ•ˆæœä¸€æ ·</li></ul><h2 id="fegts-è·å–ä¸€è¡Œ"><a href="#fegts-è·å–ä¸€è¡Œ" class="headerlink" title="fegts è·å–ä¸€è¡Œ"></a>fegts è·å–ä¸€è¡Œ</h2><p><code>char * fgets (char *str, int num, FILE *stream );</code></p><h3 id="è¡Œä¸º"><a href="#è¡Œä¸º" class="headerlink" title="è¡Œä¸º"></a>è¡Œä¸º</h3><p><code>fegts</code>ä¼šä¸€ç›´è¯»å–ç›´åˆ°<code>æ¢è¡Œç¬¦</code>æˆ–<code>EOFæ–‡ä»¶ç»“å°¾</code>ç»“æŸè¯»å–ï¼Œä½†<code>æ¢è¡Œç¬¦</code>ä½œä¸º<strong>éæ³•</strong>å­—ç¬¦ä¸ä¼šè¢«æ‹·è´åˆ°å½¢å‚<code>str</code>ä¸­</p><ul><li>å­—ç¬¦ä¸²ç»“å°¾çš„<code>\0</code>ä¼šè¢«è‡ªåŠ¨æ·»åŠ ,ä¸”<strong>è®¡ç®—</strong>åœ¨è¯»å…¥çš„<strong>æœ€å¤§å­—ç¬¦æ•°</strong></li><li><code>fgets</code>å’Œ<code>gets</code>æœ‰å¾ˆå¤§å·®åˆ«ï¼Œå®ƒéœ€è¦<strong>æŒ‡å®š</strong>æœ€å¤§çš„è¯»å…¥å­—ç¬¦æ•°</li></ul><h3 id="å½¢å‚"><a href="#å½¢å‚" class="headerlink" title="å½¢å‚"></a>å½¢å‚</h3><ul><li><code>str</code>ä¸ºä¼ å…¥çš„å­—ç¬¦æ•°ç»„ä½œä¸ºç¼“å†²åŒº</li><li><code>num</code>ä¸ºæ‹·è´çš„æœ€å¤§å­—ç¬¦æ•°ï¼Œ<strong>åŒ…æ‹¬</strong>è‡ªåŠ¨æ·»åŠ çš„ç»“å°¾<code>\0</code></li><li><code>stream</code>ä¸ºæŒ‡å®šçš„æ–‡ä»¶æµ</li></ul><h3 id="è¿”å›å€¼-1"><a href="#è¿”å›å€¼-1" class="headerlink" title="è¿”å›å€¼"></a>è¿”å›å€¼</h3><ul><li>æˆåŠŸæ—¶ï¼Œè¿”å›<code>str</code>çš„å€¼</li><li>å¤±è´¥æ—¶ï¼Œè¿”å›<code>NULL</code></li></ul><h3 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//å‡†å¤‡ä¸€ä¸ªæ–‡ä»¶</span></span><br><span class="line">FILE* pfile = fopen(<span class="string">&quot;file.txt&quot;</span>, <span class="string">&quot;w&quot;</span>);<span class="comment">//&quot;w&quot;æ¨¡å¼æ‰“å¼€æ–‡ä»¶file.txt</span></span><br><span class="line"><span class="type">int</span> code = <span class="number">1</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">char</span>* msg = <span class="string">&quot;this is a msg&quot;</span>;</span><br><span class="line"><span class="built_in">fprintf</span>(pfile, <span class="string">&quot;get msg : %s code:%d&quot;</span>, msg, code);</span><br><span class="line">fclose(pfile);</span><br><span class="line"><span class="comment">//=====</span></span><br><span class="line"></span><br><span class="line">pfile = fopen(<span class="string">&quot;file.txt&quot;</span>, <span class="string">&quot;r&quot;</span>);</span><br><span class="line"><span class="type">char</span> str[<span class="number">5</span>] = &#123; <span class="number">0</span> &#125;;</span><br><span class="line">fgets(str, <span class="keyword">sizeof</span>(str), pfile);<span class="comment">//é™¤å»è‡ªåŠ¨æ·»åŠ çš„\0,æœ€å¤šä»æ–‡ä»¶é‡Œè¯»å…¥4ä¸ªå­—ç¬¦</span></span><br><span class="line"><span class="built_in">printf</span>(str);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;|&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">get |</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>=C++= sizeofå…³é”®å­—è¯¦è§£</title>
      <link href="/2024/07/10/cppsizeof/"/>
      <url>/2024/07/10/cppsizeof/</url>
      
        <content type="html"><![CDATA[<h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p><code>sizeof</code>ä½œä¸ºC&#x2F;C++å…³é”®å­—,åŸºæœ¬ç”¨æ³•æ˜¯æ±‚<code>å­—èŠ‚å¤§å°</code>ï¼Œä½†ä»…ä»…è¿™ä¸€é¡¹ç”¨æ³•åœ¨ç»†èŠ‚ä¸Šå°±æœ‰å¾ˆå¤šè¯´æ³•äº†</p><h2 id="æ±‚å†…ç½®ç±»å‹å˜é‡çš„å¤§å°"><a href="#æ±‚å†…ç½®ç±»å‹å˜é‡çš„å¤§å°" class="headerlink" title="æ±‚å†…ç½®ç±»å‹å˜é‡çš„å¤§å°"></a>æ±‚å†…ç½®ç±»å‹å˜é‡çš„å¤§å°</h2><p>æœ‰ä¸¤ç§å†™æ³•ï¼Œä»¥<code>int a = 0</code>çš„å˜é‡<code>a</code>ä¸ºä¾‹</p><ul><li><code>sizeof a</code></li><li><code>sizeof(a)</code></li></ul><p>éƒ½å¯ä»¥æ±‚å˜é‡<code>a</code>çš„å¤§å°ï¼Œä½†<strong>æ³¨æ„</strong>ï¼Œè¯¥å˜é‡çš„å¤§å°ä»…ä¸<code>å˜é‡ç±»å‹</code>æœ‰å…³ï¼Œè€Œä¸å€¼æ— å…³</p><h2 id="æ±‚å†…ç½®ç±»å‹çš„å¤§å°"><a href="#æ±‚å†…ç½®ç±»å‹çš„å¤§å°" class="headerlink" title="æ±‚å†…ç½®ç±»å‹çš„å¤§å°"></a>æ±‚å†…ç½®ç±»å‹çš„å¤§å°</h2><p>æ±‚ç±»å‹å¤§å°æ—¶å¿…é¡»<strong>åŠ ä¸Šæ‹¬å·</strong></p><p>ä¾‹å¦‚<code>sizeof(int)</code></p><h2 id="æ±‚æ•°ç»„çš„å¤§å°"><a href="#æ±‚æ•°ç»„çš„å¤§å°" class="headerlink" title="æ±‚æ•°ç»„çš„å¤§å°"></a>æ±‚æ•°ç»„çš„å¤§å°</h2><ul><li>å½“æ•°ç»„å£°æ˜åœ¨<code>å…¨å±€</code>æˆ–<code>sizeof</code>å¤„äºæ•°ç»„å£°æ˜è¯­å¥çš„<code>å±€éƒ¨ä½œç”¨èŒƒå›´</code>æ—¶,èƒ½å¤Ÿç”¨<code>sizeof(&lt;æ•°ç»„å&gt;)</code>æ±‚æ•°ç»„å¤§å°</li><li>å½“æ•°ç»„åç»è¿‡<strong>å‡½æ•°ä¼ å‚</strong>æˆ–<code>åŠ å‡å¸¸é‡è¿ç®—</code>åï¼Œé€€åŒ–ä¸º<code>æŒ‡é’ˆå˜é‡</code>,ç±»å‹å¤§å°åœ¨<code>32ä½æœºå™¨</code>ä¸­ä¸º<code>4</code>,<code>64ä½æœºå™¨</code>ä¸­ä¸º<code>8</code></li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line">using namespace <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> g_arr[<span class="number">10</span>] = &#123; <span class="number">0</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">func</span><span class="params">(<span class="type">int</span> st_arr[])</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="keyword">sizeof</span>(st_arr) &lt;&lt; <span class="built_in">endl</span>;<span class="comment">//æ­¤å¤„é€€åŒ–ä¸ºæŒ‡é’ˆå˜é‡ï¼Œè¾“å‡º4æˆ–8</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="type">int</span> arr[<span class="number">10</span>] = &#123; <span class="number">0</span> &#125;;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="keyword">sizeof</span>(g_arr) &lt;&lt; <span class="built_in">endl</span>;<span class="comment">//è¾“å‡º40</span></span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="keyword">sizeof</span>(arr) &lt;&lt; <span class="built_in">endl</span>; <span class="comment">//è¾“å‡º40</span></span><br><span class="line">func(arr);<span class="comment">//è¾“å‡º4/8</span></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ±‚ç±»-å¯¹è±¡çš„å¤§å°"><a href="#æ±‚ç±»-å¯¹è±¡çš„å¤§å°" class="headerlink" title="æ±‚ç±»&#x2F;å¯¹è±¡çš„å¤§å°"></a>æ±‚ç±»&#x2F;å¯¹è±¡çš„å¤§å°</h2><h3 id="ä¸€èˆ¬æƒ…å†µçš„å†…å­˜å¯¹é½"><a href="#ä¸€èˆ¬æƒ…å†µçš„å†…å­˜å¯¹é½" class="headerlink" title="ä¸€èˆ¬æƒ…å†µçš„å†…å­˜å¯¹é½"></a>ä¸€èˆ¬æƒ…å†µçš„å†…å­˜å¯¹é½</h3><p>ä¸ºäº†è®¿é—®æ•ˆç‡é—®é¢˜ï¼Œç±»çš„å¤§å°éµå¾ª<code>å†…å­˜å¯¹é½</code>è§„åˆ™ï¼Œè®¡ç®—ç†è®ºå¤§å°æ—¶éœ€è€ƒè™‘<code>æˆå‘˜å˜é‡çš„å¤§å°</code>å’Œ<code>å†…å­˜å¯¹é½</code>,è€Œä¸è€ƒè™‘æ™®é€šæˆå‘˜å‡½æ•°,è¿™é‡Œä¸è¯¦ç»†è®¨è®º</p><h2 id="å«æœ‰è™šå‡½æ•°"><a href="#å«æœ‰è™šå‡½æ•°" class="headerlink" title="å«æœ‰è™šå‡½æ•°"></a>å«æœ‰è™šå‡½æ•°</h2><p>C++çš„ç¼–è¯‘å™¨ä¸€æ—¦å‘ç°ä¸€ä¸ªç±»å‹ä¸­<strong>æœ‰è™šå‡½æ•°</strong>ï¼Œå°±ä¼šä¸ºè¯¥ç±»å‹ç”Ÿæˆ<code>è™šå‡½æ•°è¡¨</code>ï¼Œæ¯ä¸€ä¸ªå®ä¾‹åŒ–å‡ºçš„<code>å¯¹è±¡</code>éƒ½å«æœ‰ä¸€ä¸ª<code>æŒ‡å‘è™šå‡½æ•°è¡¨çš„æŒ‡é’ˆ</code>ã€‚æ‰€ä»¥<code>sizeof</code>æ±‚å‡ºæ¥çš„å€¼è¿˜è¦è€ƒè™‘<code>è¯¥æŒ‡é’ˆ</code>ä»¥åŠ<code>å†…å­˜å¯¹é½</code>ç­‰å› ç´ </p><h3 id="æ²¡æœ‰æˆå‘˜å˜é‡çš„ç‰¹æ®Šæƒ…å†µ"><a href="#æ²¡æœ‰æˆå‘˜å˜é‡çš„ç‰¹æ®Šæƒ…å†µ" class="headerlink" title="æ²¡æœ‰æˆå‘˜å˜é‡çš„ç‰¹æ®Šæƒ…å†µ"></a>æ²¡æœ‰æˆå‘˜å˜é‡çš„ç‰¹æ®Šæƒ…å†µ</h3><h4 id="æ²¡æœ‰æˆå‘˜å‡½æ•°"><a href="#æ²¡æœ‰æˆå‘˜å‡½æ•°" class="headerlink" title="æ²¡æœ‰æˆå‘˜å‡½æ•°"></a>æ²¡æœ‰æˆå‘˜å‡½æ•°</h4><p>è¿™æ ·çš„ç±»å‹å¯ä»¥ç§°ä¸º<code>ç©ºç±»å‹</code>,å› ä¸ºè¿™æ ·çš„ç±»å‹å®ä¾‹åŒ–åä¸å«ä»»ä½•ä¿¡æ¯,æœ¬æ¥æ±‚<code>sizeof</code>åº”è¯¥æ˜¯<code>O</code>ï¼Œä½†è€ƒè™‘å®é™…ä½¿ç”¨æ—¶ï¼Œæˆ‘ä»¬éœ€å°†ç±»<strong>å®ä¾‹åŒ–</strong>ä¸ºå¯¹è±¡ï¼Œå®ƒå¿…é¡»åœ¨å†…å­˜ä¸­å æœ‰ä¸€å®šçš„ç©ºé—´ï¼Œå¦åˆ™æ— æ³•ä½¿ç”¨æˆ–ç®¡ç†è¿™äº›å®ä¾‹ã€‚è‡³äºåˆ†é…å†…å­˜ï¼Œç”±ç¼–è¯‘å™¨å†³å®šã€‚ä½†å‡ºäºèŠ‚çœä¸å¿…è¦çš„å†…å­˜å ç”¨åŸåˆ™ï¼Œç†åº”åˆ†é…æœ€å°å†…å­˜å•å…ƒï¼Œå³<code>1å­—èŠ‚</code>ã€‚æ­£å¥½åœ¨<code>VisualStudio</code>ä¸­ï¼Œæ¯ä¸ªç©ºç±»å‹çš„å®ä¾‹å ç”¨<code>1å­—èŠ‚</code>çš„ç©ºé—´ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//ç©ºç±»å‹</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">sizeof</span>(A);<span class="comment">//visual studio ä¸­å€¼ä¸º1</span></span><br></pre></td></tr></table></figure><h4 id="åªæœ‰æ™®é€šçš„æˆå‘˜å‡½æ•°"><a href="#åªæœ‰æ™®é€šçš„æˆå‘˜å‡½æ•°" class="headerlink" title="åªæœ‰æ™®é€šçš„æˆå‘˜å‡½æ•°"></a>åªæœ‰æ™®é€šçš„æˆå‘˜å‡½æ•°</h4><p>å’Œä¸Šä¸€æ¡ä¸€æ ·ä¹Ÿæ˜¯<code>1å­—èŠ‚</code>ã€‚å› ä¸ºè€ƒè™‘å®ä¾‹åŒ–æ—¶ï¼Œè°ƒç”¨è¿™äº›æ™®é€šæˆå‘˜å‡½æ•°åªéœ€çŸ¥é“<code>å‡½æ•°åœ°å€</code>å³å¯ï¼Œè€Œè¿™äº›å‡½æ•°åœ°å€åªä¸ç”¨æˆ·è‡ªå®šä¹‰çš„<code>ç±»</code>æœ‰å…³ï¼Œè€Œä¸å®ä¾‹åŒ–å‡ºæ¥çš„<code>å¯¹è±¡</code>æ— å…³ï¼Œæ‰€ä»¥ä¸ä¼šåœ¨<code>å¯¹è±¡</code>ä¸­å­˜å‚¨ç›¸å…³ä¿¡æ¯ï¼Œä¸ä¼šæ”¹å˜å…¶å¤§å°ã€‚</p><h4 id="å«æœ‰è™šå‡½æ•°-1"><a href="#å«æœ‰è™šå‡½æ•°-1" class="headerlink" title="å«æœ‰è™šå‡½æ•°"></a>å«æœ‰è™šå‡½æ•°</h4><p>å®ä¾‹åŒ–å‡ºçš„<code>å¯¹è±¡</code>å«æœ‰äº†æŒ‡å‘è™šå‡½æ•°çš„<code>æŒ‡é’ˆ</code>,æ‰€ä»¥<code>sizeof</code>æ±‚å‡ºæ¥çš„å¤§å°ä¸ºä¸€ä¸ª<code>æŒ‡é’ˆ</code>çš„å¤§å°ï¼Œ<code>32ä½æœºå™¨</code>æ±‚å¾—<code>4</code>å­—èŠ‚,<code>64ä½æœºå™¨</code>æ±‚å¾—<code>8</code>å­—èŠ‚</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>åŸºç¡€IO</title>
      <link href="/2024/07/10/basicIO/"/>
      <url>/2024/07/10/basicIO/</url>
      
        <content type="html"><![CDATA[<h1 id="å…±è¯†åŸç†"><a href="#å…±è¯†åŸç†" class="headerlink" title="å…±è¯†åŸç†"></a>å…±è¯†åŸç†</h1><ul><li>æ–‡ä»¶ &#x3D; å†…å®¹ + å±æ€§</li><li>è¢«æ‰“å¼€çš„æ–‡ä»¶éœ€è¦åŠ è½½åˆ°å†…å­˜ä¸­</li><li><strong>å†…å­˜ä¸­</strong>çš„æ–‡ä»¶éœ€è¦è¢«æ“ä½œç³»ç»Ÿ<strong>ç®¡ç†</strong></li></ul><h1 id="ç”¨æˆ·çº§æ–‡ä»¶æ¥å£"><a href="#ç”¨æˆ·çº§æ–‡ä»¶æ¥å£" class="headerlink" title="ç”¨æˆ·çº§æ–‡ä»¶æ¥å£"></a>ç”¨æˆ·çº§æ–‡ä»¶æ¥å£</h1><p><a href="https://www.supdriver.top/2024/05/14/cpp-file-op/">è¯¦è§C++æ–‡ä»¶æ“ä½œ</a></p><p><a href="https://www.supdriver.top/2024/07/15/cfileop/">è¯¦è§Cè¯­è¨€æ–‡ä»¶æ“ä½œ</a></p><h1 id="Linuxç³»ç»Ÿè°ƒç”¨æ¥å£"><a href="#Linuxç³»ç»Ÿè°ƒç”¨æ¥å£" class="headerlink" title="Linuxç³»ç»Ÿè°ƒç”¨æ¥å£"></a>Linuxç³»ç»Ÿè°ƒç”¨æ¥å£</h1><h2 id="fd-æ–‡ä»¶æè¿°ç¬¦-ä¸è®¿é—®æ–‡ä»¶çš„æœ¬è´¨"><a href="#fd-æ–‡ä»¶æè¿°ç¬¦-ä¸è®¿é—®æ–‡ä»¶çš„æœ¬è´¨" class="headerlink" title="fd æ–‡ä»¶æè¿°ç¬¦ ä¸è®¿é—®æ–‡ä»¶çš„æœ¬è´¨"></a>fd æ–‡ä»¶æè¿°ç¬¦ ä¸è®¿é—®æ–‡ä»¶çš„æœ¬è´¨</h2><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/PixPin_2024-07-24_17-10-26.png"></p><p><code>fd</code>(<em>file descriptor</em>),å³æ–‡ä»¶æè¿°ç¬¦,ä¸‹æ–‡çš„ç³»ç»Ÿè°ƒç”¨æ¥å£ç»å¸¸ä»¥<code>fd</code>å‘½åå˜é‡ï¼Œ<code>fd</code>æ˜¯æ•´å½¢å˜é‡ï¼Œä½œä¸ºæ•°ç»„ä¸‹æ ‡ï¼Œç”¨äºç®¡ç†<strong>æ‰“å¼€çš„æ–‡ä»¶</strong></p><p>å¯ä»¥çœ‹åˆ°,ä¸€ä¸ªè¿›ç¨‹é€šè¿‡<code>struct files _struct</code>é‡Œçš„æŒ‡é’ˆæ•°ç»„ï¼Œç®¡ç†å¤šä¸ªåŒæ—¶æ‰“å¼€çš„æ–‡ä»¶</p><p>ä¸”æ¯ä¸ªè¿›ç¨‹å¯åŠ¨æ—¶ï¼Œä¼šé»˜è®¤æ‰“å¼€ä¸‰ä¸ªæ–‡ä»¶,ä¸”é»˜è®¤<code>fd</code>å›ºå®š</p><ol><li>stdout</li></ol><h2 id="read"><a href="#read" class="headerlink" title="read"></a>read</h2><p><strong>æ‰€éœ€å¤´æ–‡ä»¶</strong><br><code>#include &lt;unistd.h&gt;</code><br><strong>å£°æ˜</strong><br><code>ssize_t read(int fd, void *buf, size_t count);</code></p><p><strong>å‚æ•°</strong></p><ul><li><code>fd</code>å³ä¸ºç›®æ ‡æ–‡ä»¶çš„æ–‡ä»¶æè¿°ç¬¦</li><li><code>buf</code>ä¸ºè¦ä»æ–‡ä»¶è¯»å–å­—èŠ‚åˆ°çš„å†…å­˜åœ°å€</li><li><code>count</code>ä¸ºæœ€å¤§è¯»å–å­—èŠ‚æ•°</li></ul><p><strong>è¿”å›å€¼</strong></p><ul><li>è‹¥æˆåŠŸï¼Œè¿”å›è¯»å–æ–‡ä»¶çš„å­—èŠ‚æ•°,ç±»å‹ä¸º<code>ssize_t</code>,æ˜¯å±‚å±‚å°è£…çš„<code>long int</code></li><li>è‹¥å¤±è´¥ï¼Œè¿”å›<code>-1</code>,å¹¶è®¾ç½®<code>errno</code>çš„å€¼</li></ul><h2 id="write"><a href="#write" class="headerlink" title="write"></a>write</h2><p><strong>æ‰€éœ€å¤´æ–‡ä»¶</strong><br><code>#include &lt;unistd.h&gt;</code><br><strong>å£°æ˜</strong><br><code>ssize_t write(int fd, const void *buf, size_t count);</code></p><p><strong>å‚æ•°</strong></p><ul><li><code>fd</code> ä¸ºç›®æ ‡æ–‡ä»¶çš„æ–‡ä»¶æè¿°ç¬¦</li><li><code>buf</code>ä¸ºè¦å†™å…¥æ–‡ä»¶çš„<code>æºå†…å­˜åœ°å€</code>,è¾“å…¥å­—èŠ‚æ•°é‡å–å†³äº<code>count</code>å½¢å‚</li><li><code>count</code>ä¸ºè¦è¾“å…¥çš„å­—èŠ‚æ•°é‡,è‹¥è¦è¾“å…¥ä¸ºå­—ç¬¦ä¸²ï¼Œä¸”è¦è¾“å…¥å­—ç¬¦ä¸²çš„å…¨éƒ¨å†…å®¹ï¼Œå»ºè®®ä½¿ç”¨<code>strlen(buf)</code>ï¼Œé˜²æ­¢è¾“å…¥<code>\0</code>,å› ä¸ºå¯¹äº<strong>æ–‡ä»¶</strong>æ¥è¯´ï¼Œ<code>\0</code>æ˜¯<strong>éæ³•å­—ç¬¦</strong></li></ul><p><strong>è¿”å›å€¼</strong></p><ul><li>è‹¥æˆåŠŸï¼Œè¿”å›å†™å…¥æ–‡ä»¶çš„å­—èŠ‚æ•°,ç±»å‹ä¸º<code>ssize_t</code>,æ˜¯å±‚å±‚å°è£…çš„<code>long int</code></li><li>è‹¥å¤±è´¥ï¼Œè¿”å›<code>-1</code>,å¹¶è®¾ç½®<code>errno</code>çš„å€¼</li></ul><p><strong>ç‰¹åˆ«çš„</strong><br><code>read</code>å‡½æ•°ä»æ–‡ä»¶ä¸­è¯»å–çš„æ˜¯<code>å­—èŠ‚</code>å†…å®¹ï¼Œä¸æŠŠè¯»å–çš„å†…å®¹çœ‹ä½œå­—ç¬¦ä¸²ï¼Œå› æ­¤ï¼Œ<strong>ä¸ä¼šè‡ªåŠ¨</strong>æ·»åŠ <code>\0</code>åœ¨å†™å…¥<code>buf</code>å†…å®¹çš„ç»“å°¾</p><p><em>ç”¨æ³•è§åæ–‡å¯¹<code>open</code>çš„ä»‹ç»</em></p><h2 id="open"><a href="#open" class="headerlink" title="open"></a>open</h2><p><strong>æ‰€éœ€å¤´æ–‡ä»¶</strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/stat.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;fcntl.h&gt;</span></span></span><br></pre></td></tr></table></figure><p><strong>å£°æ˜</strong><br><code>int open(const char *pathname, int flags);</code><br><code>int open(const char *pathname, int flagsï¼Œmode_t mode);</code></p><p><strong>å‚æ•°</strong>:</p><ul><li><code>pathname</code>ä¸ºæ–‡ä»¶è·¯å¾„ï¼Œè‹¥åªæœ‰æ–‡ä»¶åï¼Œåˆ™é»˜è®¤åœ¨å½“å‰å·¥ä½œè·¯å¾„æœç´¢</li><li><code>flag</code>åˆ™æ˜¯ä¸€ä¸ª<code>ä½å›¾</code>,è€Œ<strong>ä¸åº”</strong>çœ‹ä½œæ•´å‹å‚æ•°ï¼Œä¼ å‚æ—¶å¯ç”¨<code>|</code>ä½è¿ç®—ä¼ é€’å¤šä¸ªå‚æ•°åˆ°ä½å›¾ä¸­,ä¾‹å¦‚<code>O_CREAT | O_WRONLY</code></li><li><code>mode</code>åˆ™æ˜¯åœ¨<strong>åˆ›å»º</strong>æ–‡ä»¶æ—¶,ä¼ å…¥æƒé™ä¿¡æ¯,è¿™é‡Œä½¿ç”¨<code>å…«è¿›åˆ¶è¡¨ç¤ºæ³•</code>ï¼Œä¾‹å¦‚ä¼ å…¥<code>0666</code><br><strong>è¿”å›å€¼</strong>:</li><li>è‹¥æˆåŠŸï¼Œè¿”å›æ‰“å¼€æ–‡ä»¶çš„<code>fd</code>å€¼</li><li>è‹¥å¤±è´¥ï¼Œåˆ™è¿”å›<code>-1</code></li></ul><h3 id="å†™å…¥æ“ä½œ"><a href="#å†™å…¥æ“ä½œ" class="headerlink" title="å†™å…¥æ“ä½œ"></a>å†™å…¥æ“ä½œ</h3><p>ç›¸å…³çš„<code>flags</code></p><ul><li><code>O_WRONLY</code> ä»…å†™å…¥</li><li><code>O_CREAT</code> å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œå°±åˆ›å»ºï¼Œ<strong>æ³¨</strong>æ–°æ–‡ä»¶çš„æƒé™ç”±<code>open</code>å‡½æ•°ä¼ å…¥çš„<code>mode</code>å‚æ•°å†³å®š</li><li><code>O_TRUNC</code> å¦‚æœæ–‡ä»¶å·²å­˜åœ¨ä¸”æ˜¯<code>å¸¸è§„æ–‡ä»¶</code>,å¹¶ä¸”æ‰“å¼€çš„æ¨¡å¼ç»„åˆ<strong>æ”¯æŒå†™å…¥æ“ä½œ</strong>(<code>O_RDWR</code>æˆ–<code>O_WRONLY</code>),è¯¥æ–‡ä»¶å†…å®¹å°†ä¼šè¢«æ¸…é™¤ã€‚ä½†å¦‚æœè¯¥æ–‡ä»¶æ˜¯<code>FIFO</code>(å‘½åç®¡é“)æ–‡ä»¶æˆ–<code>ç»ˆç«¯è®¾å¤‡æ–‡ä»¶</code>ï¼Œåˆ™<code>O_TRUNC</code>å°†ä¼šè¢«<strong>å¿½ç•¥</strong></li><li><code>O_EXCL</code> ä¿è¯æ­¤æ¬¡<code>open</code>æ“ä½œæ‰“å¼€æ–°æ–‡ä»¶ã€‚<strong>å¿…é¡»</strong>å’Œ<code>O_CREAT</code>è”åˆä½¿ç”¨ï¼Œå¦åˆ™æ‰“å¼€<strong>å¤±è´¥</strong>ã€‚è‹¥<code>pathname</code>å­˜åœ¨ï¼Œå³è¯¥è·¯å¾„çš„æ–‡ä»¶å­˜åœ¨æ—¶ï¼Œä¹Ÿä¼šæ‰“å¼€<strong>å¤±è´¥</strong></li></ul><h4 id="æ‰“å¼€å·²æœ‰æ–‡ä»¶å¹¶å†™å…¥"><a href="#æ‰“å¼€å·²æœ‰æ–‡ä»¶å¹¶å†™å…¥" class="headerlink" title="æ‰“å¼€å·²æœ‰æ–‡ä»¶å¹¶å†™å…¥"></a>æ‰“å¼€å·²æœ‰æ–‡ä»¶å¹¶å†™å…¥</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/stat.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;fcntl.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//å‰ææ˜¯log.txtå·²å­˜åœ¨</span></span><br><span class="line">    <span class="type">int</span> fd = open(<span class="string">&quot;log.txt&quot;</span>,O_WRONLY,<span class="number">0666</span>);<span class="comment">//åªå†™æ¨¡å¼æ‰“å¼€æ–‡ä»¶</span></span><br><span class="line">    </span><br><span class="line">    <span class="type">char</span> msg[] = <span class="string">&quot;this is a msg&quot;</span>;<span class="comment">//å‡†å¤‡å­—ç¬¦ä¸²</span></span><br><span class="line">    write(fd,msg,<span class="built_in">strlen</span>(msg));<span class="comment">//å†™å…¥</span></span><br><span class="line">    close(fd);<span class="comment">//å…³é—­æ–‡ä»¶</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“åŸæœ¬<code>log.txt</code>ä¸ºç©ºæ–‡ä»¶æ—¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">this is a msg</span><br></pre></td></tr></table></figure><p>å½“åŸ<code>log.txt</code>ä¸ä¸ºç©ºä¸”å†…å®¹é•¿åº¦å¤§äºç¨‹åºè¾“å…¥çš„<code>msg</code>æ—¶ï¼Œå‘ç”Ÿ<code>éƒ¨åˆ†è¦†å†™</code></p><p>ä¾‹å¦‚åŸå†…å®¹ä¸º<code>0000111100001111</code>æ—¶ï¼Œæ‰§è¡Œåä¸º</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">this is a msg111</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°æœ‰ä¸€éƒ¨åˆ†æ²¡æœ‰è¢«è¦†ç›–</p><h4 id="æ‰“å¼€ç©ºæ–‡ä»¶-æˆ–-åˆ›å»ºç©ºæ–‡ä»¶"><a href="#æ‰“å¼€ç©ºæ–‡ä»¶-æˆ–-åˆ›å»ºç©ºæ–‡ä»¶" class="headerlink" title="æ‰“å¼€ç©ºæ–‡ä»¶ æˆ– åˆ›å»ºç©ºæ–‡ä»¶"></a>æ‰“å¼€ç©ºæ–‡ä»¶ æˆ– åˆ›å»ºç©ºæ–‡ä»¶</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/stat.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;fcntl.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//å”¯ä¸€çš„åŒºåˆ«æ˜¯è¿™é‡Œçš„å‚æ•°</span></span><br><span class="line">    <span class="comment">//O_CREATå¯ä»¥åˆ›å»ºç©ºæ–‡ä»¶</span></span><br><span class="line">    <span class="comment">//O_TRUNCä¿è¯æ‰“å¼€å·²æœ‰æ–‡ä»¶æ—¶ï¼Œæ¸…ç©ºåŸæ–‡å†…å®¹</span></span><br><span class="line">    <span class="type">int</span> fd = open(<span class="string">&quot;log.txt&quot;</span>,O_CREAT|O_WRONLY|O_TRUNC,<span class="number">0666</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="type">char</span> msg[] = <span class="string">&quot;this is a msg&quot;</span>;</span><br><span class="line">    write(fd,msg,<span class="built_in">strlen</span>(msg));</span><br><span class="line">    close(fd);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="è¿½åŠ å†™å…¥"><a href="#è¿½åŠ å†™å…¥" class="headerlink" title="è¿½åŠ å†™å…¥"></a>è¿½åŠ å†™å…¥</h4><p>è¿½åŠ å†™å…¥åªéœ€æŠŠ<code>O_TRUNC</code>æ”¹æˆ<code>O_APPEND</code>å³å¯</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/stat.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;fcntl.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> fd = open(<span class="string">&quot;log.txt&quot;</span>,O_CREAT|O_WRONLY|O_APPEND,<span class="number">0666</span>);<span class="comment">//è¿½åŠ æ¨¡å¼æ‰“å¼€æ–‡åŒ–</span></span><br><span class="line">    </span><br><span class="line">    <span class="type">char</span> msg[] = <span class="string">&quot;this is a msg&quot;</span>;</span><br><span class="line">    write(fd,msg,<span class="built_in">strlen</span>(msg));</span><br><span class="line">    close(fd);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæˆ‘ä»¬äº‹å…ˆåˆ é™¤<code>log.txt</code>æ–‡ä»¶ï¼Œç„¶åè¿è¡Œä¸¤æ¬¡ç¼–è¯‘å‡ºçš„ç¨‹åº,å¯ä»¥è·å¾—å¦‚ä¸‹å†…å®¹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">this is a msgthis is a msg</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°å†…å®¹è¿½åŠ äº†ä¸¤æ¬¡</p><h3 id="è¯»å–æ“ä½œ"><a href="#è¯»å–æ“ä½œ" class="headerlink" title="è¯»å–æ“ä½œ"></a>è¯»å–æ“ä½œ</h3><p>ç›¸å…³çš„<code>flags</code></p><ul><li><code>O_RDONLY</code>åªè¯»æ¨¡å¼æ‰“å¼€æ–‡ä»¶</li><li><code>O_RDWR</code> è¯»å†™æ¨¡å¼æ‰“å¼€æ–‡ä»¶</li></ul><h4 id="åªè¯»æ¨¡å¼è¯»å–å†…å®¹"><a href="#åªè¯»æ¨¡å¼è¯»å–å†…å®¹" class="headerlink" title="åªè¯»æ¨¡å¼è¯»å–å†…å®¹"></a>åªè¯»æ¨¡å¼è¯»å–å†…å®¹</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/stat.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;fcntl.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> fd = open(<span class="string">&quot;log.txt&quot;</span>,O_RDONLY);</span><br><span class="line">    <span class="type">char</span>* buf[<span class="number">1024</span>];</span><br><span class="line">    <span class="type">ssize_t</span> n = read(fd,buf,<span class="keyword">sizeof</span>(buf)<span class="number">-1</span>);<span class="comment">//è¿™é‡Œè¦å‚¨å­˜å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥è¦ç•™ä¸€ä½ç»™\0</span></span><br><span class="line">    <span class="keyword">if</span>(n&lt;<span class="number">0</span>) perror(<span class="string">&quot;read&quot;</span>);<span class="comment">//æ‰“å¼€å¤±è´¥ï¼Œè¾“å‡ºé”™è¯¯ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">else</span> buf[n] = <span class="string">&#x27;\0&#x27;</span>;<span class="comment">//æ·»åŠ ç»“å°¾</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>,buf);<span class="comment">//æ‰“å°è¯»å–åˆ°çš„å†…å®¹</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®ç°å‡†å¤‡å†…å®¹ä¸º<code>123456</code>çš„<code>log.txt</code>æ–‡ä»¶</p><p>ç„¶åè¿è¡Œ<code>./mycmd</code></p><p>å¾—åˆ°è¾“å‡ºå’Œæ–‡ä»¶å†…å®¹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">456</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zzz456</span><br></pre></td></tr></table></figure><p>å…³äº<code>read</code>æ²¡è¯»å–åˆ°å‰é¢æ–°å†™å…¥çš„<code>zzz</code>,æ˜¯å› ä¸º<code>wtrite</code>å’Œ<code>read</code>æ“ä½œéƒ½æ˜¯ä»æ–‡ä»¶çš„<code>åŒä¸€å¤„ç»§ç»­</code>æ“ä½œçš„ï¼Œå¹¶ä¸ä¼šå‘ç”Ÿå›é€€</p><h2 id="close"><a href="#close" class="headerlink" title="close"></a>close</h2><p><code>int close(int fd);</code></p><p>ç”¨äºå†²åˆ·ç¼“å†²åŒºï¼Œå¹¶<strong>å…³é—­</strong>ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦</p><h2 id="dup2-æ–‡ä»¶é‡å®šå‘"><a href="#dup2-æ–‡ä»¶é‡å®šå‘" class="headerlink" title="dup2 æ–‡ä»¶é‡å®šå‘"></a>dup2 æ–‡ä»¶é‡å®šå‘</h2><p><code>int dup2(int oldfd, int newfd);</code></p><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/PixPin_2024-07-24_19-55-30.png"></p><p>å¦‚å›¾æ‰€ç¤ºï¼Œ<code>dup2</code>èƒ½å°†<code>oldfd</code>å¯¹åº”çš„æ•°ç»„å…ƒç´ <code>è¦†ç›–</code>åˆ°<code>newfd</code>å¯¹åº”çš„æ•°ç»„å…ƒç´ å¤„ï¼Œå®Œæˆå¯¹<code>newfd</code>å¯¹åº”æ–‡ä»¶çš„é‡å®šå‘</p><p>å›¾ä¸­å°±æ˜¯å®Œæˆäº†å¯¹<code>æ ‡å‡†è¾“å‡º</code>çš„é‡å®šå‘,åƒ<code>printf</code>ä¹‹ç±»çš„å‡½æ•°ä¼šç›´æ¥è¾“å‡ºå†…å®¹åˆ°æ–‡ä»¶ä¸­,è€Œä¸æ˜¯æ˜¾ç¤ºå™¨</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/stat.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;fcntl.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> fd = open(<span class="string">&quot;log.txt&quot;</span>,O_RDWR|O_CREAT|O_TRUNC,<span class="number">0666</span>);<span class="comment">//æ‰“å¼€ä¸€ä¸ªæ–°çš„ç©ºæ–‡ä»¶</span></span><br><span class="line">    dup2(fd,<span class="number">1</span>);<span class="comment">//æ ‡å‡†è¾“å‡ºé‡å®šå‘</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;output1\n&quot;</span>);<span class="comment">//è¾“å‡º</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;output2\n&quot;</span>);<span class="comment">//è¾“å‡º</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œä»£ç åï¼Œå¯ä»¥çœ‹åˆ°<code>ç»ˆç«¯</code><strong>æ²¡æœ‰è¾“å‡º</strong></p><p>è€Œæ‰“å¼€<code>log.txt</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">output1</span><br><span class="line">output2</span><br></pre></td></tr></table></figure><h1 id="å­è¿›ç¨‹-ä¸-çˆ¶è¿›ç¨‹çš„æ–‡ä»¶å…³ç³»"><a href="#å­è¿›ç¨‹-ä¸-çˆ¶è¿›ç¨‹çš„æ–‡ä»¶å…³ç³»" class="headerlink" title="å­è¿›ç¨‹ ä¸ çˆ¶è¿›ç¨‹çš„æ–‡ä»¶å…³ç³»"></a>å­è¿›ç¨‹ ä¸ çˆ¶è¿›ç¨‹çš„æ–‡ä»¶å…³ç³»</h1><h2 id="å­è¿›ç¨‹å¯¹çˆ¶è¿›ç¨‹çš„æ‹·è´"><a href="#å­è¿›ç¨‹å¯¹çˆ¶è¿›ç¨‹çš„æ‹·è´" class="headerlink" title="å­è¿›ç¨‹å¯¹çˆ¶è¿›ç¨‹çš„æ‹·è´"></a>å­è¿›ç¨‹å¯¹çˆ¶è¿›ç¨‹çš„æ‹·è´</h2><p>å…ˆè¿è¡Œä¸€æ®µä»£ç æµ‹è¯• å­è¿›ç¨‹æ˜¯å¦<strong>ç»§æ‰¿</strong>çˆ¶è¿›ç¨‹çš„æ‰“å¼€æ–‡ä»¶</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/stat.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;fcntl.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/wait.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> fd = open(<span class="string">&quot;log.txt&quot;</span>,O_RDWR|O_CREAT|O_TRUNC|O_APPEND);<span class="comment">//è¿½åŠ æ¨¡å¼æ‰“å¼€ä¸€ä¸ªæ–°æ–‡ä»¶</span></span><br><span class="line">    dup2(fd,<span class="number">1</span>);<span class="comment">//åœ¨forkå‰å°±æ‰“å¼€æ–‡ä»¶</span></span><br><span class="line"></span><br><span class="line">    <span class="type">pid_t</span> id = fork();<span class="comment">//åˆ›å»ºå­è¿›ç¨‹</span></span><br><span class="line">    <span class="keyword">if</span>(id == <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;child output\n&quot;</span>);<span class="comment">//å­è¿›ç¨‹è¾“å‡ºåˆ°æ–‡ä»¶</span></span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> </span><br><span class="line">    &#123;</span><br><span class="line">        waitpid(id,<span class="number">0</span>,<span class="number">0</span>);<span class="comment">//é˜»å¡ç­‰å¾…å­è¿›ç¨‹</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;parent output\n&quot;</span>);<span class="comment">//çˆ¶è¿›ç¨‹è¾“å‡º</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘ä»¬åœ¨<code>fork</code><strong>ä¹‹å‰</strong>å®Œæˆäº†å¯¹æ ‡å‡†è¾“å‡ºçš„<strong>é‡å®šå‘</strong>,ç„¶å<code>fork</code>ä¹‹åä»¤çˆ¶è¿›ç¨‹å’Œå­è¿›ç¨‹è¿›è¡Œä¸åŒçš„æ ‡å‡†è¾“å‡º</p><p>è¿è¡Œç»“æœä¸ºçˆ¶è¿›ç¨‹å’Œå­è¿›ç¨‹çš„<code>æ ‡å‡†è¾“å‡º</code>éƒ½<strong>é‡å®šå‘</strong>åˆ°äº†æ–‡ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">child output</span><br><span class="line">parent output</span><br></pre></td></tr></table></figure><h2 id="å­è¿›ç¨‹å’Œçˆ¶è¿›ç¨‹çš„-ç‹¬ç«‹æ€§"><a href="#å­è¿›ç¨‹å’Œçˆ¶è¿›ç¨‹çš„-ç‹¬ç«‹æ€§" class="headerlink" title="å­è¿›ç¨‹å’Œçˆ¶è¿›ç¨‹çš„ ç‹¬ç«‹æ€§"></a>å­è¿›ç¨‹å’Œçˆ¶è¿›ç¨‹çš„ ç‹¬ç«‹æ€§</h2><p>æ¥ä¸‹æ¥ä¸€æ®µä»£ç æµ‹è¯• çˆ¶è¿›ç¨‹ å’Œ å­è¿›ç¨‹ çš„æ‰“å¼€æ–‡ä»¶æ˜¯å¦ç‹¬ç«‹</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/stat.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;fcntl.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/wait.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> fd = open(<span class="string">&quot;log.txt&quot;</span>,O_RDWR|O_CREAT|O_TRUNC|O_APPEND);<span class="comment">//è¿½åŠ æ¨¡å¼æ‰“å¼€ä¸€ä¸ªæ–°æ–‡ä»¶</span></span><br><span class="line"></span><br><span class="line">    <span class="type">pid_t</span> id = fork();<span class="comment">//åˆ›å»ºå­è¿›ç¨‹</span></span><br><span class="line">    <span class="keyword">if</span>(id == <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        dup2(fd,<span class="number">1</span>);<span class="comment">//åªæœ‰å­è¿›ç¨‹é‡å®šå‘äº†æ ‡å‡†è¾“å‡º</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;child output\n&quot;</span>);<span class="comment">//å­è¿›ç¨‹è¾“å‡ºåˆ°æ–‡ä»¶</span></span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> </span><br><span class="line">    &#123;</span><br><span class="line">        waitpid(id,<span class="number">0</span>,<span class="number">0</span>);<span class="comment">//é˜»å¡ç­‰å¾…å­è¿›ç¨‹</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;parent output\n&quot;</span>);<span class="comment">//çˆ¶è¿›ç¨‹è¾“å‡º</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæˆ‘ä»¬åœ¨<code>fork</code>ä¹‹å‰éƒ½ä¸è¿›è¡Œé‡å®šå‘ï¼Œ<code>fork</code>åä»…å¯¹å­è¿›ç¨‹è¿›è¡Œäº†æ ‡å‡†è¾“å‡ºé‡å®šå‘ï¼Œè€Œçˆ¶è¿›ç¨‹ä¸ä½œä»»ä½•é‡å®šå‘</p><p>åœ¨è¿è¡Œåå‘ç°å­è¿›ç¨‹çš„è¾“å‡ºé‡å®šå‘ä¸ä¼šå½±å“çˆ¶è¿›ç¨‹,äºŒè€…æœ‰<code>ç‹¬ç«‹æ€§</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">parent output</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">child output</span><br></pre></td></tr></table></figure><h1 id="è¿›ç¨‹æ›¿æ¢"><a href="#è¿›ç¨‹æ›¿æ¢" class="headerlink" title="è¿›ç¨‹æ›¿æ¢"></a>è¿›ç¨‹æ›¿æ¢</h1><p>å…ˆåœ¨åŒçº§æ–‡ä»¶å¤¹å‡†å¤‡ä¸€ä¸ªå¾…æ›¿æ¢çš„ç¨‹åº</p><blockquote><p>execute.c</p></blockquote><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;exe output\n&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åè¿è¡Œ<code>gcc -o execute execute.c</code>ç¼–è¯‘è·å¾—ä¸€ä¸ªç¨‹åº</p><p>ç„¶åå‡†å¤‡ä¸»ç¨‹åº</p><blockquote><p>mycmd.c</p></blockquote><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/stat.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;fcntl.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/wait.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> fd = open(<span class="string">&quot;log.txt&quot;</span>,O_RDWR|O_CREAT|O_TRUNC|O_APPEND);<span class="comment">//è¿½åŠ æ¨¡å¼æ‰“å¼€ä¸€ä¸ªæ–°æ–‡ä»¶</span></span><br><span class="line"></span><br><span class="line">    <span class="type">pid_t</span> id = fork();<span class="comment">//åˆ›å»ºå­è¿›ç¨‹</span></span><br><span class="line">    <span class="keyword">if</span>(id == <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        dup2(fd,<span class="number">1</span>);<span class="comment">//åªæœ‰å­è¿›ç¨‹é‡å®šå‘äº†æ ‡å‡†è¾“å‡º</span></span><br><span class="line">        execvp(<span class="string">&quot;./execute&quot;</span>,<span class="literal">NULL</span>);<span class="comment">//è¿›ç¨‹æ›¿æ¢</span></span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> </span><br><span class="line">    &#123;</span><br><span class="line">        waitpid(id,<span class="number">0</span>,<span class="number">0</span>);<span class="comment">//é˜»å¡ç­‰å¾…å­è¿›ç¨‹</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;parent wait success\n&quot;</span>);<span class="comment">//çˆ¶è¿›ç¨‹è¾“å‡º</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæˆ‘ä»¬ä½¿å­è¿›ç¨‹<strong>å…ˆ</strong>æ ‡å‡†è¾“å‡ºé‡å®šå‘ï¼Œ <strong>å†</strong>è¿›è¡Œè¿›ç¨‹æ›¿æ¢ï¼Œå‘ç°æ›¿æ¢åçš„è¿›ç¨‹ï¼Œä¹Ÿæ˜¯æ ‡å‡†è¾“å‡ºé‡å®šå‘çš„çŠ¶æ€</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">exe output</span><br></pre></td></tr></table></figure><h2 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h2><p>è¿›ç¨‹æ›¿æ¢<strong>ä¸ä¼š</strong>æ”¹å˜åŸè¿›ç¨‹çš„æ–‡ä»¶æ‰“å¼€çŠ¶æ€å’Œé‡å®šå‘å…³ç³»</p>]]></content>
      
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆè¯†åŠ¨é™æ€åº“(ä¿®æ”¹ä¸­)</title>
      <link href="/2024/07/08/libs/"/>
      <url>/2024/07/08/libs/</url>
      
        <content type="html"><![CDATA[<h1 id="åŠ¨æ€åº“"><a href="#åŠ¨æ€åº“" class="headerlink" title="åŠ¨æ€åº“"></a>åŠ¨æ€åº“</h1><h1 id="é™æ€åº“"><a href="#é™æ€åº“" class="headerlink" title="é™æ€åº“"></a>é™æ€åº“</h1>]]></content>
      
      
      
        <tags>
            
            <tag> åŠ¨æ€åº“ é™æ€åº“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>forkå­è¿›ç¨‹,è¿›ç¨‹é€€å‡ºä¸ç­‰å¾…</title>
      <link href="/2024/07/07/fork/"/>
      <url>/2024/07/07/fork/</url>
      
        <content type="html"><![CDATA[<h1 id="è®¤è¯†fork"><a href="#è®¤è¯†fork" class="headerlink" title="è®¤è¯†fork()"></a>è®¤è¯†<code>fork()</code></h1><p>å¤´æ–‡ä»¶<code>&lt;unistd.h&gt;</code>æä¾›çš„<code>fork()</code>å‡½æ•°ç”¨äºä»å·²æœ‰çš„<code>åŸè¿›ç¨‹</code>åˆ›å»ºä¸€ä¸ªæ–°çš„<code>å­è¿›ç¨‹</code>ï¼Œè€ŒåŸè¿›ç¨‹åœ¨å…³ç³»å¼ç§°ä¸º<code>çˆ¶è¿›ç¨‹</code></p><h2 id="fork-çš„è¿”å›å€¼"><a href="#fork-çš„è¿”å›å€¼" class="headerlink" title="fork()çš„è¿”å›å€¼"></a>fork()çš„è¿”å›å€¼</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="type">pid_t</span> id = fork();</span><br></pre></td></tr></table></figure><p>çˆ¶å­è¿›ç¨‹ä¸­<code>fork()</code>å‡½æ•°çš„è¿”å›å€¼(æ­¤å¤„ç”¨å˜é‡<code>id</code>å‚¨å­˜)æ˜¯ä¸åŒçš„:</p><p><strong>çˆ¶è¿›ç¨‹</strong>é‡Œ<code>id</code>çš„å€¼ä¸ºå­è¿›ç¨‹çš„<code>PID</code>,å…¶å€¼<code>&gt;0</code>;<strong>å­è¿›ç¨‹</strong>é‡Œ<code>id</code>å€¼å›ºå®šä¸º<code>0</code></p><ul><li><code>id &gt; 0</code> çˆ¶è¿›ç¨‹</li><li><code>id == 0</code> å­è¿›ç¨‹</li><li><code>id &lt; 0</code> fork()å¤±è´¥</li></ul><h2 id="åˆ†æµ"><a href="#åˆ†æµ" class="headerlink" title="åˆ†æµ"></a>åˆ†æµ</h2><p><a href="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/PixPin_2024-07-09_13-00-38.png">https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/PixPin_2024-07-09_13-00-38.png</a></p><p>åˆ©ç”¨çˆ¶å­è¿›ç¨‹ä¸­<code>fork()</code>è¿”å›å€¼çš„ä¸åŒï¼Œå¯ä»¥ç”¨<code>if...else...</code>è¿›è¡Œåˆ†æµï¼Œè®©çˆ¶å­è¿›ç¨‹æ‰§è¡Œä¸åŒçš„ä»£ç </p><h2 id="fork-çš„è¿‡ç¨‹"><a href="#fork-çš„è¿‡ç¨‹" class="headerlink" title="fork()çš„è¿‡ç¨‹"></a>fork()çš„è¿‡ç¨‹</h2><p>è¿›ç¨‹è°ƒç”¨<code>fork</code>ï¼Œå½“æ§åˆ¶è½¬ç§»åˆ°<strong>å†…æ ¸</strong>ä¸­çš„forkä»£ç åï¼Œ<strong>å†…æ ¸</strong>åš</p><ul><li>åˆ†é…<strong>æ–°çš„</strong>å†…å­˜å—å’Œå†…æ ¸æ•°æ®ç»“æ„ç»™å­è¿›ç¨‹</li><li>å°†çˆ¶è¿›ç¨‹éƒ¨åˆ†æ•°æ®ç»“æ„å†…å®¹<strong>æ‹·è´</strong>è‡³å­è¿›ç¨‹</li><li>æ·»åŠ å­è¿›ç¨‹åˆ°<strong>ç³»ç»Ÿè¿›ç¨‹åˆ—è¡¨</strong>å½“ä¸­</li><li><code>fork</code>è¿”å›ï¼Œå¼€å§‹è°ƒåº¦å™¨è°ƒåº¦</li></ul><p><a href="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/PixPin_2024-07-09_18-54-41.png">https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/PixPin_2024-07-09_18-54-41.png</a></p><p>å½“ä¸€ä¸ªè¿›ç¨‹è°ƒç”¨forkä¹‹åï¼Œå°±æœ‰ä¸€å¯¹äºŒè¿›åˆ¶<strong>ä»£ç ç›¸åŒ</strong>çš„çˆ¶å­è¿›ç¨‹ã€‚è€Œä¸”å®ƒä»¬éƒ½è¿è¡Œåˆ°ç›¸åŒçš„åœ°æ–¹ã€‚ä½†æ¯ä¸ªè¿›ç¨‹éƒ½å¯ä»¥<strong>ç‹¬ç«‹</strong>åœ°ç»§ç»­è¿è¡Œä»£ç ,å¹¶æŒ‰ä»£ç åˆ†æµè‡³ä¸åŒçš„ä»£ç æ®µ</p><p>ä½†è¿™ä¸¤ä¸ªè¿›ç¨‹è°å…ˆæ‰§è¡Œ<strong>å®Œå…¨</strong>ç”±è°ƒåº¦å™¨å†³å®šï¼Œè€Œè°å…ˆç»“æŸï¼Œåˆ™ç”±å®é™…æ‰§è¡Œæƒ…å†µå’Œè°ƒåº¦å™¨å†³å®š</p><h2 id="æ‹·è´çš„è¿‡ç¨‹-ä¸-å†™æ—¶æ‹·è´"><a href="#æ‹·è´çš„è¿‡ç¨‹-ä¸-å†™æ—¶æ‹·è´" class="headerlink" title="æ‹·è´çš„è¿‡ç¨‹ ä¸ å†™æ—¶æ‹·è´"></a>æ‹·è´çš„è¿‡ç¨‹ ä¸ å†™æ—¶æ‹·è´</h2><p><code>fork</code>æ—¶ï¼Œå­è¿›ç¨‹ä¼šå°†çˆ¶è¿›ç¨‹è™šæ‹Ÿå†…å­˜çš„å†…å®¹éƒ½å¤åˆ¶ä¸€ä»½åœ¨è‡ªå·±çš„è™šæ‹Ÿå†…å­˜ä¸­,ä½†é€šè¿‡é¡µè¡¨ï¼ŒäºŒè€…æ˜ å°„åˆ°äº†åŒä¸€å—ç‰©ç†å†…å­˜çš„åŒºåŸŸï¼Œè¿™æ ·åœ¨äºŒè€…éƒ½<strong>æ²¡æœ‰å†™å…¥è¡Œä¸º</strong>æ—¶ï¼Œå‡å°‘äº†ç‰©ç†å†…å­˜ä¸­<strong>å†—ä½™</strong>çš„æ‹·è´è¡Œä¸ºï¼Œæœ‰æ•ˆæé«˜äº†è¿è¡Œæ•ˆç‡</p><p>ä½†å½“çˆ¶å­è¿›ç¨‹ä¸­æœ‰ä¸€æ–¹å‘ç”Ÿå†™å…¥è¡Œä¸ºæ—¶ï¼Œå°±ä¼šè§¦å‘<code>å†™æ—¶æ‹·è´</code>ï¼Œæ­¤æ—¶ç‰©ç†å†…å­˜ä¸­å‘ç”Ÿæ‹·è´è¡Œä¸ºï¼Œä½†åªæ‹·è´è¿›ç¨‹æ˜ å°„çš„<code>æ•°æ®æ®µ</code>ï¼Œè€Œç”±äº<strong>ä¸å‘ç”Ÿè¿›ç¨‹æ›¿æ¢æ—¶</strong>çˆ¶å­è¿›ç¨‹çš„ä»£ç æ®µä¸€å®šç›¸åŒï¼Œç‰©ç†å†…å­˜ä¸­,<code>ä»£ç æ®µ</code>æ˜ å°„éƒ¨åˆ†å¹¶ä¸å‘ç”Ÿæ‹·è´</p><p><a href="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/PixPin_2024-07-09_19-38-58.png">https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/PixPin_2024-07-09_19-38-58.png</a></p><h1 id="è¿›ç¨‹é€€å‡º"><a href="#è¿›ç¨‹é€€å‡º" class="headerlink" title="è¿›ç¨‹é€€å‡º"></a>è¿›ç¨‹é€€å‡º</h1><h2 id="è¿›ç¨‹é€€å‡ºçš„åœºæ™¯"><a href="#è¿›ç¨‹é€€å‡ºçš„åœºæ™¯" class="headerlink" title="è¿›ç¨‹é€€å‡ºçš„åœºæ™¯"></a>è¿›ç¨‹é€€å‡ºçš„åœºæ™¯</h2><ul><li>ä»£ç è¿è¡Œå®Œæ¯•ï¼Œç»“æœæ­£ç¡®</li><li>ä»£ç è¿è¡Œå®Œæ¯•ï¼Œç»“æœä¸æ­£ç¡®</li><li>ä»£ç å¼‚å¸¸ç»ˆæ­¢</li></ul><h2 id="è¿›ç¨‹å¸¸è§é€€å‡ºæ–¹æ³•"><a href="#è¿›ç¨‹å¸¸è§é€€å‡ºæ–¹æ³•" class="headerlink" title="è¿›ç¨‹å¸¸è§é€€å‡ºæ–¹æ³•"></a>è¿›ç¨‹å¸¸è§é€€å‡ºæ–¹æ³•</h2><ul><li><code>main</code>å‡½æ•°è¿”å›</li><li><code>exit</code>é€€å‡º</li><li><code>_exit</code>é€€å‡º</li></ul><p><strong>å¼‚å¸¸é€€å‡º</strong>: <code>ctrl</code> + <code>c</code></p><h2 id="æŸ¥çœ‹é€€å‡ºç "><a href="#æŸ¥çœ‹é€€å‡ºç " class="headerlink" title="æŸ¥çœ‹é€€å‡ºç "></a>æŸ¥çœ‹é€€å‡ºç </h2><p>åœ¨ç»ˆç«¯ä½¿ç”¨å‘½ä»¤<code>echo $?</code>å¯ä»¥æŸ¥çœ‹é€€å‡ºç </p><p><code>æ³¨</code>å°½ç®¡å­è¿›ç¨‹è¿”å›çš„æ˜¯<code>int</code>,çˆ¶è¿›ç¨‹åªå–é€€å‡ºç çš„æœ€ä½<code>8ä½</code>,æ‰€ä»¥ä»¥ä¸‹ä¸‰ç§æƒ…å†µ</p><ul><li><code>main</code>å‡½æ•°è¿”å›<code>-1</code></li><li><code>exit(-1)</code></li><li><code>_exit(-1)</code></li></ul><p>åœ¨ç»ˆç«¯è¾“<code>echo $?</code>å¯å¾—é€€å‡ºç <code>255</code></p><h2 id="exit-å’Œ-eixt-è¾¨æ"><a href="#exit-å’Œ-eixt-è¾¨æ" class="headerlink" title="exit å’Œ _eixt è¾¨æ"></a><code>exit</code> å’Œ <code>_eixt</code> è¾¨æ</h2><p><code>main</code>å‡½æ•°è¿”å›å°±ä¸æƒœè¯´äº†ï¼Œæ¥è¾¨æä¸€ä¸‹å¤´æ–‡ä»¶<code>&lt;stdlib.h&gt;</code>æä¾›çš„<code>exit</code>å’Œ<code>_exit</code>å‡½æ•°</p><h3 id="exit"><a href="#exit" class="headerlink" title="_exit()"></a><code>_exit()</code></h3><p><code>_exit</code>ä¼š<strong>ç›´æ¥ç»ˆæ­¢</strong>è¿›ç¨‹å¹¶è¿”å›çŠ¶æ€ç ,è€Œ<strong>ä¸ä¼š</strong>æ‰§è¡Œç”¨æˆ·å®šä¹‰çš„æ¸…ç†å‡½æ•°ï¼Œ<strong>ä¹Ÿä¸ä¼š</strong>æ¸…ç†ç¼“å†²åŒº</p><h3 id="exit-1"><a href="#exit-1" class="headerlink" title="exit()"></a><code>exit()</code></h3><p><code>exit</code>å®é™…ä¸Šæœ€åä¹Ÿä¼šè°ƒç”¨<code>_exit</code>,ä½†å®ƒä¼šå…ˆæ‰§è¡Œä¸€ç³»åˆ—å–„åå·¥ä½œ,é¡ºåºå¦‚ä¸‹:</p><ol><li>æ‰§è¡Œç”¨æˆ·é€šè¿‡ atexitæˆ–on_exitå®šä¹‰çš„<strong>æ¸…ç†å‡½æ•°</strong>ã€‚</li><li>å…³é—­æ‰€æœ‰æ‰“å¼€çš„æµï¼Œæ‰€æœ‰çš„<strong>ç¼“å­˜æ•°æ®</strong>å‡è¢«å†™å…¥</li><li>è°ƒç”¨<code>_exit</code></li></ol><p><a href="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/PixPin_2024-07-09_22-10-26.png">https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/PixPin_2024-07-09_22-10-26.png</a></p><p><code>return</code>é€€å‡ºï¼š æ‰§è¡Œ<code>return n</code>ç­‰åŒäºæ‰§è¡Œ<code>exit(n)</code></p><h1 id="è¿›ç¨‹ç­‰å¾…"><a href="#è¿›ç¨‹ç­‰å¾…" class="headerlink" title="è¿›ç¨‹ç­‰å¾…"></a>è¿›ç¨‹ç­‰å¾…</h1><h2 id="è¿›ç¨‹ç­‰å¾…çš„å¿…è¦æ€§"><a href="#è¿›ç¨‹ç­‰å¾…çš„å¿…è¦æ€§" class="headerlink" title="è¿›ç¨‹ç­‰å¾…çš„å¿…è¦æ€§"></a>è¿›ç¨‹ç­‰å¾…çš„å¿…è¦æ€§</h2><ul><li>å­è¿›ç¨‹é€€å‡ºåéœ€è¦çˆ¶è¿›ç¨‹æ¥<strong>å›æ”¶</strong>åƒµå°¸è¿›ç¨‹,é˜²æ­¢äº§ç”Ÿå…¶å¼•å‘å†…å­˜æ³„æ¼ç­‰é—®é¢˜</li><li>åƒµå°¸è¿›ç¨‹éš¾ä»¥å¤„ç†,<code>kill -9</code>ä¹Ÿæ¸…ç†ä¸æ‰</li><li>çˆ¶è¿›ç¨‹é€šè¿‡è¿›ç¨‹ç­‰å¾…çš„æ–¹å¼ï¼Œ<strong>å›æ”¶</strong>å­è¿›ç¨‹èµ„æºï¼Œè·å–å­è¿›ç¨‹<strong>é€€å‡ºä¿¡æ¯</strong></li></ul><h2 id="è¿›ç¨‹ç­‰å¾…çš„æ–¹æ³•"><a href="#è¿›ç¨‹ç­‰å¾…çš„æ–¹æ³•" class="headerlink" title="è¿›ç¨‹ç­‰å¾…çš„æ–¹æ³•"></a>è¿›ç¨‹ç­‰å¾…çš„æ–¹æ³•</h2><h3 id="waitæ–¹æ³•"><a href="#waitæ–¹æ³•" class="headerlink" title="waitæ–¹æ³•"></a><code>wait</code>æ–¹æ³•</h3><blockquote><p>#include&lt;sys&#x2F;types.h&gt;<br>#include&lt;sys&#x2F;wait.h&gt;</p><p>pid_t wait(int*status);</p><p><code>å‚æ•°</code>ï¼šæ˜¾ç„¶<code>status</code>æ˜¯è¾“å‡ºå‹å‚æ•°,è·å–å­è¿›ç¨‹çš„<code>é€€å‡ºçŠ¶æ€</code>,è‹¥ä¸å…³å¿ƒï¼Œå¯ä¼ å‚<code>NULL</code></p><p><code>è¿”å›å€¼</code>: è‹¥<strong>æˆåŠŸ</strong>ï¼Œåˆ™è¿”å›è¢«ç­‰å¾…è¿›ç¨‹çš„<code>pid</code>,è‹¥<strong>å¤±è´¥</strong>ï¼Œåˆ™è¿”å›<code>-1</code></p></blockquote><h3 id="waitpidæ–¹æ³•"><a href="#waitpidæ–¹æ³•" class="headerlink" title="waitpidæ–¹æ³•"></a><code>waitpid</code>æ–¹æ³•</h3><blockquote><p>è¿”å›å€¼ï¼š<br>   å½“æ­£å¸¸è¿”å›çš„æ—¶å€™waitpidè¿”å›æ”¶é›†åˆ°çš„å­è¿›ç¨‹çš„è¿›ç¨‹IDï¼›<br>   å¦‚æœè®¾ç½®äº†é€‰é¡¹WNOHANG,è€Œè°ƒç”¨ä¸­waitpidå‘ç°æ²¡æœ‰å·²é€€å‡ºçš„å­è¿›ç¨‹å¯æ”¶é›†,åˆ™è¿”å›0ï¼›<br>   å¦‚æœè°ƒç”¨ä¸­å‡ºé”™,åˆ™è¿”å›-1,è¿™æ—¶errnoä¼šè¢«è®¾ç½®æˆç›¸åº”çš„å€¼ä»¥æŒ‡ç¤ºé”™è¯¯æ‰€åœ¨ï¼›</p><p>å‚æ•°ï¼š<br>   <code>pid</code>ï¼š<br>       <code>pid == -1</code>,ç­‰å¾…ä»»ä¸€ä¸ªå­è¿›ç¨‹ã€‚ä¸waitç­‰æ•ˆã€‚<br>       <code>pid &gt; 0</code>.ç­‰å¾…å…¶è¿›ç¨‹IDä¸pidç›¸ç­‰çš„å­è¿›ç¨‹ã€‚<br>   <code>status</code>:<br>       è¾“å‡ºå‹å‚æ•°ä¼ å‚<code>&amp;status</code>: å°†å­è¿›ç¨‹çš„<code>çŠ¶æ€ç </code>å­˜å…¥<code>status</code><br>       ä»¥ä¸‹ä¸¤ä¸ªå®å‡½æ•°ç”¨äºå¤„ç†<code>çŠ¶æ€ç </code>:<br>       <code>WIFEXITED(status)</code>: è‹¥ä¸º<strong>æ­£å¸¸ç»ˆæ­¢</strong>å­è¿›ç¨‹è¿”å›çš„çŠ¶æ€ï¼Œåˆ™ä¸ºçœŸã€‚ï¼ˆæŸ¥çœ‹è¿›ç¨‹æ˜¯å¦æ˜¯<strong>æ­£å¸¸é€€å‡º</strong>ï¼‰<br>       <code>WEXITSTATUS(status)</code>: è‹¥WIFEXITEDéé›¶ï¼Œæå–å­è¿›ç¨‹<code>é€€å‡ºç </code>ã€‚ï¼ˆæŸ¥çœ‹è¿›ç¨‹çš„<code>é€€å‡ºç </code>ï¼‰<br>   <code>options</code>:<br>       <code>WNOHANG</code>: è‹¥pidæŒ‡å®šçš„å­è¿›ç¨‹æ²¡æœ‰ç»“æŸï¼Œåˆ™waitpid()å‡½æ•°è¿”å›0ï¼Œä¸äºˆä»¥ç­‰å¾…ã€‚è‹¥æ­£å¸¸ç»“æŸï¼Œåˆ™è¿”å›è¯¥å­è¿›ç¨‹çš„IDã€‚<br>       <code>0</code>: é˜»å¡ç­‰å¾…æŒ‡å®š<code>pid</code>çš„è¿›ç¨‹</p></blockquote><h4 id="é˜»å¡ç­‰å¾…"><a href="#é˜»å¡ç­‰å¾…" class="headerlink" title="é˜»å¡ç­‰å¾…"></a>é˜»å¡ç­‰å¾…</h4><p><code>option</code> &#x3D;&#x3D; <code>0</code>æ—¶<code>waitpid</code>é‡‡ç”¨é˜»å¡ç­‰å¾…ï¼Œçˆ¶è¿›ç¨‹ä¼šé˜»å¡ç­‰å¾…åˆ°å­è¿›ç¨‹é€€å‡º</p><p><em>ç¤ºä¾‹ä»£ç </em></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/wait.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> status;</span><br><span class="line">    <span class="type">pid_t</span> id = fork();</span><br><span class="line">    <span class="keyword">if</span>(id == <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>;i&lt;=<span class="number">5</span>;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;child running [%d]s\n&quot;</span>,i);</span><br><span class="line">            sleep(<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;child exited\n&quot;</span>);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        waitpid(id,&amp;status,<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">if</span>(WIFEXITED(status))</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;father wait success, exit code: %d\n&quot;</span>,WEXITSTATUS(status));</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;child failed to exit\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="éé˜»å¡è½®è¯¢"><a href="#éé˜»å¡è½®è¯¢" class="headerlink" title="éé˜»å¡è½®è¯¢"></a>éé˜»å¡è½®è¯¢</h4><p><code>option</code> &#x3D;&#x3D; <code>WNOHANG</code>æ—¶,<code>waitpid</code>é‡‡ç”¨éé˜»å¡ç­‰å¾…,è‹¥ç­‰ä¸åˆ°å­è¿›ç¨‹é€€å‡ºï¼Œå°±ä¼šç»§ç»­æ‰§è¡Œåé¢çš„ä»£ç ï¼Œæ‰€ä»¥ä¸€èˆ¬åŠ ä¸Š<code>while</code>ç­‰å¾ªç¯ç”¨äºè½®è¯¢ï¼ŒäºŒè€…å…±åŒæ„æˆ<code>éé˜»å¡è½®è¯¢</code></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/wait.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//éé˜»å¡è½®è¯¢</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> status;</span><br><span class="line">    <span class="type">pid_t</span> id = fork();</span><br><span class="line">    <span class="keyword">if</span>(id == <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        sleep(<span class="number">5</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;child exited\n&quot;</span>);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">while</span>(<span class="number">1</span>)<span class="comment">//è½®è¯¢</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">pid_t</span> rid = waitpid(id,&amp;status,WNOHANG);</span><br><span class="line">            <span class="keyword">if</span>(rid &gt; <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(WIFEXITED(status))</span><br><span class="line">                    <span class="built_in">printf</span>(<span class="string">&quot;father wait success, exit code: %d\n&quot;</span>,WEXITSTATUS(status));</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    <span class="built_in">printf</span>(<span class="string">&quot;child failed to exit\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(rid == <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;ç­‰å¾…å­è¿›ç¨‹ä¸­...\n&quot;</span>);</span><br><span class="line">                sleep(<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span><span class="comment">//rid&lt;0</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;wait failed\n&quot;</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> fork Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¯å¢ƒå˜é‡</title>
      <link href="/2024/07/06/evn/"/>
      <url>/2024/07/06/evn/</url>
      
        <content type="html"><![CDATA[<h1 id="åŸºæœ¬æ¦‚å¿µ"><a href="#åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="åŸºæœ¬æ¦‚å¿µ"></a>åŸºæœ¬æ¦‚å¿µ</h1><ul><li>ç¯å¢ƒå˜é‡(environment variables)ä¸€èˆ¬æ˜¯æŒ‡åœ¨æ“ä½œç³»ç»Ÿä¸­ç”¨æ¥æŒ‡å®šæ“ä½œç³»ç»Ÿè¿è¡Œç¯å¢ƒçš„ä¸€äº›<strong>å‚æ•°</strong></li><li>ç¯å¢ƒå˜é‡é€šå¸¸å…·æœ‰æŸäº›ç‰¹æ®Šç”¨é€”ï¼Œè¿˜æœ‰åœ¨ç³»ç»Ÿå½“ä¸­é€šå¸¸å…·æœ‰<strong>å…¨å±€ç‰¹æ€§</strong></li></ul><p><strong>æ„æˆ</strong>ï¼šç¯å¢ƒå˜é‡æ˜¯ä¸€ç³»åˆ—<code>å­—ç¬¦ä¸²</code>çš„ç»Ÿç§°,æ‰€ä»¥ä¸€ä¸ªç¯å¢ƒå˜é‡ç”±<code>å˜é‡å</code>å’Œ<code>å€¼</code>æ„æˆ</p><p>è¿™ä¹ˆè¯´è¿˜æ˜¯å¤ªæŠ½è±¡äº†ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥ä¼šä¸¾å‡ ä¸ªå…·ä½“æ ·ä¾‹ï¼Œä½“ä¼š<code>ç¯å¢ƒå˜é‡</code>åœ¨è·å–ç³»ç»Ÿå…¨å±€çš„å˜é‡ï¼Œç³»ç»ŸæŒ‡ä»¤è·¯å¾„ç­‰æ–¹é¢çš„ä½œç”¨</p><h2 id="å¸¸è§ç¯å¢ƒå˜é‡"><a href="#å¸¸è§ç¯å¢ƒå˜é‡" class="headerlink" title="å¸¸è§ç¯å¢ƒå˜é‡"></a>å¸¸è§ç¯å¢ƒå˜é‡</h2><table><thead><tr><th>å˜é‡å</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td><code>PATH</code></td><td>æŒ‡å®šå‘½ä»¤çš„æœç´¢è·¯å¾„</td></tr><tr><td><code>HOME</code></td><td>æŒ‡å®šç”¨æˆ·çš„ä¸»å·¥ä½œç›®å½•(å³ç”¨æˆ·ç™»é™†åˆ°Linuxç³»ç»Ÿä¸­æ—¶,é»˜è®¤çš„ç›®å½•)</td></tr><tr><td><code>USER</code></td><td>å½“å‰ç”¨æˆ·å</td></tr><tr><td><code>SHELL</code></td><td>å½“å‰Shell,å®ƒçš„å€¼é€šå¸¸æ˜¯<code>/bin/bash</code></td></tr><tr><td><code>PWD</code></td><td>å½“å‰å·¥ä½œç›®å½•</td></tr></tbody></table><h1 id="æ“ä½œç³»ç»Ÿå˜é‡"><a href="#æ“ä½œç³»ç»Ÿå˜é‡" class="headerlink" title="æ“ä½œç³»ç»Ÿå˜é‡"></a>æ“ä½œç³»ç»Ÿå˜é‡</h1><h2 id="æŸ¥çœ‹ç¯å¢ƒå˜é‡"><a href="#æŸ¥çœ‹ç¯å¢ƒå˜é‡" class="headerlink" title="æŸ¥çœ‹ç¯å¢ƒå˜é‡"></a>æŸ¥çœ‹ç¯å¢ƒå˜é‡</h2><p><code>echo $NAME</code> <em>NAMEä¸ºå˜é‡å</em></p><p>ä»¥<code>PATH</code>ä¸ºä¾‹,æŸ¥çœ‹<code>PATH</code>çš„å€¼çš„æŒ‡ä»¤ä¸º</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo $PATH</span><br></pre></td></tr></table></figure><p><a href="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/PixPin_2024-07-08_12-46-35.png">https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/PixPin_2024-07-08_12-46-35.png</a></p><p>å¯ä»¥çœ‹åˆ°<code>PATH</code>çš„å†…å®¹ä¸ºå¤šä¸ªæ–‡ä»¶è·¯å¾„ï¼Œäº’ç›¸ä»¥<code>:</code>åˆ†éš”</p><p>è€Œè‹¥è¦æŸ¥çœ‹å½“å‰çš„å…¨éƒ¨ç¯å¢ƒå˜é‡,å¯ä»¥ä½¿ç”¨<code>env</code>æŒ‡ä»¤,å°†å½“å‰æ‰€æœ‰ç¯å¢ƒå˜é‡æ‰“å°åœ¨ç»ˆç«¯ä¸Š</p><p>ä¹Ÿå¯ä»¥é€šè¿‡<code>ç®¡é“</code>å’Œ<code>grep</code>å°†<code>env</code>çš„è¾“å‡ºå†…å®¹è¿‡æ»¤</p><p><em>æŸ¥çœ‹PATH</em></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">env | grep PATH</span><br></pre></td></tr></table></figure><p>åŒæ—¶è¿˜æœ‰ä¸ª<code>set</code> æŒ‡ä»¤å¯ä»¥æ˜¾ç¤ºæœ¬åœ°å®šä¹‰çš„shellå˜é‡å’Œç¯å¢ƒå˜é‡ç¯å¢ƒå˜é‡çš„ç»„ç»‡æ–¹å¼ </p><h2 id="è·å–è¿›ç¨‹çš„ç¯å¢ƒå˜é‡"><a href="#è·å–è¿›ç¨‹çš„ç¯å¢ƒå˜é‡" class="headerlink" title="è·å–è¿›ç¨‹çš„ç¯å¢ƒå˜é‡"></a>è·å–è¿›ç¨‹çš„ç¯å¢ƒå˜é‡</h2><ul><li>åœ¨ç¨‹åºä¸­ï¼Œå¯ä»¥ä½¿ç”¨<code>getenv()</code>æ¥å£è·å–å¯¹åº”<code>ç¯å¢ƒå˜é‡å</code>çš„å¯¹åº”ç¯å¢ƒå˜é‡å€¼</li></ul><p><em><code>getenv</code>åœ¨<code>&lt;stdlib.h&gt;</code>ä¸­</em></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;PATH: %s\n&quot;</span>,getenv(<span class="string">&quot;PATH&quot;</span>));<span class="comment">//æ‰“å°PATHçš„å€¼</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ç¯å¢ƒå˜é‡çš„ç»„ç»‡æ–¹å¼"><a href="#ç¯å¢ƒå˜é‡çš„ç»„ç»‡æ–¹å¼" class="headerlink" title="ç¯å¢ƒå˜é‡çš„ç»„ç»‡æ–¹å¼"></a>ç¯å¢ƒå˜é‡çš„ç»„ç»‡æ–¹å¼</h2><p>æ¯ä¸ª<code>è¿›ç¨‹</code>éƒ½æœ‰è‡ªå·±çš„<code>ç¯å¢ƒè¡¨</code>,æ‰€è°“<code>ç¯å¢ƒè¡¨</code>å°±æ˜¯ä¸€ä¸ª<strong>å­—ç¬¦</strong><code>æŒ‡é’ˆæ•°ç»„</code>,æ¯ä¸ªä¸ä¸º<code>NULL</code>çš„æŒ‡é’ˆæŒ‡å‘<code>ç¯å¢ƒå­—ç¬¦ä¸²</code></p><p><a href="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/PixPin_2024-07-08_20-52-19.png">https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/PixPin_2024-07-08_20-52-19.png</a></p><ul><li>å› æ­¤ä¹Ÿå¯ä»¥ä½¿ç”¨<code>main</code>å‡½æ•°ä¼ å‚æ¥æ‰“å°æ‰€æœ‰ç¯å¢ƒå˜é‡çš„å†…å®¹<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">int</span> argc,<span class="type">char</span>* argv[],con <span class="type">char</span>* env[])</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">char</span>* str;</span><br><span class="line">    <span class="type">int</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(str =env[i++]) <span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>,str);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="å¯¼å…¥ç¯å¢ƒå˜é‡"><a href="#å¯¼å…¥ç¯å¢ƒå˜é‡" class="headerlink" title="å¯¼å…¥ç¯å¢ƒå˜é‡"></a>å¯¼å…¥ç¯å¢ƒå˜é‡</h2><p>å¤´æ–‡ä»¶<code>unistd.h&gt;</code>æä¾›äº†ä¸€ä¸ªå…¨å±€å˜é‡<code>environ</code>,å› æ­¤å¯ä»¥ç”¨<code>extern</code>å¯¼å…¥ç¯å¢ƒå˜é‡</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">extern</span> <span class="type">char</span> **environ;<span class="comment">//å¯¼å…¥æ¢è¿›å˜é‡</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">const</span> <span class="type">char</span>* str;</span><br><span class="line">    <span class="type">int</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(str =environ[i++]) <span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>,str);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ·»åŠ æ–°çš„ç¯å¢ƒå˜é‡"><a href="#æ·»åŠ æ–°çš„ç¯å¢ƒå˜é‡" class="headerlink" title="æ·»åŠ æ–°çš„ç¯å¢ƒå˜é‡"></a>æ·»åŠ æ–°çš„ç¯å¢ƒå˜é‡</h2><p>ä½¿ç”¨<code>export</code>å‘½ä»¤å¯ä»¥æ·»åŠ æ–°çš„ç¯å¢ƒå˜é‡</p><p>ä½¿ç”¨æ–¹æ³•:<code>export``=``(å˜é‡å€¼)</code></p><p>ä¾‹å¦‚æ·»åŠ ä¸€ä¸ªå€¼ä¸º<code>supdriver666</code>,åä¸º<code>MY_VALUE</code>çš„ç¯å¢ƒå˜é‡,æœ€åæŸ¥çœ‹è¯¥å˜é‡</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">export MY_VALUE=supdriver666</span><br><span class="line"></span><br><span class="line">env | grep MY_VALUE</span><br></pre></td></tr></table></figure><h2 id="ç¨‹åºå†…è®¾ç½®æ¢è¿›å˜é‡"><a href="#ç¨‹åºå†…è®¾ç½®æ¢è¿›å˜é‡" class="headerlink" title="ç¨‹åºå†…è®¾ç½®æ¢è¿›å˜é‡"></a>ç¨‹åºå†…è®¾ç½®æ¢è¿›å˜é‡</h2><p>ä½¿ç”¨<code>&lt;stdlib.h&gt;</code>æä¾›çš„<code>putenv()</code>æ¥å£å¯ä»¥è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œç”¨æ³•ä¸<code>export</code>æŒ‡ä»¤ç›¸åŒ</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    putenv(<span class="string">&quot;MY_VALUE=666&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;MY_VALUE = %s&quot;</span>,getenv(<span class="string">&quot;MY_VALUE&quot;</span>));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ é™¤ç¯å¢ƒå˜é‡"><a href="#åˆ é™¤ç¯å¢ƒå˜é‡" class="headerlink" title="åˆ é™¤ç¯å¢ƒå˜é‡"></a>åˆ é™¤ç¯å¢ƒå˜é‡</h2><p>ä½¿ç”¨<code>unset</code>å¯ä»¥åˆ é™¤ç¯å¢ƒå˜é‡</p><p><em>åˆ é™¤ä¸Šæ–‡çš„<code>MY_VALUE</code></em></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">unset MY_VALUE</span><br><span class="line"></span><br><span class="line">env | grep MY_VALUE</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°æ²¡æœ‰è¾“å‡ºäº† </p><h2 id="æ·»åŠ æœ¬åœ°shellå˜é‡-å’Œ-æŸ¥çœ‹æœ¬åœ°å˜é‡ä¸ç¯å¢ƒå˜é‡"><a href="#æ·»åŠ æœ¬åœ°shellå˜é‡-å’Œ-æŸ¥çœ‹æœ¬åœ°å˜é‡ä¸ç¯å¢ƒå˜é‡" class="headerlink" title="æ·»åŠ æœ¬åœ°shellå˜é‡ å’Œ æŸ¥çœ‹æœ¬åœ°å˜é‡ä¸ç¯å¢ƒå˜é‡"></a>æ·»åŠ æœ¬åœ°shellå˜é‡ å’Œ æŸ¥çœ‹æœ¬åœ°å˜é‡ä¸ç¯å¢ƒå˜é‡</h2><p>æ·»åŠ æœ¬åœ°å˜é‡: ç›´æ¥è¾“å…¥<code>(å˜é‡å)``=``(å€¼)</code>  &#x2F;&#x2F;<em>ä¸åŠ ç©ºæ ¼</em>&#x2F;</p><p>æŸ¥çœ‹å˜é‡: ä½¿ç”¨<code>set</code>å‘½ä»¤æŸ¥çœ‹æœ¬åœ°å˜é‡ä¸ç¯å¢ƒå˜é‡ï¼Œä½†æ˜¯å†…å®¹éå¸¸å¤šï¼Œå»ºè®®æ­é…<code>grep</code>ç­‰ä½¿ç”¨</p><p><em>ä¾‹</em></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">my_value=2024</span><br><span class="line"></span><br><span class="line">set</span><br><span class="line"></span><br><span class="line">set | grep my_value</span><br></pre></td></tr></table></figure><h2 id="æœ¬åœ°å˜é‡ä¸ç¯å¢ƒå˜é‡"><a href="#æœ¬åœ°å˜é‡ä¸ç¯å¢ƒå˜é‡" class="headerlink" title="æœ¬åœ°å˜é‡ä¸ç¯å¢ƒå˜é‡"></a>æœ¬åœ°å˜é‡ä¸ç¯å¢ƒå˜é‡</h2><p>äºŒè€…æœ€å¤§çš„å·®åˆ«æ˜¯<code>ç¯å¢ƒå˜é‡</code>å¯ä»¥è¢«å­è¿›ç¨‹<strong>ç»§æ‰¿</strong>,è€Œ<code>æœ¬åœ°å˜é‡</code>åªåœ¨æœ¬BASHå†…éƒ¨æœ‰æ•ˆï¼Œ<strong>ä¸ä¼š</strong>è¢«ç»§æ‰¿</p>]]></content>
      
      
      
        <tags>
            
            <tag> ç¯å¢ƒå˜é‡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆè¯†è¿›ç¨‹</title>
      <link href="/2024/07/04/progress/"/>
      <url>/2024/07/04/progress/</url>
      
        <content type="html"><![CDATA[<hr><p>æ“ä½œç³»ç»Ÿå¹³å°:Linux<br>æœåŠ¡å™¨ç³»ç»Ÿ: CentOS 7</p><hr><h1 id="æ¦‚å¿µæŠ½è±¡"><a href="#æ¦‚å¿µæŠ½è±¡" class="headerlink" title="æ¦‚å¿µæŠ½è±¡"></a>æ¦‚å¿µæŠ½è±¡</h1><h2 id="ç¨‹åº"><a href="#ç¨‹åº" class="headerlink" title="ç¨‹åº"></a>ç¨‹åº</h2><p><code>ç¨‹åº</code> &#x3D; <code>ä»£ç </code> + <code>æ•°æ®</code></p><p>ç¨‹åºæ˜¯å‚¨å­˜åœ¨ç¡¬ç›˜ä¸Šçš„å¯æ‰§è¡Œæ–‡ä»¶</p><h2 id="è¿›ç¨‹"><a href="#è¿›ç¨‹" class="headerlink" title="è¿›ç¨‹"></a>è¿›ç¨‹</h2><p>å°†<code>ç¨‹åº</code>åŠ è½½åˆ°<code>å†…å­˜</code>åï¼Œå°±åœ¨<code>å†…å­˜</code>ä¸­ç¨‹åºçš„å°±æ˜¯è¿›ç¨‹ã€‚ä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„ç¨‹åºå°±èƒ½å«åšè¿›ç¨‹</p><p><em>ç»“æ„å…³ç³»å¦‚ä¸‹</em></p><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/PixPin_2024-07-06_13-55-08.png"></p><p>å¦‚å›¾ï¼Œæ“ä½œç³»ç»Ÿä¸ºäº†<strong>ç®¡ç†</strong>å†…å­˜ä¸­çš„è¿›ç¨‹,ä½¿ç”¨äº†<code>PCB</code>ç»“æ„ä½“æ¥æè¿°è¿›ç¨‹,é€šè¿‡ç®¡ç†<code>PCB</code>æ¥ç®¡ç†è¿›ç¨‹,ä¾ç„¶æ˜¯<em>å…ˆæè¿°å†ç»„ç»‡</em></p><p><code>PCB</code>:è¿›ç¨‹æ§åˆ¶å—çš„æ•°æ®ç»“æ„(process control block)</p><p>æ‰€ä»¥å®é™…ä¸Š:<code>è¿›ç¨‹</code>&#x3D;<code>PCB</code>+<code>ä»£ç å’Œæ•°æ®</code></p><p>å¯¹äº<code>ä»£ç å’Œæ•°æ®</code>æ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œæ¥ä¸‹æ¥ä¸»è¦è®¨è®º<code>PCB</code></p><h2 id="task-struct"><a href="#task-struct" class="headerlink" title="task_struct"></a>task_struct</h2><p><code>Linux</code>å¹³å°ä¸‹çš„<code>PCB</code>å«åš<code>task_struct</code></p><blockquote><p><code>task_struct</code>å†…å®¹åˆ†ç±»:</p></blockquote><ul><li><strong>æ ‡ç¤ºç¬¦</strong>: æè¿°æœ¬è¿›ç¨‹çš„å”¯ä¸€æ ‡ç¤ºç¬¦ï¼Œç”¨æ¥åŒºåˆ«å…¶ä»–è¿›ç¨‹ã€‚</li><li><strong>çŠ¶æ€</strong>: ä»»åŠ¡çŠ¶æ€ï¼Œé€€å‡ºä»£ç ï¼Œé€€å‡ºä¿¡å·ç­‰ã€‚</li><li><strong>ä¼˜å…ˆçº§</strong>: ç›¸å¯¹äºå…¶ä»–è¿›ç¨‹çš„ä¼˜å…ˆçº§ã€‚</li><li>ç¨‹åºè®¡æ•°å™¨: ç¨‹åºä¸­å³å°†è¢«æ‰§è¡Œçš„ä¸‹ä¸€æ¡æŒ‡ä»¤çš„åœ°å€ã€‚</li><li>å†…å­˜æŒ‡é’ˆ: åŒ…æ‹¬ç¨‹åºä»£ç å’Œè¿›ç¨‹ç›¸å…³æ•°æ®çš„æŒ‡é’ˆï¼Œè¿˜æœ‰å’Œå…¶ä»–è¿›ç¨‹å…±äº«çš„å†…å­˜å—çš„æŒ‡é’ˆ</li><li>ä¸Šä¸‹æ–‡æ•°æ®: è¿›ç¨‹æ‰§è¡Œæ—¶å¤„ç†å™¨çš„å¯„å­˜å™¨ä¸­çš„æ•°æ®ã€‚</li><li>Iï¼OçŠ¶æ€ä¿¡æ¯: åŒ…æ‹¬æ˜¾ç¤ºçš„I&#x2F;Oè¯·æ±‚,åˆ†é…ç»™è¿›ç¨‹çš„Iï¼Oè®¾å¤‡å’Œè¢«è¿›ç¨‹ä½¿ç”¨çš„æ–‡ä»¶åˆ—è¡¨ã€‚</li><li>è®°è´¦ä¿¡æ¯: å¯èƒ½åŒ…æ‹¬å¤„ç†å™¨æ—¶é—´æ€»å’Œï¼Œä½¿ç”¨çš„æ—¶é’Ÿæ•°æ€»å’Œï¼Œæ—¶é—´é™åˆ¶ï¼Œè®°è´¦å·ç­‰ã€‚</li><li>å…¶ä»–ä¿¡æ¯</li></ul><p><em>åŠ ç²—éƒ¨åˆ†ä¼šè¯¦ç»†ä»‹ç»</em></p><h1 id="æŸ¥çœ‹è¿›ç¨‹"><a href="#æŸ¥çœ‹è¿›ç¨‹" class="headerlink" title="æŸ¥çœ‹è¿›ç¨‹"></a>æŸ¥çœ‹è¿›ç¨‹</h1><p>è¿›ç¨‹çš„ä¿¡æ¯å¯ä»¥é€šè¿‡&#x2F;proc ç³»ç»Ÿæ–‡ä»¶å¤¹æŸ¥çœ‹,å…¶ä¸­æ–‡ä»¶å¤¹çš„åå­—å°±æ˜¯è¿›ç¨‹çš„<code>PID</code></p><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/PixPin_2024-07-06_21-53-59.png"></p><p>å¤§å¤šæ•°è¿›ç¨‹ä¿¡æ¯åŒæ ·å¯ä»¥ä½¿ç”¨topå’Œpsè¿™äº›ç”¨æˆ·çº§å·¥å…·æ¥è·å–</p><blockquote><p>ä»¥æˆ‘è‡ªå·±ç¼–å†™çš„ä¸€ä¸ªç¨‹åºä¸ºä¾‹</p></blockquote><p><em>Makefile</em></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mycmd:mycmd.c</span><br><span class="line">gcc -o $@ $^</span><br><span class="line"></span><br><span class="line">.PHONY:clean</span><br><span class="line">clean:</span><br><span class="line">rm -rf mycmd</span><br></pre></td></tr></table></figure><p><strong>æ³¨</strong>ï¼š åé¢çš„ç¨‹åºéƒ½æ˜¯è¿™ä¸‰ä¸ªå¤´æ–‡ä»¶ï¼Œä»…ä¿®æ”¹<code>main()</code>å‡½æ•°ä½“å³å¯<br><em>mycmd.c</em></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">while</span>(<span class="number">1</span>) sleep(<span class="number">1</span>);<span class="comment">//æ­»å¾ªç¯ä½¿è¯¥è¿›ç¨‹å¸¸é©»å†…å­˜</span></span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åç¼–è¯‘å¹¶è¿è¡Œç¨‹åº<br><em>å‘½ä»¤è¡Œ</em></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">make</span><br><span class="line">./mycmd</span><br><span class="line">ps aux | grep mycmd | grep -v grep</span><br></pre></td></tr></table></figure><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/PixPin_2024-07-06_22-56-05.png"></p><h2 id="è¿›ç¨‹æ ‡ç¤ºç¬¦-PID-PPID"><a href="#è¿›ç¨‹æ ‡ç¤ºç¬¦-PID-PPID" class="headerlink" title="è¿›ç¨‹æ ‡ç¤ºç¬¦(PID PPID)"></a>è¿›ç¨‹æ ‡ç¤ºç¬¦(PID PPID)</h2><p>å¯ä»¥é€šè¿‡ç³»ç»Ÿæ¥å£è·å–è¿›ç¨‹æ ‡ç¤ºç¬¦</p><ul><li>è¿›ç¨‹id (pid)    ä½¿ç”¨<code>getpid()</code></li><li>çˆ¶è¿›ç¨‹id (ppid) ä½¿ç”¨<code>getppid()</code></li></ul><p><em>æ¥ä¿®æ”¹ä¸€ä¸‹ä»£ç </em><br><em>mycmd.c</em></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">&quot;pid: %d\n&quot;</span>,getpid());<span class="comment">//æ‰“å°pid (è¯¥è¿›ç¨‹id)</span></span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">&quot;ppid: %d\n&quot;</span>,getppid());<span class="comment">//æ‰“å°ppid (çˆ¶è¿›ç¨‹id)</span></span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><em>å‘½ä»¤è¡Œ</em></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">make clean</span><br><span class="line">make</span><br><span class="line">./mycmd</span><br></pre></td></tr></table></figure><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/PixPin_2024-07-06_23-28-35.png"></p><h2 id="åˆ©ç”¨fork-åˆ›å»ºå­è¿›ç¨‹"><a href="#åˆ©ç”¨fork-åˆ›å»ºå­è¿›ç¨‹" class="headerlink" title="åˆ©ç”¨fork()åˆ›å»ºå­è¿›ç¨‹"></a>åˆ©ç”¨<code>fork()</code>åˆ›å»ºå­è¿›ç¨‹</h2><p><em>mycmd.c</em></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="type">pid_t</span> id = fork();</span><br><span class="line">  <span class="keyword">if</span>(id == <span class="number">0</span>)<span class="comment">//å­è¿›ç¨‹</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;child pid: %d\n&quot;</span>,getpid());<span class="comment">//æ‰“å°pid (è¯¥è¿›ç¨‹id)</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;child ppid: %d\n&quot;</span>,getppid());<span class="comment">//æ‰“å°ppid (çˆ¶è¿›ç¨‹id)</span></span><br><span class="line">    sleep(<span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span><span class="comment">//çˆ¶è¿›ç¨‹</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;father pid: %d\n&quot;</span>,getpid());<span class="comment">//æ‰“å°pid (è¯¥è¿›ç¨‹id)</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;father ppid: %d\n&quot;</span>,getppid());<span class="comment">//æ‰“å°ppid (çˆ¶è¿›ç¨‹id)</span></span><br><span class="line">    sleep(<span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/PixPin_2024-07-07_10-56-48.png"></p><p>å¦‚å›¾ï¼Œ<code>fork()</code>åˆ›å»ºäº†å­è¿›ç¨‹ï¼Œä¸”å­è¿›ç¨‹çš„<code>PPID</code>å’Œçˆ¶è¿›ç¨‹<code>PID</code>ç›¸åŒ</p><h3 id="fork-çš„è¿”å›å€¼"><a href="#fork-çš„è¿”å›å€¼" class="headerlink" title="fork()çš„è¿”å›å€¼"></a>fork()çš„è¿”å›å€¼</h3><p>çˆ¶å­è¿›ç¨‹ä¸­<code>fork()</code>å‡½æ•°çš„è¿”å›å€¼(æ­¤å¤„ç”¨å˜é‡<code>id</code>å‚¨å­˜)æ˜¯ä¸åŒçš„:</p><p><strong>çˆ¶è¿›ç¨‹</strong>é‡Œ<code>id</code>çš„å€¼ä¸ºå­è¿›ç¨‹çš„<code>PID</code>,å…¶å€¼<code>&gt;0</code>;<strong>å­è¿›ç¨‹</strong>é‡Œ<code>id</code>å€¼å›ºå®šä¸º<code>0</code></p><ul><li><code>id &gt; 0</code> çˆ¶è¿›ç¨‹</li><li><code>id == 0</code> å­è¿›ç¨‹</li><li><code>id &lt; 0</code> fork()å¤±è´¥</li></ul><h3 id="çˆ¶å­è¿›ç¨‹åˆ†æµ"><a href="#çˆ¶å­è¿›ç¨‹åˆ†æµ" class="headerlink" title="çˆ¶å­è¿›ç¨‹åˆ†æµ"></a>çˆ¶å­è¿›ç¨‹åˆ†æµ</h3><p>åˆ©ç”¨<code>fork()</code>è¿”å›å€¼ä¸åŒçš„ç‰¹æ€§å¯ä»¥åšåˆ°åˆ†æµæ“ä½œï¼Œåˆ©ç”¨<code>if...else...</code>è®©çˆ¶å­è¿›ç¨‹æ‰§è¡Œä¸åŒçš„ä»£ç </p><p><a href="https://www.supdriver.top/2024/07/07/fork/">æˆ³æˆ‘å»forkçš„è¯¦ç»†ä»‹ç»</a></p><h1 id="è¿›ç¨‹çŠ¶æ€"><a href="#è¿›ç¨‹çŠ¶æ€" class="headerlink" title="è¿›ç¨‹çŠ¶æ€"></a>è¿›ç¨‹çŠ¶æ€</h1><p><em>çŠ¶æ€åœ¨kernelæºä»£ç é‡Œå®šä¹‰</em></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">static</span> <span class="type">const</span> <span class="type">char</span> * <span class="type">const</span> task_state_array[] = &#123;</span><br><span class="line"><span class="string">&quot;R (running)&quot;</span>, <span class="comment">/* 0 */</span></span><br><span class="line"><span class="string">&quot;S (sleeping)&quot;</span>, <span class="comment">/* 1 */</span></span><br><span class="line"><span class="string">&quot;D (disk sleep)&quot;</span>, <span class="comment">/* 2 */</span></span><br><span class="line"><span class="string">&quot;T (stopped)&quot;</span>, <span class="comment">/* 4 */</span></span><br><span class="line"><span class="string">&quot;t (tracing stop)&quot;</span>, <span class="comment">/* 8 */</span></span><br><span class="line"><span class="string">&quot;X (dead)&quot;</span>, <span class="comment">/* 16 */</span></span><br><span class="line"><span class="string">&quot;Z (zombie)&quot;</span>, <span class="comment">/* 32 */</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="R-è¿è¡ŒçŠ¶æ€-running"><a href="#R-è¿è¡ŒçŠ¶æ€-running" class="headerlink" title="R è¿è¡ŒçŠ¶æ€(running)"></a>R è¿è¡ŒçŠ¶æ€(running)</h2><p>RçŠ¶æ€å¹¶ä¸ä¸€å®šæ­£åœ¨è¿è¡Œï¼Œè€Œæ˜¯<code>æ­£åœ¨è¿è¡Œ</code>å’Œ<code>å¤„äºè¿è¡Œé˜Ÿåˆ—</code>ä¸­çš„ä¸€ç§</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">while</span>(<span class="number">1</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/PixPin_2024-07-07_13-14-49.png"></p><h2 id="S-ç¡çœ çŠ¶æ€-sleeping"><a href="#S-ç¡çœ çŠ¶æ€-sleeping" class="headerlink" title="S ç¡çœ çŠ¶æ€(sleeping)"></a>S ç¡çœ çŠ¶æ€(sleeping)</h2><p>S æ„å‘³ç€è¿›ç¨‹åœ¨<strong>ç­‰å¾…</strong>è¿è¡Œå®Œæˆ</p><p>(<em>è¿™é‡Œçš„ç¡çœ æœ‰æ—¶ä¹Ÿå¯å«åšå¯ä¸­æ–­ç¡çœ  interruptible sleep</em>)</p><p><em>ä¸‹é¢å±•ç¤ºä¸¤ç§SçŠ¶æ€çš„è¿›ç¨‹</em></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">  sleep(<span class="number">50</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/PixPin_2024-07-07_13-45-14.png"></p><p>ç›´æ¥ä½¿ç”¨<code>sleep()</code>ç³»åˆ—çš„å‡½æ•°ç›´æ¥ä½¿è¿›ç¨‹ä¼‘çœ </p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="type">int</span> n;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">&quot;Enter the num: &quot;</span>);</span><br><span class="line">  <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/PixPin_2024-07-07_13-47-33.png"></p><p>åƒ<code>scanf()</code>è¿™ç§éœ€è¦ç­‰å¾…å¤–è®¾(é”®ç›˜)çš„æ¥å£ï¼Œåœ¨<strong>é˜»å¡ç­‰å¾…</strong>èµ„æºçš„è¿‡ç¨‹ä¸­ä¼šä½¿è¿›ç¨‹è¿›å…¥<code>S</code>çŠ¶æ€</p><h2 id="D-ç£ç›˜ä¼‘çœ çŠ¶æ€ï¼ˆDisk-sleepï¼‰"><a href="#D-ç£ç›˜ä¼‘çœ çŠ¶æ€ï¼ˆDisk-sleepï¼‰" class="headerlink" title="D ç£ç›˜ä¼‘çœ çŠ¶æ€ï¼ˆDisk sleepï¼‰"></a>D ç£ç›˜ä¼‘çœ çŠ¶æ€ï¼ˆDisk sleepï¼‰</h2><p>æœ‰æ—¶å€™ä¹Ÿå«ä¸å¯ä¸­æ–­ç¡çœ çŠ¶æ€ï¼ˆuninterruptible sleepï¼‰ï¼Œåœ¨è¿™ä¸ªçŠ¶æ€çš„è¿›ç¨‹é€šå¸¸ä¼šç­‰å¾…<code>IO</code>çš„ç»“æŸã€‚</p><h2 id="T-åœæ­¢çŠ¶æ€ï¼ˆstoppedï¼‰"><a href="#T-åœæ­¢çŠ¶æ€ï¼ˆstoppedï¼‰" class="headerlink" title="T åœæ­¢çŠ¶æ€ï¼ˆstoppedï¼‰"></a>T åœæ­¢çŠ¶æ€ï¼ˆstoppedï¼‰</h2><p>å¯ä»¥é€šè¿‡(<em>killç­‰å‘½ä»¤</em>)å‘é€ <code>SIGSTOP</code> ä¿¡å·ç»™è¿›ç¨‹æ¥åœæ­¢ï¼ˆTï¼‰è¿›ç¨‹ã€‚è¿™ä¸ªè¢«æš‚åœçš„è¿›ç¨‹å¯ä»¥é€šè¿‡å‘é€ <code>SIGCONT </code>ä¿¡å·è®©è¿›ç¨‹ç»§ç»­è¿è¡Œã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">while</span>(<span class="number">1</span>) sleep(<span class="number">1</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œå‰å…ˆ<strong>å¤åˆ¶</strong>sshæ¸ é“ï¼Œå…¶ä¸­ä¸€ä¸ªçª—å£ç”¨äºæ‰§è¡Œè¿›ç¨‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">make clean</span><br><span class="line">make</span><br><span class="line">./mycmd</span><br></pre></td></tr></table></figure><p>å¦ä¸€ä¸ªè¿›ç¨‹ç”¨äºè¾“å…¥å‘½ä»¤</p><p>å…ˆæŸ¥çœ‹è¯¥è¿›ç¨‹çš„<code>PID</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps ajx | head -1 &amp;&amp; ps ajx | grep mycmd | grep -v grep</span><br></pre></td></tr></table></figure><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/PixPin_2024-07-07_15-04-51.png"></p><p>å¦‚å›¾ï¼Œè¿™æ¬¡çš„<code>PID</code>æ˜¯<code>20275</code></p><p>ç„¶åç”¨<code>kill</code>å‘é€<code>SIGSTOP</code>,å¯¹åº”å‚æ•°ä¸º<code>-19</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kill -19 20275</span><br><span class="line">ps ajx | head -1 &amp;&amp; ps ajx | grep mycmd | grep -v grep</span><br></pre></td></tr></table></figure><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/PixPin_2024-07-07_15-06-38.png"></p><p>å¯ä»¥çœ‹åˆ°å®ƒå·²ç»ç”±<code>S</code>çŠ¶æ€æ”¹ä¸º<code>T</code>çŠ¶æ€äº†</p><p>æ¥ä¸‹æ¥å‘é€<code>SIGCONT</code>,å¯¹åº”å‚æ•°<code>-18</code>,ä½¿è¿›ç¨‹æ¢å¤</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kill -18 20275</span><br><span class="line">ps ajx | head -1 &amp;&amp; ps ajx | grep mycmd | grep -v grep</span><br></pre></td></tr></table></figure><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/PixPin_2024-07-07_15-08-45.png"></p><p>å¯ä»¥çœ‹åˆ°å·²ç»ç”±<code>T</code>å˜ä¸ºåŸæœ¬çš„<code>S</code>çŠ¶æ€äº†</p><h2 id="X-æ­»äº¡çŠ¶æ€ï¼ˆdeadï¼‰"><a href="#X-æ­»äº¡çŠ¶æ€ï¼ˆdeadï¼‰" class="headerlink" title="X æ­»äº¡çŠ¶æ€ï¼ˆdeadï¼‰"></a>X æ­»äº¡çŠ¶æ€ï¼ˆdeadï¼‰</h2><p>è¿™ä¸ªçŠ¶æ€åªæ˜¯ä¸€ä¸ªè¿”å›çŠ¶æ€ï¼Œä½ ä¸ä¼šåœ¨ä»»åŠ¡åˆ—è¡¨é‡Œçœ‹åˆ°è¿™ä¸ªçŠ¶æ€ã€‚</p><h2 id="Z-åƒµå°¸è¿›ç¨‹-zombie"><a href="#Z-åƒµå°¸è¿›ç¨‹-zombie" class="headerlink" title="Z åƒµå°¸è¿›ç¨‹(zombie)"></a>Z åƒµå°¸è¿›ç¨‹(zombie)</h2><p>è¿™ä¸ªè¯¦ç»†è®¨è®ºä¸‹</p><h3 id="äº§ç”Ÿ"><a href="#äº§ç”Ÿ" class="headerlink" title="äº§ç”Ÿ"></a>äº§ç”Ÿ</h3><p>å½“è¯¥è¿›ç¨‹é€€å‡ºåï¼Œçˆ¶è¿›ç¨‹å°šæœªä½¿ç”¨<code>wait()</code>ä¹‹ç±»çš„æ¥å£è·å–è¯¥è¿›ç¨‹çš„<code>é€€å‡ºç </code>,ä¸”çˆ¶è¿›ç¨‹<strong>æ²¡æœ‰ç»“æŸ</strong>æ—¶ï¼Œè¯¥è¿›ç¨‹ä¼šå˜æˆåƒµå°¸è¿›ç¨‹</p><p><em>çˆ¶è¿›ç¨‹æ¯”å­è¿›ç¨‹å…ˆé€€å‡ºæ—¶ï¼Œå­è¿›ç¨‹çš„çˆ¶è¿›ç¨‹ä¼šæ”¹å˜ä¸ºPIDä¸º1çš„è¿›ç¨‹ï¼Œç”±æ–°è¿›ç¨‹æ‰˜ç®¡</em></p><p><em>ä¸‹é¢åˆ›å»ºä¸€ä¸ªä¾‹å­</em></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="type">pid_t</span> id = fork();</span><br><span class="line">  <span class="keyword">if</span>(id == <span class="number">0</span>)<span class="comment">//å­è¿›ç¨‹</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;child exit\n&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span><span class="comment">//çˆ¶è¿›ç¨‹</span></span><br><span class="line">  &#123;</span><br><span class="line">    sleep(<span class="number">30</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;father exit\n&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œç¨‹åºåçš„<code>30ç§’</code>å†…æŸ¥çœ‹è¿›ç¨‹çŠ¶æ€ï¼Œå¯ä»¥çœ‹åˆ°å­è¿›ç¨‹è¿›å…¥äº†<code>Z</code>çŠ¶æ€</p><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/PixPin_2024-07-07_16-27-27.png"></p><h3 id="è¡Œä¸º"><a href="#è¡Œä¸º" class="headerlink" title="è¡Œä¸º"></a>è¡Œä¸º</h3><p>åƒµå°¸è¿›ç¨‹ä¼šä»¥ç»ˆæ­¢çŠ¶æ€ä¿æŒåœ¨è¿›ç¨‹è¡¨ä¸­ï¼Œç­‰å¾…çˆ¶è¿›ç¨‹è¯»å–é€€å‡ºçŠ¶æ€ä»£ç </p><h3 id="å±å®³"><a href="#å±å®³" class="headerlink" title="å±å®³"></a>å±å®³</h3><ul><li>çˆ¶è¿›ç¨‹ä¸€ç›´<strong>æœªè·å–</strong>å­è¿›ç¨‹çš„é€€å‡ºç ,åƒµå°¸çŠ¶æ€å°±ä¼šä¸€ç›´ä¿æŒ</li><li>ä¿æŒ<code>Z</code>çŠ¶æ€çš„è¿›ç¨‹çš„<code>PCB</code>ä»ç„¶è¦ä¸€ç›´ç»´æŠ¤ï¼Œå ç”¨èµ„æº</li><li>æœªé€€å‡º<code>Z</code>çŠ¶æ€çš„å­è¿›ç¨‹å¯èƒ½é€ æˆå†…å­˜æ³„æ¼</li></ul><h2 id="å­¤å„¿è¿›ç¨‹"><a href="#å­¤å„¿è¿›ç¨‹" class="headerlink" title="å­¤å„¿è¿›ç¨‹"></a>å­¤å„¿è¿›ç¨‹</h2><p>å½“çˆ¶è¿›ç¨‹æ¯”å­è¿›ç¨‹<strong>å…ˆ</strong>é€€å‡ºå,è¿™ä¸ªå­è¿›ç¨‹ä¾¿æˆäº†<code>å­¤å„¿è¿›ç¨‹</code></p><p>æ—¢ç„¶åŸæœ¬çš„çˆ¶è¿›ç¨‹æ²¡äº†ï¼Œè°æ¥æ‰˜ç®¡å­è¿›ç¨‹å‘¢ï¼Ÿç­”æ¡ˆæ˜¯<code>PID</code>ä¸º<code>1</code>çš„é‚£ä¸ªè¿›ç¨‹</p><p><em>ä¾‹å­å¦‚ä¸‹</em></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="type">pid_t</span> id = fork();</span><br><span class="line">  <span class="keyword">if</span>(id == <span class="number">0</span>)<span class="comment">//å­è¿›ç¨‹</span></span><br><span class="line">  &#123;</span><br><span class="line">    sleep(<span class="number">30</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;child exit\n&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span><span class="comment">//çˆ¶è¿›ç¨‹</span></span><br><span class="line">  &#123;</span><br><span class="line">    sleep(<span class="number">1</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;father exit\n&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/PixPin_2024-07-07_19-05-32.png"></p><h1 id="è¿›ç¨‹ä¼˜å…ˆçº§"><a href="#è¿›ç¨‹ä¼˜å…ˆçº§" class="headerlink" title="è¿›ç¨‹ä¼˜å…ˆçº§"></a>è¿›ç¨‹ä¼˜å…ˆçº§</h1><h2 id="åŸºç¡€æ¦‚å¿µ"><a href="#åŸºç¡€æ¦‚å¿µ" class="headerlink" title="åŸºç¡€æ¦‚å¿µ"></a>åŸºç¡€æ¦‚å¿µ</h2><ul><li>cpuèµ„æºåˆ†é…çš„å…ˆåé¡ºåºï¼Œå°±æ˜¯æŒ‡è¿›ç¨‹çš„ä¼˜å…ˆæƒï¼ˆpriorityï¼‰ã€‚</li><li>ä¼˜å…ˆæƒé«˜çš„è¿›ç¨‹æœ‰ä¼˜å…ˆæ‰§è¡Œæƒåˆ©ã€‚é…ç½®è¿›ç¨‹ä¼˜å…ˆæƒå¯¹å¤šä»»åŠ¡ç¯å¢ƒçš„linuxå¾ˆæœ‰ç”¨ï¼Œå¯ä»¥æ”¹å–„ç³»ç»Ÿæ€§èƒ½ã€‚</li><li>è¿˜å¯ä»¥æŠŠè¿›ç¨‹è¿è¡Œåˆ°æŒ‡å®šçš„CPUä¸Šï¼Œè¿™æ ·ä¸€æ¥ï¼ŒæŠŠä¸é‡è¦çš„è¿›ç¨‹å®‰æ’åˆ°æŸä¸ªCPUï¼Œå¯ä»¥å¤§å¤§æ”¹å–„ç³»ç»Ÿæ•´ä½“æ€§èƒ½</li></ul><h2 id="æŸ¥çœ‹ä¼˜å…ˆçº§"><a href="#æŸ¥çœ‹ä¼˜å…ˆçº§" class="headerlink" title="æŸ¥çœ‹ä¼˜å…ˆçº§"></a>æŸ¥çœ‹ä¼˜å…ˆçº§</h2><p><em>é¦–å…ˆå†™ä¸€ä¸ªå¸¸é©»è¿›ç¨‹</em></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">while</span>(<span class="number">1</span>)sleep(<span class="number">1</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åä½¿ç”¨<code>ps -la</code>æŸ¥çœ‹è¿›ç¨‹ä¿¡æ¯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">./mycmd</span><br><span class="line">ps -la</span><br></pre></td></tr></table></figure><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/PixPin_2024-07-07_19-59-12.png"></p><p>å…¶ä¸­çš„<code>PRI</code>å’Œ<code>NI</code>ä¸è¿›ç¨‹ä¼˜å…ˆçº§æœ‰å…³,<code>PRI</code>å°±æ˜¯è¿›ç¨‹çš„ä¼˜å…ˆçº§ï¼Œè·Ÿæ’é˜Ÿæ‘‡å·ä¸€æ ·ï¼Œæ­¤å€¼<code>è¶Šå°</code>ï¼Œè¢«æ‰§è¡Œçš„ä¼˜å…ˆçº§è¶Šé«˜,è€Œ<code>NI</code>å°±æ˜¯niceå€¼ï¼Œç”¨äºä¿®æ­£åŸ<code>PRI</code>å€¼</p><h3 id="PRIå€¼çš„è®¡ç®—"><a href="#PRIå€¼çš„è®¡ç®—" class="headerlink" title="PRIå€¼çš„è®¡ç®—"></a>PRIå€¼çš„è®¡ç®—</h3><p>é¦–å…ˆåœ¨çœ‹åˆ°çš„<code>PRI</code>å€¼ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸ªéšè—çš„åŸºå‡†å€¼ï¼Œæœ¬æ–‡ç”¨<code>PRI0</code>æŒ‡ä»£ï¼Œè¿™ä¸ª<code>PRI0</code>æ˜¯å›ºå®šçš„ï¼Œå½“<code>NI</code>å€¼ä¸º<code>0</code>æ—¶ï¼Œ<code>PRI == PRI0</code>,è€Œ<br>æ— è®ºæ€ä¹ˆä¿®æ”¹å¤šå°‘æ¬¡<code>NI</code>,<code>PRI</code>çš„å€¼å‡å»<code>NI</code>å€¼éƒ½ç›¸ç­‰ï¼Œæ‰€ä»¥å¤§å¯ä»¥æ¨æ–­åœ¨æœ¬ç³»ç»Ÿ(Linux)ä¸­,<code>PRI</code>å€¼æœ‰å¦‚ä¸‹è®¡ç®—å…¬å¼</p><p><code>PRI = PRI0 + NI</code></p><h3 id="ä¿®æ”¹NIå€¼"><a href="#ä¿®æ”¹NIå€¼" class="headerlink" title="ä¿®æ”¹NIå€¼"></a>ä¿®æ”¹NIå€¼</h3><p>å› ä¸ºä¿®æ”¹<code>NI</code>å€¼è¦ç®¡ç†å‘˜æƒé™ï¼Œæ‰€ä»¥è¦ä¹ˆ<code>root</code>ç”¨æˆ·ç”¨<code>top</code>ï¼Œè¦ä¹ˆä¿¡ä»»ç”¨æˆ·ç”¨<code>sudo top</code>æ‰“å¼€ç•Œé¢ï¼Œç„¶åæŒ‰<code>r</code>,è¾“å…¥å¾…ä¿®æ”¹è¿›ç¨‹çš„<code>PID</code>,æŒ‰ä¸‹å›è½¦åå†è¾“å…¥æ–°çš„<code>NI</code>å€¼(æœ‰æ•ˆèŒƒå›´<code>-20~19</code>)</p><p><em>æ­¤å¤„å¯ä»¥ç”¨<code>ps -la</code>æŸ¥çœ‹è¿›ç¨‹çš„PID,æˆ–è°ƒç”¨<code>getpid()</code></em></p><p><em>å†å†™ä¸€ä¸ªä¾‹å­</em></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;mypid: %d\n&quot;</span>,getpid());</span><br><span class="line">    sleep(<span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>sudo top</code>ç„¶åæŒ‰<code>r</code></p><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/PixPin_2024-07-07_21-14-38.png"></p><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/PixPin_2024-07-07_21-15-50.png"></p><p><code>ps -la</code>å¯ä»¥çœ‹åˆ°è¢«ä¿®æ”¹åçš„è¿›ç¨‹ä¼˜å…ˆçº§</p><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/PixPin_2024-07-07_21-17-02.png"></p><h1 id="å…¶å®ƒæ¦‚å¿µ"><a href="#å…¶å®ƒæ¦‚å¿µ" class="headerlink" title="å…¶å®ƒæ¦‚å¿µ"></a>å…¶å®ƒæ¦‚å¿µ</h1><ul><li>ç«äº‰æ€§: ç³»ç»Ÿè¿›ç¨‹æ•°ç›®ä¼—å¤šï¼Œè€ŒCPUèµ„æºåªæœ‰å°‘é‡ï¼Œç”šè‡³1ä¸ªï¼Œæ‰€ä»¥è¿›ç¨‹ä¹‹é—´æ˜¯å…·æœ‰ç«äº‰å±æ€§çš„ã€‚ä¸ºäº†é«˜æ•ˆå®Œæˆä»»åŠ¡ï¼Œæ›´åˆç†ç«äº‰ç›¸å…³èµ„æºï¼Œä¾¿å…·æœ‰äº†ä¼˜å…ˆçº§</li><li>ç‹¬ç«‹æ€§: å¤šè¿›ç¨‹è¿è¡Œï¼Œéœ€è¦ç‹¬äº«å„ç§èµ„æºï¼Œå¤šè¿›ç¨‹è¿è¡ŒæœŸé—´<strong>äº’ä¸å¹²æ‰°</strong></li><li>å¹¶è¡Œ: å¤šä¸ªè¿›ç¨‹åœ¨<strong>å¤šä¸ªCPU</strong>ä¸‹åˆ†åˆ«ï¼ŒåŒæ—¶è¿›è¡Œè¿è¡Œï¼Œè¿™ç§°ä¹‹ä¸ºå¹¶è¡Œ</li><li>å¹¶å‘: å¤šä¸ªè¿›ç¨‹åœ¨<strong>ä¸€ä¸ªCPU</strong>ä¸‹é‡‡ç”¨è¿›ç¨‹åˆ‡æ¢çš„æ–¹å¼ï¼Œåœ¨ä¸€æ®µæ—¶é—´ä¹‹å†…ï¼Œè®©å¤šä¸ªè¿›ç¨‹éƒ½å¾—ä»¥æ¨è¿›ï¼Œç§°ä¹‹ä¸ºå¹¶å‘</li></ul><p><em>ä¸‹ä¸€ç« </em><a href="https://www.supdriver.top/2024/07/06/evn/">ç¯å¢ƒå˜é‡</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> è¿›ç¨‹ Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C/C++ staticå…³é”®å­—çš„ä½¿ç”¨</title>
      <link href="/2024/06/30/usestatic/"/>
      <url>/2024/06/30/usestatic/</url>
      
        <content type="html"><![CDATA[<p>å› ä¸º<code>static</code>çš„ç”¨æ³•åˆå¤šåˆæ‚ï¼Œå€¼å¾—å•å‡ºä¸€ç¯‡åšå®¢ç”¨ä»¥æ±‡æ€»</p><h1 id="C-C-é€šç”¨ç”¨æ³•"><a href="#C-C-é€šç”¨ç”¨æ³•" class="headerlink" title="C&#x2F;C++ é€šç”¨ç”¨æ³•"></a>C&#x2F;C++ é€šç”¨ç”¨æ³•</h1><h2 id="å±€éƒ¨å˜é‡-å…¨å±€å±æ€§"><a href="#å±€éƒ¨å˜é‡-å…¨å±€å±æ€§" class="headerlink" title="å±€éƒ¨å˜é‡-&gt;å…¨å±€å±æ€§"></a>å±€éƒ¨å˜é‡-&gt;å…¨å±€å±æ€§</h2><p>å½“å¯¹åŸæœ¬å£°æ˜åœ¨å‡½æ•°æ ˆå¸§é‡Œçš„<code>å˜é‡</code>ä½¿ç”¨<code>static</code>ä¿®é¥°æ—¶,è¯¥<code>å˜é‡</code>çš„å­˜å‚¨ç©ºé—´ä¼šæ”¹å˜åˆ°<code>é™æ€åŒº</code>ï¼Œä¸ä¼šéšç€å‡½æ•°æ ˆå¸§çš„é”€æ¯è€Œé”€æ¯ã€‚</p><p>åˆå§‹åŒ–ï¼šåˆæ¬¡è°ƒç”¨å£°æ˜è¯­å¥æ—¶ä¼šæ‰§è¡Œå£°æ˜æ“ä½œï¼Œè€Œä¹‹åå†æ‰§è¡Œåˆ°è¯¥è¯­å¥å¤„æ—¶ä¼šè‡ªåŠ¨è·³è¿‡ã€‚</p><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/PixPin_2024-07-03_10-51-24.png"></p><p>ä½œç”¨èŒƒå›´ï¼šä¸ä¸åŠ <code>static</code>æ—¶çš„ä½œç”¨èŒƒå›´ç›¸åŒï¼Œè¿˜æ˜¯å±€éƒ¨å¯ç”¨</p><p>é”€æ¯ï¼šå’Œå…¨å±€å˜é‡ä¸€æ ·åœ¨<code>main</code>å‡½æ•°çš„æ ˆå¸§é”€æ¯æ—¶ä¸€å¹¶é”€æ¯</p><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/PixPin_2024-07-03_11-09-04.png"></p><h2 id="å…¨å±€å˜é‡-é™åˆ¶è®¿é—®"><a href="#å…¨å±€å˜é‡-é™åˆ¶è®¿é—®" class="headerlink" title="å…¨å±€å˜é‡-&gt;é™åˆ¶è®¿é—®"></a>å…¨å±€å˜é‡-&gt;é™åˆ¶è®¿é—®</h2><p>åŸæœ¬åŒçº§æ–‡ä»¶å¤¹ä¸‹çš„æºæ–‡ä»¶å¯ä»¥ç”¨<code>extern</code>å…³é”®å­—äº’ç›¸è·å–å…¨å±€å˜é‡,ä½†å¦‚æœç”¨<code>static</code>ä¿®é¥°æœ¬åœ°å…¨å±€å˜é‡ï¼Œé‚£ä¹ˆè¿™ä¸ªå…¨å±€å˜é‡åªèƒ½åœ¨æœ¬æ–‡ä»¶è°ƒç”¨ï¼Œè€Œå…¶å®ƒæ–‡ä»¶çœ‹ä¸åˆ°å®ƒ</p><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/PixPin_2024-07-03_11-56-27.png"></p><h2 id="å…¨å±€å‡½æ•°-é™åˆ¶è®¿é—®"><a href="#å…¨å±€å‡½æ•°-é™åˆ¶è®¿é—®" class="headerlink" title="å…¨å±€å‡½æ•°-&gt;é™åˆ¶è®¿é—®"></a>å…¨å±€å‡½æ•°-&gt;é™åˆ¶è®¿é—®</h2><p>åŸæœ¬åŒçº§æ–‡ä»¶å¤¹ä¸‹çš„æºæ–‡ä»¶å¯ä»¥ç”¨<code>extern</code>å…³é”®å­—å£°æ˜å‡½æ•°ï¼Œç„¶åå»å…¶å®ƒæºæ–‡ä»¶çš„å…¨å±€å‡½æ•°ä¸­å¯»æ‰¾<code>å®ç°æ–¹å¼</code>,ä½†å¦‚æœç”¨<code>static</code>ä¿®é¥°æœ¬åœ°å…¨å±€å‡½æ•°ï¼Œé‚£ä¹ˆè¿™ä¸ªå…¨å±€å‡½æ•°çš„å®ç°åªèƒ½åœ¨æœ¬æ–‡ä»¶è°ƒç”¨ï¼Œè€Œå…¶å®ƒæ–‡ä»¶çœ‹ä¸åˆ°å®ƒ</p><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/PixPin_2024-07-03_12-02-16.png"></p><h1 id="C-ç±»å’Œå¯¹è±¡"><a href="#C-ç±»å’Œå¯¹è±¡" class="headerlink" title="C++ç±»å’Œå¯¹è±¡"></a>C++ç±»å’Œå¯¹è±¡</h1><h2 id="æˆå‘˜å˜é‡-é™æ€æˆå‘˜-å…¨å±€å˜é‡"><a href="#æˆå‘˜å˜é‡-é™æ€æˆå‘˜-å…¨å±€å˜é‡" class="headerlink" title="æˆå‘˜å˜é‡-&gt;é™æ€æˆå‘˜ (å…¨å±€å˜é‡)"></a>æˆå‘˜å˜é‡-&gt;é™æ€æˆå‘˜ (å…¨å±€å˜é‡)</h2><p>åŸæœ¬å£°æ˜çš„æˆå‘˜å˜é‡åœ¨å®ä¾‹åŒ–åï¼Œå±äºç”±<code>ç±»</code>å®ä¾‹åŒ–å‡ºæ¥çš„<code>å¯¹è±¡</code>ï¼Œç”Ÿå‘½å‘¨æœŸä¸æ‰€å±å¯¹è±¡ç›¸åŒï¼Œä½†åœ¨åŠ äº†<code>static</code>åï¼Œè¯¥å˜é‡å±äºè¯¥ç±»åŸŸä¸­çš„å…¨å±€å˜é‡ï¼Œä¸å†å±äºæŸä¸ª<strong>å…·ä½“</strong>çš„<code>å¯¹è±¡</code></p><p><strong>åˆå§‹åŒ–</strong>: å› ä¸ºå·²ç»ä¸å±äºæŸä¸€ä¸ªå¯¹è±¡ï¼Œåˆå§‹åŒ–ä¹Ÿä¸èƒ½åœ¨ç±»çš„æ¥å£ä¸­å®Œæˆäº†ï¼Œå› æ­¤åœ¨ç±»ä¸­å£°æ˜<code>static</code>æˆå‘˜å˜é‡åï¼Œ<strong>å¿…é¡»</strong>åœ¨å…¨å±€åŒºåˆå§‹åŒ–<code>ç±»åŸŸ</code>ä¸­çš„æˆå‘˜å˜é‡ã€‚  #<em>åœ¨mainå‡½æ•°ç­‰éå…¨å±€åŸŸä¸­æ— æ³•åˆå§‹åŒ–</em></p><p>å¸¸è§åº”ç”¨ï¼šå¼•ç”¨è®¡æ•°</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">A</span>()</span><br><span class="line">&#123;</span><br><span class="line">cnt++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="type">static</span> <span class="type">int</span> cnt;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> A::cnt = <span class="number">0</span>;</span><br></pre></td></tr></table></figure><h2 id="æˆå‘˜å‡½æ•°-é™æ€æˆå‘˜å‡½æ•°-ä¸å«thisæŒ‡é’ˆ"><a href="#æˆå‘˜å‡½æ•°-é™æ€æˆå‘˜å‡½æ•°-ä¸å«thisæŒ‡é’ˆ" class="headerlink" title="æˆå‘˜å‡½æ•°-&gt;é™æ€æˆå‘˜å‡½æ•° (ä¸å«thisæŒ‡é’ˆ)"></a>æˆå‘˜å‡½æ•°-&gt;é™æ€æˆå‘˜å‡½æ•° (ä¸å«thisæŒ‡é’ˆ)</h2><p>ä¸€èˆ¬å£°æ˜åœ¨ç±»ä¸­çš„æˆå‘˜å‡½æ•°çš„å‚æ•°åˆ—è¡¨éšè—<code>this</code>æŒ‡é’ˆï¼Œè¦è°ƒç”¨å‡½æ•°æ—¶å¾—ç”¨ç±»å®ä¾‹åŒ–å‡ºçš„<code>å¯¹è±¡</code>æ¥è°ƒç”¨ï¼Œç”±è¿™ä¸ªå¯¹è±¡æä¾›<code>this</code>æŒ‡é’ˆ</p><p>è€Œä½¿ç”¨<code>static</code>ä¿®é¥°åçš„é™æ€æˆå‘˜å‡½æ•°ä¸å«<code>this</code>æŒ‡é’ˆï¼Œè¯¥å‡½æ•°å±äºæ•´ä¸ªç±»åŸŸï¼Œè°ƒç”¨æ—¶ä½¿ç”¨ç±»åŸŸè°ƒç”¨</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">A</span>()</span><br><span class="line">&#123;</span><br><span class="line">cnt++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">static</span> <span class="type">int</span> <span class="title">getCNT</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> cnt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="type">static</span> <span class="type">int</span> cnt;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> A::cnt = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    A a,b,c;</span><br><span class="line">    cout&lt;&lt;A::<span class="built_in">getCNT</span>();<span class="comment">//æ­¤æ—¶è¾“å‡º3</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>å½’å¹¶æ’åº</title>
      <link href="/2024/06/28/mergesort/"/>
      <url>/2024/06/28/mergesort/</url>
      
        <content type="html"><![CDATA[<hr><p>æ—¶é—´å¤æ‚åº¦: O(nlogn)<br>ç©ºé—´å¤æ‚åº¦: O(n)<br>ç¨³å®šæ€§ï¼š ç¨³å®š<br>å®ç°è¯­è¨€: C&#x2F;C++</p><hr><h1 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h1><h2 id="æ€æƒ³"><a href="#æ€æƒ³" class="headerlink" title="æ€æƒ³"></a>æ€æƒ³</h2><p>è¿™é‡Œé‡‡ç”¨çš„æ˜¯<strong>åˆ†æ²»</strong>çš„æ€æƒ³ï¼Œä½†ä¸<code>å¿«é€Ÿæ’åº</code>ç›¸åçš„æ˜¯ï¼Œå½’å¹¶æ’åºé‡‡ç”¨çš„æ˜¯å…ˆåˆ†æ²»å†åˆå¹¶ã€‚</p><p>å·²çŸ¥åœ¨æœ‰é¢å¤–ç©ºé—´çš„æƒ…å†µä¸‹ï¼Œåˆå¹¶ä¸¤ä¸ª<strong>æœ‰åº</strong>æ•°ç»„å¾—åˆ°ä¸€ä¸ªæ–°çš„è¾ƒé•¿æœ‰åºæ•°ç»„æ˜¯å¾ˆé«˜æ•ˆçš„ã€‚ æ‰€ä»¥èƒ½ä¸èƒ½æŠŠä¸€ä¸ªä»»æ„æ•°ç»„åˆ†æˆç”±å·¦å³ä¸¤ä¸ªæœ‰åºæ•°ç»„ç»„æˆç„¶ååˆå¹¶æˆæœ‰åºæ•°ç»„å‘¢ï¼Ÿ</p><p>æ˜¾ç„¶ä¸èƒ½ï¼Œå¤§éƒ¨åˆ†æƒ…å†µå¹¶ä¸èƒ½åˆ†æˆä¸¤ä¸ªæœ‰åºæ•°ç»„ï¼Œä½†å¦‚æœåœ¨æ­¤ä¹‹å‰ç”¨åŒæ ·çš„æ–¹æ³•ï¼ˆè¿™é‡Œé‡‡ç”¨é€’å½’ï¼‰äº‹å…ˆæ’åºå·¦å³ä¸¤éƒ¨åˆ†å‘¢ï¼Ÿå¤§éƒ¨åˆ†æƒ…å†µä¾ç„¶ä¸èƒ½ï¼Œå› æ­¤è¿™ä¸ªé€’å½’ä¼šä¸€ç›´é€’æ¨ä¸‹å»ï¼Œæœ€ç»ˆå¾…æ’åºåŒºé—´<strong>ä¸æ–­ç¼©å°</strong>,åˆ°åªå‰©ä¸€ä¸ªæˆ–é›¶ä¸ªå…ƒç´ ï¼Œæ­¤æ—¶å°±å¯ä»¥å°†å…¶çœ‹ä¸ºæœ‰åºæ•°ç»„äº†,ä¹Ÿå°±æ˜¯è¯´é€’å½’åœ¨è¿™é‡Œåœæ­¢ï¼Œå¯ä»¥ä¸€è·¯åˆå¹¶æœ‰åºæ•°ç»„ä¸€è·¯å›å½’ä¸Šå»äº†</p><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/PixPin_2024-07-02_21-29-34.png"></p><h2 id="åˆ†æ²»"><a href="#åˆ†æ²»" class="headerlink" title="åˆ†æ²»"></a>åˆ†æ²»</h2><p>è¿™é‡Œä½¿ç”¨å·¦å³æŒ‡é’ˆ<strong>æ§åˆ¶å¾…æ’åºåŒºé—´</strong>ï¼ˆè¿­ä»£å™¨ä¹Ÿè¡Œï¼‰,å¹¶é‡‡ç”¨é€’å½’çš„æ–¹å¼å½¢è±¡åœ°å®Œæˆåˆ†æ²»æ“ä½œ</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> _MergeSort(vector&lt;<span class="type">int</span>&gt;&amp; arr,<span class="type">int</span> left,<span class="type">int</span> right,vector&lt;<span class="type">int</span>&gt;&amp;tmp)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//åˆ†æ²»</span></span><br><span class="line">    <span class="keyword">if</span>(left &gt;= right) <span class="keyword">return</span>;<span class="comment">//é€’å½’å‡ºå£</span></span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> mid = (left+right)/<span class="number">2</span>;</span><br><span class="line">    _MergeSort(arr,left,mid,tmp);<span class="comment">//æ’åºå·¦åŠè¾¹</span></span><br><span class="line">    _MergeSort(arr,mid+<span class="number">1</span>,right,tmp);<span class="comment">//æ’åºå³åŠè¾¹</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆå¹¶æ•°ç»„</span></span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MergeSort</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; arr)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">tmp</span><span class="params">(arr.size())</span></span>;<span class="comment">//ç”¨tmpå¼€è¾Ÿé¢å¤–ç©ºé—´ç”¨äºåˆå¹¶æ•°ç»„</span></span><br><span class="line">    _MergeSort(arr,<span class="number">0</span>,arr.<span class="built_in">size</span>()<span class="number">-1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆå¹¶æœ‰åºæ•°ç»„"><a href="#åˆå¹¶æœ‰åºæ•°ç»„" class="headerlink" title="åˆå¹¶æœ‰åºæ•°ç»„"></a>åˆå¹¶æœ‰åºæ•°ç»„</h2><p>å› ä¸ºåˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„<strong>éš¾ä»¥åŸåœ°</strong>å®Œæˆï¼Œæ‰€ä»¥è¦å€ŸåŠ©<code>tmp</code>æ•°ç»„æä¾›é¢å¤–ç©ºé—´ã€‚</p><p>å…·ä½“åšæ³•å°±æ˜¯ç”¨ä¸¤ä¸ªæŒ‡é’ˆåˆ†åˆ«ä»ä¸¤ä¸ªæ•°ç»„ä¸­æŒ‘æœ€å°å€¼ï¼Œç„¶åç”¨ç¬¬ä¸‰ä¸ªæŒ‡é’ˆä»å·¦å‘å³å¡«åˆ°<code>tmp</code>ä¸­ï¼Œæœ€åå†æ‹·è´è‡³åŸæ•°ç»„</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> _MergeSort(vector&lt;<span class="type">int</span>&gt;&amp; arr,<span class="type">int</span> left,<span class="type">int</span> right,vector&lt;<span class="type">int</span>&gt;&amp;tmp)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//åˆ†æ²»</span></span><br><span class="line">    <span class="keyword">if</span>(left &gt;= right) <span class="keyword">return</span>;<span class="comment">//é€’å½’å‡ºå£</span></span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> mid = (left+right)/<span class="number">2</span>;</span><br><span class="line">    _MergeSort(arr,left,mid,tmp);<span class="comment">//æ’åºå·¦åŠè¾¹</span></span><br><span class="line">    _MergeSort(arr,mid+<span class="number">1</span>,right,tmp);<span class="comment">//æ’åºå³åŠè¾¹</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆå¹¶æ•°ç»„</span></span><br><span class="line">    <span class="type">int</span> cur1 = left;</span><br><span class="line"><span class="type">int</span> cur2 = mid + <span class="number">1</span>;</span><br><span class="line"><span class="type">int</span> cur = left;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (cur1 &lt;= mid &amp;&amp; cur2 &lt;= right)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (arr[cur1] &lt; arr[cur2])</span><br><span class="line">&#123;</span><br><span class="line">tmp[cur++] = arr[cur1++];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">tmp[cur++] = arr[cur2++];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (cur1 &lt;= left)</span><br><span class="line">tmp[cur++] = arr[cur1++];</span><br><span class="line"><span class="keyword">while</span> (cur2 &lt;= right)</span><br><span class="line">tmp[cur++] = arr[cur2++];</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = left; i &lt;= right; i++)</span><br><span class="line">arr[i] = tmp[i];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MergeSort</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; arr)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">tmp</span><span class="params">(arr.size())</span></span>;<span class="comment">//ç”¨tmpå¼€è¾Ÿé¢å¤–ç©ºé—´ç”¨äºåˆå¹¶æ•°ç»„</span></span><br><span class="line">    _MergeSort(arr,<span class="number">0</span>,arr.<span class="built_in">size</span>()<span class="number">-1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šå°±æ˜¯C++ç‰ˆçš„å®Œæ•´ä»£ç ,ä¸‹é¢å†æä¾›<code>C</code>è¯­è¨€ç‰ˆçš„</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> _MergeSort(<span class="type">int</span>* arr, <span class="type">int</span> sz, <span class="type">int</span> left, <span class="type">int</span> right, <span class="type">int</span>* tmp)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (left &gt;= right) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> mid = (left + right) / <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">_MergeSort(arr,sz ,left, mid, tmp);</span><br><span class="line">_MergeSort(arr, sz, mid + <span class="number">1</span>,right, tmp);</span><br><span class="line"><span class="type">int</span> cur1 = left, cur2 = mid + <span class="number">1</span>, cur = left;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (cur1 &lt;= mid &amp;&amp; cur2 &lt;= right)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (arr[cur1] &lt; arr[cur2])</span><br><span class="line">tmp[cur++] = arr[cur1++];</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">tmp[cur++] = arr[cur2++];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (cur1 &lt;= mid)</span><br><span class="line">tmp[cur++] = arr[cur1++];</span><br><span class="line"><span class="keyword">while</span> (cur2 &lt;= right)</span><br><span class="line">tmp[cur++] = arr[cur2++];</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = left; i &lt;= right; i++)</span><br><span class="line">arr[i] = tmp[i];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">MergeSort</span><span class="params">(<span class="type">int</span>* arr, <span class="type">int</span> sz)</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="type">int</span>* tmp = (<span class="type">int</span>*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="type">int</span>) * sz);</span><br><span class="line">_MergeSort(arr, sz, <span class="number">0</span>, sz - <span class="number">1</span>, tmp);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h1><p>å½’å¹¶æ’åºçš„åŸç†ä¹ä¸€çœ‹å¾ˆå“äººï¼Œå¥½åƒå¾ˆé«˜æ·±çš„æ ·å­ï¼Œä½†å…¶å®å¤šä¸Šæ‰‹ç»ƒç»ƒï¼Œå¤šè¯•ç€ç‹¬ç«‹æ•²ä»£ç å°±èƒ½æŒæ¡å…¶ç²¾é«“äº†ï¼Œä¹‹åæ‰‹æ’•å½’å¹¶æ’åºä¸è¦å¤ªç®€å•</p>]]></content>
      
      
      
        <tags>
            
            <tag> æ’åº ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>=Linux=ä¸€æ­¥æ­¥è‡ªå·±å†™ä¸€ä¸ªshellç¨‹åº</title>
      <link href="/2024/06/04/myshell/"/>
      <url>/2024/06/04/myshell/</url>
      
        <content type="html"><![CDATA[<hr><p>ç³»ç»Ÿï¼šé˜¿é‡Œäº‘æœåŠ¡å™¨Linux CentOs 7</p><p>ç¼–è¾‘å™¨: vim </p><p>ç¼–è¯‘å™¨: gcc (æ”¯æŒC99)</p><hr><h1 id="æ–‡ä»¶"><a href="#æ–‡ä»¶" class="headerlink" title="æ–‡ä»¶"></a>æ–‡ä»¶</h1><p>æœ¬æ¬¡å†™çš„ç¨‹åºè¾ƒä¸ºç®€å•ï¼Œæ‰€ä»¥åªä½¿ç”¨ä¸€ä¸ªæºæ–‡ä»¶</p><p>æ‰€ä»¥åœ¨shellä¸­<code>touch</code>ä¸€ä¸ª<code>makefile</code>å’Œä¸€ä¸ª<code>myshell.c</code></p><blockquote><p>shell</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">touch makefile</span><br><span class="line">touch myshell.c</span><br></pre></td></tr></table></figure><p>ç„¶åç¼–è¾‘<code>makefile</code>æ–‡ä»¶</p><blockquote><p>makefile</p></blockquote><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1 myshell:myshell.c                         </span><br><span class="line">  gcc -o <span class="variable">$@</span> <span class="variable">$^</span> -std=c99</span><br><span class="line"></span><br><span class="line"><span class="meta"><span class="keyword">.PHONY</span>:clean</span></span><br><span class="line"><span class="section">clean:</span></span><br><span class="line">   rm -f myshell</span><br></pre></td></tr></table></figure><h1 id="å¤´æ–‡ä»¶"><a href="#å¤´æ–‡ä»¶" class="headerlink" title="å¤´æ–‡ä»¶"></a>å¤´æ–‡ä»¶</h1><p>æœ¬ç¨‹åºå› å‡½æ•°è¾ƒæ‚ï¼Œä¼š<code>include</code>è¾ƒå¤šå¤´æ–‡ä»¶</p><blockquote><p>myshell.c</p></blockquote><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;assert.h&gt;</span></span></span><br></pre></td></tr></table></figure><h1 id="å®å®šä¹‰"><a href="#å®å®šä¹‰" class="headerlink" title="å®å®šä¹‰"></a>å®å®šä¹‰</h1><p>ä¸ºäº†ç»Ÿä¸€ä¿®æ”¹éƒ¨åˆ†å‚æ•°ï¼Œä»¥åŠä½¿å‚æ•°æ›´æ˜“è¯»ï¼Œè¿™é‡Œä½¿ç”¨éƒ¨åˆ†å®å®šä¹‰</p><blockquote><p>myshell.c</p></blockquote><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> LEFT <span class="string">&quot;[&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> RIGHT <span class="string">&quot;]&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> LABEL <span class="string">&quot;# &quot;</span><span class="comment">//æ³¨æ„æœ‰ä¸ªç©ºæ ¼</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> LINE_SIZE 1024</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ARGC_SIZE 32</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> DLIM <span class="string">&quot; \t&quot;</span> <span class="comment">//å¯èƒ½æœ‰å¤šä¸ªåˆ†éš”ç¬¦</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> EXIT_CODE 446 <span class="comment">//ç‰¹æ®Šçš„é€€å‡ºç ï¼Œè¡¨ç¤ºç¨‹åºæœªæ­£å¸¸é€€å‡ºï¼Œå…·ä½“æ•°å­—ç›®å‰æ²¡æœ‰çº¦å®š</span></span></span><br></pre></td></tr></table></figure><h1 id="å…¨å±€å˜é‡"><a href="#å…¨å±€å˜é‡" class="headerlink" title="å…¨å±€å˜é‡"></a>å…¨å±€å˜é‡</h1><p>æˆ‘ä»¬éœ€è¦ç”¨å…¨å±€çš„å˜é‡æ¥å­˜å‚¨<code>å‘½ä»¤è¡Œ</code>(command line)å’Œ<code>å‚æ•°åŒ…</code></p><blockquote><p>myshell.c</p></blockquote><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span> cline[LINE_SIZE];</span><br><span class="line"><span class="type">char</span>* arg[ARGC_SIZE];</span><br><span class="line"><span class="type">int</span> last_code = <span class="number">0</span>;</span><br></pre></td></tr></table></figure><h1 id="ç”¨Interactå‡½æ•°å®ç°äº¤äº’åŠŸèƒ½"><a href="#ç”¨Interactå‡½æ•°å®ç°äº¤äº’åŠŸèƒ½" class="headerlink" title="ç”¨Interactå‡½æ•°å®ç°äº¤äº’åŠŸèƒ½"></a>ç”¨<code>Interact</code>å‡½æ•°å®ç°äº¤äº’åŠŸèƒ½</h1><h2 id="æ‰“å°å‘½ä»¤è¡Œå¤´éƒ¨"><a href="#æ‰“å°å‘½ä»¤è¡Œå¤´éƒ¨" class="headerlink" title="æ‰“å°å‘½ä»¤è¡Œå¤´éƒ¨"></a>æ‰“å°å‘½ä»¤è¡Œå¤´éƒ¨</h2><p>ä¸ºäº†æ‰“å°å‘½ä»¤è¡Œå¤´éƒ¨ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“ä¸‰æ ·ä¸œè¥¿ï¼šç”¨æˆ·ï¼Œä¸»æœºï¼Œå·¥ä½œè·¯å¾„ï¼Œè¿™é‡ŒåŒ…è£…äº†ä¸‰ä¸ªå‡½æ•°æ¥åˆ†åˆ«è°ƒç”¨<code>getenv</code>å‡½æ•°</p><blockquote><p>myshell.c</p></blockquote><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">const</span> <span class="type">char</span>* <span class="title function_">getusername</span><span class="params">()</span><span class="comment">//è·å–ç”¨æˆ·å</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> getenv(<span class="string">&quot;USER&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">char</span>* <span class="title function_">gethostname</span><span class="params">()</span><span class="comment">//è·å–ä¸»æœºå</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> getenv(<span class="string">&quot;HOSTNAME&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">char</span>* <span class="title function_">getpwd</span><span class="params">()</span><span class="comment">//è·å–å·¥ä½œè·¯å¾„</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> getenv(<span class="string">&quot;PWD&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å› æ­¤æ‰“å°çš„ä»£ç ä¸º</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">printf</span>(LEFT <span class="string">&quot;%s@%s %s&quot;</span> RIGHT LABLE,getusername(),gethostname(),getpwd());</span><br></pre></td></tr></table></figure><h2 id="è·å–å‘½ä»¤è¡Œ"><a href="#è·å–å‘½ä»¤è¡Œ" class="headerlink" title="è·å–å‘½ä»¤è¡Œ"></a>è·å–å‘½ä»¤è¡Œ</h2><p>ä½¿ç”¨Linuxçš„ç»ˆç«¯æ—¶ï¼Œæˆ‘ä»¬ä¼šæ‰“<code>å‘½ä»¤+ç©ºæ ¼+å‚æ•°...</code>,å› æ­¤æˆ‘ä»¬çš„<code>myshell</code>ç¨‹åºä¹Ÿè¦æ”¯æŒè¿ç©ºæ ¼ä¸€èµ·è¯»å…¥,è¯»å…¥ä¸€æ•´è¡Œå‘½ä»¤</p><p>æ‰€ä»¥<code>scanf</code>å¹¶ä¸é€‚åˆç”¨æ¥è¯»å…¥å‘½ä»¤ï¼Œè¿™æ¬¡æˆ‘ä»¬ä½¿ç”¨<code>fgets</code>å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å¯ä»¥ä»<code>æ–‡ä»¶æµ</code>ä¸­æ•´è¡Œè¯»å…¥ï¼Œè€Œæ­£å¥½åœ¨ç»ˆç«¯è¾“å…¥çš„å­—ç¬¦éƒ½å‚¨å­˜åœ¨<code>æ ‡å‡†è¾“å…¥æµ</code>,å³<code>stdin</code>ä¸­,å› æ­¤å¯ä»¥ç”¨ä¸€è¡Œä»£ç è·å–<code>å‘½ä»¤è¡Œ</code></p><p>ä¸ºå®‰å…¨è€ƒè™‘ï¼Œè¿™é‡Œä½¿ç”¨ä¸€ä¸ªä¸´æ—¶å˜é‡<code>s</code>æ¥æ¥å—<code>fgets</code>çš„è¿”å›å€¼å¹¶ç”¨<code>assert</code>åˆ¤ç©º,ä½†åœ¨<code>release</code>ç‰ˆæœ¬ä¸­<code>assert</code>ä¸è¢«ç¼–è¯‘ï¼Œå¯¼è‡´å˜é‡<code>s</code>æœªè¢«è°ƒç”¨ï¼Œè€ŒæŠ¥è­¦å‘Šï¼ˆç”šè‡³æŠ¥é”™ï¼‰ï¼Œæ‰€ä»¥è¿˜è¦å†åŠ ä¸€å¥<code>(void) s</code>,åªä¸ºäº†è°ƒç”¨ä¸€ä¸‹<code>s</code>,æ²¡æœ‰æ›´å¤šç”¨å¤„</p><p>ä¹‹åä¾¿å®Œæˆäº†æ–‡ä»¶æµçš„è¯»å–</p><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/PixPin_2024-06-04_16-25-34.png"></p><p>ä½†æ­¤æ—¶è·å¾—çš„å‘½ä»¤è¡Œåœ¨<code>\0</code>å‰ä»¥<code>\n</code>ç»“å°¾ï¼Œæ‰€ä»¥è¦æŠŠ<code>\n</code>æ›¿æ¢ä¸º<code>\0</code></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span> *s = fgets(cline,size,<span class="built_in">stdin</span>);</span><br><span class="line">assert(s);<span class="comment">//sä¸ºç©ºæ—¶æŠ¥é”™</span></span><br><span class="line">(<span class="type">void</span>) s;<span class="comment">//é˜²æ­¢å› æœªè°ƒç”¨sè€ŒæŠ¥è­¦å‘Š</span></span><br><span class="line"></span><br><span class="line">cline[<span class="built_in">strlen</span>(cline) - <span class="number">1</span>] = <span class="string">&#x27;\0&#x27;</span>;</span><br></pre></td></tr></table></figure><h2 id="æ•´ä¸ªå‡½æ•°ä½“"><a href="#æ•´ä¸ªå‡½æ•°ä½“" class="headerlink" title="æ•´ä¸ªå‡½æ•°ä½“"></a>æ•´ä¸ªå‡½æ•°ä½“</h2><blockquote><p>myshell.c</p></blockquote><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">Interact</span><span class="params">(<span class="type">char</span>* cline,<span class="type">int</span> size)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">printf</span>(LEFT <span class="string">&quot;%s@%s %s&quot;</span> RIGHT LABLE,getusername(),gethostname(),getpwd());<span class="comment">//æ‰“å°å¤´éƒ¨</span></span><br><span class="line">    fgets(cline,size,<span class="built_in">stdin</span>);<span class="comment">//è·å–å‘½ä»¤è¡Œ</span></span><br><span class="line">    assert(s);<span class="comment">//sä¸ºç©ºæ—¶æŠ¥é”™</span></span><br><span class="line">    (<span class="type">void</span>) s;<span class="comment">//é˜²æ­¢å› æœªè°ƒç”¨sè€ŒæŠ¥è­¦å‘Š</span></span><br><span class="line">    cline[<span class="built_in">strlen</span>(cline) - <span class="number">1</span>] = <span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;echo: %s\n&quot;</span>);<span class="comment">//å†™ä¸€æ®µæµ‹ä¸€æ®µçš„æµ‹è¯•ä»£ç ï¼Œè¾“å‡ºè·å–çš„å‘½ä»¤è¡Œ,æµ‹å®Œå¯åˆ </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h2><p>å…ˆåœ¨<code>main</code>å‡½æ•°é‡Œè°ƒç”¨ä¸€æ¬¡<code>Interact</code>å‡½æ•°æµ‹è¯•ä¸€ä¸‹</p><p>æˆ‘çš„æµ‹è¯•ç»“æœå¦‚ä¸‹</p><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/PixPin_2024-06-04_16-42-55.png"></p><p>å¯ä»¥çœ‹åˆ°è¾¾åˆ°äº†é¢„æœŸæ•ˆæœï¼Œä½†æ˜¯<code>å·¥ä½œè·¯å¾„</code>å¤ªé•¿äº†ï¼Œè¿˜æ˜¯å­¦ä¸€å­¦Linuxçš„å±•ç¤ºæ–¹å¼å§ï¼Œæˆ‘ä»¬æ¥æŠŠ<code>getpwd</code>å‡½æ•°é‡å†™ä¸€ä¸‹</p><h2 id="é‡å†™getpwd"><a href="#é‡å†™getpwd" class="headerlink" title="é‡å†™getpwd()"></a>é‡å†™<code>getpwd()</code></h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">const</span> <span class="type">char</span>* <span class="title function_">getpwd</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">const</span> <span class="type">char</span>* pwd = getenv(<span class="string">&quot;PWD&quot;</span>);</span><br><span class="line">    <span class="type">int</span> n = <span class="built_in">strlen</span>(pwd);</span><br><span class="line">    <span class="keyword">while</span>(n)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(pwd[n] == <span class="string">&#x27;/&#x27;</span>) <span class="keyword">break</span>;</span><br><span class="line">        n--;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> (pwd+n+<span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·æ‰“å°å‡ºçš„å·¥ä½œè·¯å¾„ä»…ä¸ºå½“å‰æ–‡ä»¶å¤¹ï¼Œå¯ä»¥ç¼©çŸ­å¾ˆå¤šé•¿åº¦</p><h1 id="åˆ†å‰²å‘½ä»¤è¡Œ"><a href="#åˆ†å‰²å‘½ä»¤è¡Œ" class="headerlink" title="åˆ†å‰²å‘½ä»¤è¡Œ"></a>åˆ†å‰²å‘½ä»¤è¡Œ</h1><p>ç°åœ¨çš„<code>cline</code>ä¸­çš„å‘½ä»¤è¡Œè¿˜æ˜¯å®Œæ•´çš„ä¸€ä¸²ï¼Œéœ€è¦åˆ†å‰²å‡ºå‘½ä»¤å’Œå‚æ•°åŒ…ï¼Œå› æ­¤æˆ‘ä»¬ä¹Ÿå°è£…ä¸€ä¸ªå‡½æ•°<code>Splitcline</code></p><p>è¿™é‡Œä½¿ç”¨çš„æ˜¯<code>string.h</code>ä¸­çš„<code>strtok</code>å‡½æ•°ï¼Œå¯ä»¥ç”¨ç‰¹å®šçš„å•ä¸ªæˆ–å¤šä¸ªå­—ç¬¦å°†å­—ç¬¦ä¸²åˆ†å‰²</p><blockquote><p>myshell.c</p></blockquote><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">Splitcline</span><span class="params">(<span class="type">char</span>*cline,<span class="type">char</span>** argv)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">memset</span>(argv,<span class="number">0</span>,<span class="keyword">sizeof</span>(<span class="type">char</span>*) * ARGV_SIZE);</span><br><span class="line">    <span class="type">int</span> i = <span class="number">1</span>;</span><br><span class="line">    argv[<span class="number">0</span>] = strtok(cline,DLIM);</span><br><span class="line">    <span class="keyword">if</span>(argv[<span class="number">0</span>])</span><br><span class="line">        <span class="keyword">while</span>(argv[i++] == strtok(<span class="literal">NULL</span>,DLIM));</span><br><span class="line"></span><br><span class="line">    *argv_n = i<span class="number">-1</span>;<span class="comment">//è¾“å‡ºå‹å‚æ•°</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å†å†™ä¸€æ®µæµ‹è¯•ä»£ç </p><blockquote><p>myshell.c</p></blockquote><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    Interact(cline,<span class="keyword">sizeof</span>(cline));</span><br><span class="line"></span><br><span class="line">    Splitcline(cline,argv);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>;argv[i];i++)<span class="comment">//é€è¡Œæ‰“å°è¾“å‡ºargvçš„å†…å®¹</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>,argv[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="æ‰§è¡Œå¤–éƒ¨å‘½ä»¤"><a href="#æ‰§è¡Œå¤–éƒ¨å‘½ä»¤" class="headerlink" title="æ‰§è¡Œå¤–éƒ¨å‘½ä»¤"></a>æ‰§è¡Œå¤–éƒ¨å‘½ä»¤</h1><p>é€šè¿‡<code>fork</code>å‡½æ•°åˆ›å»ºå­è¿›ç¨‹ï¼Œç„¶åç”¨<code>execvp</code>æ›¿æ¢å­è¿›ç¨‹ï¼Œé€šè¿‡ç¯å¢ƒå˜é‡<code>PATH</code>æ‰¾åˆ°å¤–éƒ¨å‘½ä»¤å¹¶æ›¿æ¢åˆ°å­è¿›ç¨‹æ‰§è¡Œï¼ŒåŒæ—¶çˆ¶è¿›ç¨‹<code>myshell</code>è°ƒç”¨<code>waitpid</code>å‡½æ•°ç­‰å¾…å­è¿›ç¨‹ç»“æŸï¼Œä¿è¯<code>myshell</code>ç¨‹åºæ­£å¸¸è¿è¡Œ</p><blockquote><p>myshell.c</p></blockquote><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">ExternalCommand</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">pid_t</span> id = fork();</span><br><span class="line">    <span class="keyword">if</span>(id &lt;<span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        perror(<span class="string">&quot;fork&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(id == <span class="number">0</span>)<span class="comment">//child</span></span><br><span class="line">    &#123;</span><br><span class="line">        execvp(argv[<span class="number">0</span>],argv+<span class="number">1</span>);<span class="comment">//+1ä¹‹åæ‰æ˜¯å‚æ•°åˆ—è¡¨</span></span><br><span class="line">        <span class="built_in">exit</span>(EXIT_CODE);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> status = <span class="number">0</span>;</span><br><span class="line">        <span class="type">pid_t</span> rid = waitpid(id,&amp;status,<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">if</span>(rid == id)</span><br><span class="line">        &#123;</span><br><span class="line">            last_code = WEXITSTATUS(status);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="æ‰§è¡Œå†…å»ºå‘½ä»¤"><a href="#æ‰§è¡Œå†…å»ºå‘½ä»¤" class="headerlink" title="æ‰§è¡Œå†…å»ºå‘½ä»¤"></a>æ‰§è¡Œå†…å»ºå‘½ä»¤</h1><p><code>shell</code>ä¸­å¹¶ä¸æ˜¯æ‰€æœ‰çš„å‘½ä»¤éƒ½ç”±å­è¿›ç¨‹å®Œæˆçš„ï¼Œæ¯”å¦‚ç”¨<code>cd</code>å‘½ä»¤æ”¹å˜å·¥ä½œè·¯å¾„ï¼Œå°±ä¸èƒ½è®©å­è¿›ç¨‹å»æ‰§è¡Œ(<del>å¦åˆ™åªæ˜¯æ”¹äº†å­è¿›ç¨‹çš„è·¯å¾„</del>),å› æ­¤æˆ‘ä»¬è¿˜éœ€è¦åŠ ä¸€ä¸ªå†…å»ºå‘½ä»¤æ¥å£</p><blockquote><p>myshell.c</p></blockquote><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">BuildCommand</span><span class="params">(<span class="type">char</span>* _argv[],<span class="type">int</span> _argv_n)</span><span class="comment">//å¤„ç†å†…å»ºå‘½ä»¤</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">if</span>(_argv_n == <span class="number">2</span> &amp;&amp; <span class="built_in">strcmp</span>(_argv[<span class="number">0</span>],<span class="string">&quot;cd&quot;</span>)== <span class="number">0</span>)<span class="comment">//ç‰¹æ®Šå¤„ç†çš„å‘½ä»¤1</span></span><br><span class="line">  &#123;</span><br><span class="line">    chdir(argv[<span class="number">1</span>]);</span><br><span class="line">    getpwd();</span><br><span class="line">    <span class="built_in">sprintf</span>(getenv(<span class="string">&quot;PWD&quot;</span>),<span class="string">&quot;%s&quot;</span>,pwd);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;<span class="comment">//å®Œæˆæ‰§è¡Œè¿”å›1</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//è¿˜å¯ä»¥ç»§ç»­else uf åŠ ç‰¹æ®Šå¤„ç†çš„å‘½ä»¤2,3,4,,,n</span></span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;<span class="comment">//æœªæ‰§è¡Œå†…å»ºå‘½ä»¤ã€‚è¿”å›0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="å®Œæˆæ¡†æ¶"><a href="#å®Œæˆæ¡†æ¶" class="headerlink" title="å®Œæˆæ¡†æ¶"></a>å®Œæˆæ¡†æ¶</h1><p>è‡³æ­¤ï¼ŒæŠŠ<code>main</code>å‡½æ•°ç»„ç»‡å¥½åï¼Œä¸€ä¸ªç®€å•çš„<code>shell</code>ä»£ç æ¡†æ¶å°±æ­å¥½äº†ï¼Œå¯ä»¥æ ¹æ®éœ€è¦ç»§ç»­æ‰©å±•<code>å†…å»ºå‘½ä»¤</code>çš„å†…å®¹ï¼Œæ¯”å¦‚å¯¼å‡ºç¯å¢ƒå˜é‡ï¼Œå®ç°<code>echo</code>æŒ‡ä»¤ç­‰ï¼ˆç•¥å†™ï¼‰ã€‚</p><blockquote><p>myshell.c</p></blockquote><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">   <span class="type">int</span> quit = <span class="number">0</span>;</span><br><span class="line">   <span class="keyword">while</span>(!quit)</span><br><span class="line">   &#123;</span><br><span class="line">     Interact(cline,<span class="keyword">sizeof</span>(cline));</span><br><span class="line">     <span class="type">int</span> argv_n;</span><br><span class="line">     Splitcline(cline,argv,&amp;argv_n);</span><br><span class="line"> </span><br><span class="line">     <span class="keyword">if</span>(argv_n == <span class="number">0</span> )<span class="keyword">continue</span>;</span><br><span class="line">     </span><br><span class="line">     <span class="type">int</span> flag = BuildCommand(argv,argv_n);</span><br><span class="line">     <span class="keyword">if</span>(!flag) ExeternalCommand();</span><br><span class="line">   &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;                            </span><br><span class="line">&#125;          </span><br></pre></td></tr></table></figure><h1 id="æ‹“å±•"><a href="#æ‹“å±•" class="headerlink" title="æ‹“å±•"></a>æ‹“å±•</h1><p>è¿™é‡Œçš„å‘½ä»¤è¡Œå¤„ç†å¹¶æ²¡æœ‰è€ƒè™‘<code>è¾“å…¥/è¾“å‡ºé‡å®šå‘</code>,æ‰€ä»¥ä»æœ‰è¾ƒå¤§çš„éœ€è¦å®Œå–„çš„åœ°æ–¹</p><h2 id="æºä»£ç "><a href="#æºä»£ç " class="headerlink" title="æºä»£ç "></a>æºä»£ç </h2><p><a href="https://github.com/sis-shen/Linux_Code">ç‚¹æˆ‘å»å¾€githubä»“åº“</a>ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> Linux C </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å †æ’åº</title>
      <link href="/2024/05/21/heap-sort/"/>
      <url>/2024/05/21/heap-sort/</url>
      
        <content type="html"><![CDATA[<h1 id="èƒŒæ™¯çŸ¥è¯†"><a href="#èƒŒæ™¯çŸ¥è¯†" class="headerlink" title="èƒŒæ™¯çŸ¥è¯†"></a>èƒŒæ™¯çŸ¥è¯†</h1><ul><li>çŸ¥é“ä»€ä¹ˆæ˜¯å¤§å †&#x2F;å°å †</li><li>æŒæ¡å¦‚ä½•å°†æ•°ç»„ä¸å®Œå…¨äºŒå‰æ ‘çš„æ˜ å°„å…³ç³»</li><li>æŒæ¡<code>å‘ä¸Šè°ƒæ•´æ³•</code>å’Œ<code>å‘ä¸‹è°ƒæ•´æ³•</code></li></ul><h2 id="å¤§å †-å°å †"><a href="#å¤§å †-å°å †" class="headerlink" title="å¤§å †&#x2F;å°å †"></a>å¤§å †&#x2F;å°å †</h2><p>å¤§å †çš„ç‰¹æ€§:æ¯ä¸€ä¸ªèŠ‚ç‚¹çš„å€¼éƒ½æ¯”å·¦å³å­©å­éƒ½å¤§,<code>æ ¹</code>çš„å€¼æ˜¯æ•´ä¸ªå¤§å †ä¸­<strong>æœ€å¤§çš„</strong><br>å°å †çš„ç‰¹æ€§:æ¯ä¸€ä¸ªèŠ‚ç‚¹çš„å€¼éƒ½æ¯”å·¦å³å­©å­éƒ½å°,<code>æ ¹</code>çš„å€¼æ˜¯æ•´ä¸ªå¤§å †ä¸­<strong>æœ€å°çš„</strong></p><p><strong>åé¢ä»¥å¤§å †ä¸ºä¾‹</strong></p><h2 id="æ•°ç»„æ˜ å°„æˆå®Œå…¨äºŒå‰æ ‘"><a href="#æ•°ç»„æ˜ å°„æˆå®Œå…¨äºŒå‰æ ‘" class="headerlink" title="æ•°ç»„æ˜ å°„æˆå®Œå…¨äºŒå‰æ ‘"></a>æ•°ç»„æ˜ å°„æˆå®Œå…¨äºŒå‰æ ‘</h2><p>ä»»ä½•ä¸€ä¸ªæ•°ç»„å¯ä»¥çœ‹æˆä¸€ä¸ª<code>å®Œå…¨äºŒå‰æ ‘</code>,ä¸‹æ ‡0ä¸ºäºŒå‰æ ‘çš„æ ¹</p><p>è€Œéå¸¸æ–¹ä¾¿çš„æ˜¯ï¼Œå·²çŸ¥ä¸€ä¸ªèŠ‚ç‚¹çš„ä¸‹æ ‡ï¼Œå¯ä»¥åˆ©ç”¨æ•°å­¦å…³ç³»æ±‚å‡ºæ ¹æˆ–å­©å­çš„ä¸‹æ ‡</p><blockquote><p>ä¸‹æ ‡å…³ç³»å¦‚ä¸‹ï¼ˆå˜é‡å‡ä¸ºä¸‹æ ‡ï¼‰</p></blockquote><ul><li><code>parent = (child-1)/2</code></li><li><code>left_child = parent*2+1</code></li><li><code>right_child = parent*2+2</code></li></ul><h2 id="å»ºå †æ–¹æ³•"><a href="#å»ºå †æ–¹æ³•" class="headerlink" title="å»ºå †æ–¹æ³•"></a>å»ºå †æ–¹æ³•</h2><h3 id="å‘ä¸Šè°ƒæ•´æ³•"><a href="#å‘ä¸Šè°ƒæ•´æ³•" class="headerlink" title="å‘ä¸Šè°ƒæ•´æ³•"></a>å‘ä¸Šè°ƒæ•´æ³•</h3><p>åœ¨å·²æœ‰ä¸€ä¸ªå¤§å †çš„<strong>å‰æä¸‹</strong>,æŠŠä¸€ä¸ªæ–°çš„æ•°æ®æ’å…¥åˆ°å †çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹(æ­¤æ—¶ç ´åå¤§å †çš„ç»“æ„),å†<strong>ä¸€è·¯</strong>å‘ä¸Šè°ƒæ•´,å¯ä»¥é‡æ–°å»ºå †</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">adjust_up</span><span class="params">(vector&lt;T&gt;&amp; arr, <span class="type">int</span> child)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> parent = (child - <span class="number">1</span>) / <span class="number">2</span>;</span><br><span class="line"><span class="keyword">while</span> (parent != child)<span class="comment">//parent == child == 0æ—¶</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (arr[parent] &lt; arr[child])<span class="comment">//ä¸æ»¡è¶³å¤§å †</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">swap</span>(arr[parent], arr[child]);<span class="comment">//äº¤æ¢</span></span><br><span class="line">child = parent;<span class="comment">//ç»§ç»­å‘ä¸Šè°ƒæ•´,è¿­ä»£childå’Œparent</span></span><br><span class="line">parent = (child - <span class="number">1</span>) / <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span><span class="comment">//å®Œæˆå»ºå †ï¼Œé€€å‡ºå¾ªç¯</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å‘ä¸‹è°ƒæ•´æ³•"><a href="#å‘ä¸‹è°ƒæ•´æ³•" class="headerlink" title="å‘ä¸‹è°ƒæ•´æ³•"></a>å‘ä¸‹è°ƒæ•´æ³•</h3><p>åœ¨å·²æœ‰ä¸€ä¸ªå¤§å †çš„<strong>å‰æä¸‹</strong>,æŠŠæ ¹çš„å€¼æ”¹å˜(æ­¤æ—¶ç ´åå¤§å †çš„ç»“æ„),å†<strong>ä¸€è·¯</strong>å‘ä¸‹è°ƒæ•´ï¼Œå¯ä»¥é‡æ–°å»ºå †</p><p>ä¸Šä¸€å¥ä¹Ÿå¯ä»¥ç­‰ä»·äº,å·¦å­æ ‘å’Œå³å­æ ‘éƒ½æ˜¯å¤§å †çš„å‰æä¸‹ï¼Œå°†æ ¹<strong>ä¸€è·¯</strong>å‘ä¸‹è°ƒæ•´ï¼Œå¯ä»¥é‡æ–°å»ºå †</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">adjust_down</span><span class="params">(vector&lt;T&gt;&amp; arr,<span class="type">int</span> sz , <span class="type">int</span> parent)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> child = parent * <span class="number">2</span> + <span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span> (child + <span class="number">1</span> &lt; sz &amp;&amp; arr[child + <span class="number">1</span>] &gt; arr[child]) child++;<span class="comment">//å–è¾ƒå¤§çš„å­©å­</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (child &lt; sz)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (arr[parent] &lt; arr[child])</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">swap</span>(arr[parent], arr[child]);</span><br><span class="line">parent = child;</span><br><span class="line"><span class="type">int</span> child = parent * <span class="number">2</span> + <span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span> (child &gt;= sz) <span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">if</span> (child + <span class="number">1</span> &lt; sz &amp;&amp; arr[child + <span class="number">1</span>] &gt; arr[child]) child++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ä¸»è¦æ€è·¯"><a href="#ä¸»è¦æ€è·¯" class="headerlink" title="ä¸»è¦æ€è·¯"></a>ä¸»è¦æ€è·¯</h1><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/PixPin_2024-05-21_12-40-09.png"></p><h2 id="å»ºå †"><a href="#å»ºå †" class="headerlink" title="å»ºå †"></a>å»ºå †</h2><p>ç”¨<code>å‘ä¸Šè°ƒæ•´æ³•</code>å’Œ<code>å‘ä¸‹è°ƒæ•´æ³•</code>éƒ½èƒ½å»ºå †,ä¸è¿‡<code>å‘ä¸Šè°ƒæ•´æ³•</code>å»ºå †æ€è·¯æ›´ç®€å•ï¼Œä¹Ÿæ›´å®¹æ˜“ä»£ç å®ç°ï¼Œåªéœ€è¦æŠŠç¬¬ä¸€ä¸ªå…ƒç´ å½“æˆç°æˆçš„å¤§å †ï¼Œç„¶åé€ä¸ªæ’å…¥å¹¶å‘ä¸Šè°ƒæ•´ã€‚<strong>ä¹Ÿå°±æ˜¯è¯´åªéœ€è¦å†™ä¸€ä¸ªå¾ªç¯</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å‘ä¸Šè°ƒæ•´æ³•å»ºå †</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; sz; i++)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">adjust_up</span>(arr, i);<span class="comment">//é€ä¸ªæ’å…¥å¹¶å‘ä¸Šè°ƒæ•´å»ºå †</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/PixPin_2024-05-21_19-45-09.png"></p><h2 id="æ’åº"><a href="#æ’åº" class="headerlink" title="æ’åº"></a>æ’åº</h2><p>æ­¤æ—¶çš„æ’åºæœ‰ä¸ªç‰¹ç‚¹ï¼Œé‚£å°±æ˜¯æˆ‘ä»¬è¦<strong>å€’ç€æ’</strong></p><p>å°½ç®¡æ­¤æ—¶æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ä¸º<code>æœ€å¤§å€¼</code>,ä¼¼ä¹åªéœ€è¦æŠŠå®ƒæ”¾åœ¨é‚£ï¼Œæ•´ä¸€ä¸ª<code>é™åº</code>æ’åˆ—ï¼Œå†æŠŠå‰©ä¸‹çš„å…ƒç´ å»ºä¸ªå †ï¼Œç¡®å®šç¬¬äºŒå¤§çš„æ•°â€¦<strong>ä½†æ˜¯</strong>ï¼Œæ­¤æ—¶æœ‰ä¸ªå¾ˆå¤§çš„é—®é¢˜ï¼Œå½“æŠŠå‰©ä¸‹çš„å…ƒç´ çœ‹ä½œå †æ—¶ï¼Œä¼šå‘ç°å‰é¢å»ºå †ç•™ä¸‹æ¥çš„å…³ç³»å…¨è¢«æ‰“ä¹±äº†(åŸæœ¬çˆ¶å­å…³ç³»,å…„å¼Ÿå…³ç³»ä¹±å¥—äº†),ä¹Ÿå°±æ˜¯è¯´è¦<code>å®Œå…¨é‡æ–°å»ºå †</code>,æå¤§åœ°æµªè´¹äº†ç¬¬ä¸€æ¬¡å»ºå †æ‰€å»ºç«‹çš„å…³ç³»</p><p>æ‰€ä»¥æˆ‘ä»¬è¦å°½å¯èƒ½<code>ä¿ç•™</code>åŸæ¥çš„å †,æ—¢ç„¶æŠŠä¸‹æ ‡<code>0</code>å¤„çš„èŠ‚ç‚¹é™¤å¤–ä¼šæå¤§åœ°å½±å“å †çš„å…³ç³»ï¼Œé‚£å°±æ”¹æˆæŠŠ<code>æœ€åä¸€ä¸ªå¶å­èŠ‚ç‚¹</code>é™¤å¤–,è¿™æ ·å¯¹åŸæ¥çš„å †å‡ ä¹æ²¡æœ‰æ”¹å˜ã€‚</p><p>ä½†å»ºå †é€‰å‡ºçš„<code>æœ€å¤§çš„</code>çš„å€¼åœ¨æ ¹å¤„,æ‰€ä»¥æŠŠ<code>æ ¹</code>å’Œ<code>æœ€åä¸€ä¸ªå¶å­èŠ‚ç‚¹</code>äº¤æ¢ï¼Œ<strong>äº¤æ¢å</strong>,æ­¤æ—¶<strong>å¾…æ’åº</strong>çš„æ•°ä¸­çš„<code>æœ€å¤§å€¼</code>ä»¥å®Œæˆæ’åºï¼ˆå³å€’ç€æ’ï¼‰,æŠŠ<code>æœ€åä¸€ä¸ªå¶å­èŠ‚ç‚¹</code>ä»å †ä¸­é™¤å¤–,å†ä»<code>æ ¹</code>å¼€å§‹ä¸€è·¯å‘ä¸‹è°ƒæ•´å³å¯é‡æ–°<code>å»ºå †</code>,å¦‚æ­¤å¾ªç¯</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = sz<span class="number">-1</span>; i &gt;= <span class="number">1</span>; i--)<span class="comment">//åˆ©ç”¨içš„å‡å°å°†å·²æ’åºçš„å…ƒç´ é€ä¸ªé™¤å¤–</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">swap</span>(arr[<span class="number">0</span>], arr[i]);<span class="comment">//é€‰å‡ºæœ€å¤§çš„å…ƒç´ æ”¾åœ¨æœ«å°¾</span></span><br><span class="line"><span class="built_in">adjust_down</span>(arr,i,<span class="number">0</span>);<span class="comment">//å‘ä¸‹è°ƒæ•´å»ºå †,å¾…æ’åºçš„ï¼ˆå¾…å»ºå †çš„ï¼‰æ•°çš„ä¸ªæ•°ä¸ºi,é€ä¸ªå‡å°</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/PixPin_2024-05-21_19-45-22.png"></p><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/PixPin_2024-05-21_19-47-20.png"></p><p>æ­£å› ä¸ºå®é™…ä¸Šæ’åºæ—¶æ˜¯<strong>å€’ç€æ’</strong>çš„,æ‰€ä»¥å½“æˆ‘ä»¬è¦æ’åºæ—¶ï¼š</p><ul><li>å‡åº-&gt;<code>å¤§å †</code></li><li>é™åº-&gt;<code>å°å †</code></li></ul><h1 id="å…¨éƒ¨ä»£ç "><a href="#å…¨éƒ¨ä»£ç " class="headerlink" title="å…¨éƒ¨ä»£ç "></a>å…¨éƒ¨ä»£ç </h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">adjust_up</span><span class="params">(vector&lt;T&gt;&amp; arr, <span class="type">int</span> child)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> parent = (child - <span class="number">1</span>) / <span class="number">2</span>;</span><br><span class="line"><span class="keyword">while</span> (parent != child)<span class="comment">//parent == child == 0æ—¶</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (arr[parent] &lt; arr[child])<span class="comment">//ä¸æ»¡è¶³å¤§å †</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">swap</span>(arr[parent], arr[child]);<span class="comment">//äº¤æ¢</span></span><br><span class="line">child = parent;<span class="comment">//ç»§ç»­å‘ä¸Šè°ƒæ•´,è¿­ä»£childå’Œparent</span></span><br><span class="line">parent = (child - <span class="number">1</span>) / <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span><span class="comment">//å®Œæˆå»ºå †ï¼Œé€€å‡ºå¾ªç¯</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">adjust_down</span><span class="params">(vector&lt;T&gt;&amp; arr,<span class="type">int</span> sz , <span class="type">int</span> parent)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> child = parent * <span class="number">2</span> + <span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span> (child + <span class="number">1</span> &lt; sz &amp;&amp; arr[child + <span class="number">1</span>] &gt; arr[child]) child++;<span class="comment">//å–è¾ƒå¤§çš„å­©å­</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (child &lt; sz)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (arr[parent] &lt; arr[child])</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">swap</span>(arr[parent], arr[child]);</span><br><span class="line">parent = child;</span><br><span class="line"><span class="type">int</span> child = parent * <span class="number">2</span> + <span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span> (child &gt;= sz) <span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">if</span> (child + <span class="number">1</span> &lt; sz &amp;&amp; arr[child + <span class="number">1</span>] &gt; arr[child]) child++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">heap_sort</span><span class="params">(vector&lt;T&gt;&amp; arr)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> sz = arr.<span class="built_in">size</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//å»ºå †</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; sz; i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">adjust_up</span>(arr, i);<span class="comment">//é€ä¸ªæ’å…¥å¹¶å‘ä¸Šè°ƒæ•´å»ºå †</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = sz<span class="number">-1</span>; i &gt;= <span class="number">1</span>; i--)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">swap</span>(arr[<span class="number">0</span>], arr[i]);<span class="comment">//é€‰å‡ºæœ€å¤§çš„å…ƒç´ æ”¾åœ¨æœ«å°¾</span></span><br><span class="line"><span class="built_in">adjust_down</span>(arr,i,<span class="number">0</span>);<span class="comment">//å‘ä¸‹è°ƒæ•´å»ºå †</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> ä¸ƒå¤§æ’åº å †æ’åº æ’åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++æ–‡ä»¶æ“ä½œ</title>
      <link href="/2024/05/14/cpp-file-op/"/>
      <url>/2024/05/14/cpp-file-op/</url>
      
        <content type="html"><![CDATA[<p><em>æ³¨:è¿½æ±‚ä»£ç ç®€æ´,æœ‰ä¸€è‡´çš„C++é£æ ¼ï¼Œå¯å‚é˜…æœ¬ç¯‡åšå®¢ï¼Œè‹¥è¿½æ±‚æ›´é«˜çš„è¯»å†™æ•ˆç‡ï¼Œå»ºè®®å‚é˜…Cè¯­è¨€ç¯‡</em> <a href="">ä½†æ–‡ç« è¿˜æ²¡å†™</a></p><p>æœ¬ç¯‡æ–‡ç« ä¸»è¦ç ”ç©¶å¤´æ–‡ä»¶<code>fstream</code>ä¸­çš„<strong>å‡½æ•°</strong>å’Œ<strong>ç±»</strong></p><p>ç›®å‰C++æ–‡ä»¶æ“ä½œä¸»è¦æœ‰ä¸¤ç§æµæ´¾,ä¸€ç§æ˜¯å£°æ˜<code>fstream</code>å¯¹è±¡,å¦ä¸€ç§æ˜¯åˆ†å¼€å£°æ˜<code>ifstream</code>å’Œ<code>ofstream</code></p><p><strong>æ³¨æ„ï¼Œæœ¬æ–‡ä»£ç ä¸ºäº†ç®€æ´ï¼Œéƒ½æ˜¯åœ¨å±•å¼€stdå‘½åç©ºé—´çš„å‰æä¸‹ä¹¦å†™</strong></p><h1 id="fstreamçš„ä½¿ç”¨"><a href="#fstreamçš„ä½¿ç”¨" class="headerlink" title="fstreamçš„ä½¿ç”¨"></a>fstreamçš„ä½¿ç”¨</h1><p>å…ˆå†™ä¸€æ®µç¤ºä¾‹ä»£ç </p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;fstream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="function">fstream <span class="title">f</span><span class="params">(<span class="string">&quot;file.txt&quot;</span>, ios::out)</span></span>;<span class="comment">//è°ƒç”¨æ„é€ å‡½æ•°ä»¥outæ¨¡å¼æ‰“å¼€æ–‡ä»¶file.txt æ³¨:outæ¨¡å¼ä¸‹file.txt ä¼šè‡ªåŠ¨åˆ›å»º</span></span><br><span class="line">string str = <span class="string">&quot;This is a sentence&quot;</span>;<span class="comment">//åœ¨å†…å­˜ä¸­å‡†å¤‡ä¸€æ®µå­—ç¬¦ä¸²</span></span><br><span class="line">f &lt;&lt; str;<span class="comment">//å°†å­—ç¬¦ä¸²ä»å†…å­˜å†™å…¥æ–‡ä»¶</span></span><br><span class="line">f.<span class="built_in">close</span>();<span class="comment">//å…³é—­æ–‡ä»¶æµ</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//få¯¹è±¡å¯ä»¥å¤ç”¨</span></span><br><span class="line">f.<span class="built_in">open</span>(<span class="string">&quot;file.txt&quot;</span>, ios::in);<span class="comment">//ä»¥inæ¨¡å¼æ‰“å¼€file.txt</span></span><br><span class="line">string content;<span class="comment">//å£°æ˜å˜é‡</span></span><br><span class="line">f &gt;&gt; content;<span class="comment">//ä»æ–‡ä»¶æµè¯»å–æ•°æ®å†™å…¥å˜é‡(å†…å­˜)</span></span><br><span class="line">cout &lt;&lt; content;<span class="comment">//æ‰“å°å‡ºæ¥çœ‹ä¸€çœ¼</span></span><br><span class="line">    f.<span class="built_in">close</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><em>è¾“å‡ºç»“æœ</em><br><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/PixPin_2024-05-14_18-49-56.png"></p><p>è¿™ä¸€å°æ®µä»£ç å®Œæˆäº†æ–‡ä»¶çš„ä¸¤ç§æ¨¡å¼çš„æ‰“å¼€å’Œè¯»å†™ï¼Œå·²ç»ä½“ç°äº†<code>fstream</code>çš„åŸºæœ¬åŠŸèƒ½,æ¥ä¸‹æ¥åˆ†åˆ«è¯¦ç»†ä»‹ç»<code>æˆå‘˜å‡½æ•°</code>å’Œ<code>æ“ä½œç¬¦é‡è½½</code></p><h2 id="fstreanm-open"><a href="#fstreanm-open" class="headerlink" title="fstreanm::open()"></a>fstreanm::open()</h2><p>å‡½æ•°å£°æ˜:<code>void open(const char* filename, ios_base::openmode mode)</code></p><p>ç‰¹åˆ«çš„,<strong>C++11</strong>å¢åŠ äº†ä¸€ä¸ªå‡½æ•°é‡è½½ï¼Œç¬¬ä¸€ä¸ªå½¢å‚å˜ä¸º<code>const string&amp; filename</code></p><p>å®é™…ä¸Šï¼Œä¹Ÿå¯ä»¥é€šè¿‡<code>fstream</code>ç±»çš„æ„é€ å‡½æ•°æ¥æ‰“å¼€æ–‡ä»¶ï¼Œå‚æ•°ä¸<code>open()</code>å‡½æ•°ç›¸åŒ</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">fstream <span class="title">f</span><span class="params">(<span class="string">&quot;filename&quot;</span>,ios::out)</span></span>;</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥åˆ†åˆ«ä»‹ç»ä¸¤ä¸ªå½¢å‚</p><h3 id="filename"><a href="#filename" class="headerlink" title="filename"></a>filename</h3><p><strong>ä¸€èˆ¬</strong>ç¬¬ä¸€ä¸ªå½¢å‚æ˜¯æ–‡ä»¶åï¼Œå¯ä»¥ä¼ <code>å­—ç¬¦ä¸²</code>&#x2F;<code>char*</code>æŒ‡é’ˆï¼ŒC++11è¿˜æ”¯æŒä¼ <code>string</code>å¯¹è±¡</p><p>æ–‡ä»¶åæ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œå°±æ˜¯æœ‰åç¼€çš„æ–‡ä»¶è¦<strong>æ³¨æ„åç¼€</strong>,ä»¥åŠæ–‡ä»¶åè¦å†™å¯¹ï¼Œå‹¤æ£€æŸ¥</p><p><strong>ä½†å®é™…ä¸Š</strong>,ç¬¬ä¸€ä¸ªå½¢å‚æ˜¯<code>æ–‡ä»¶è·¯å¾„</code>,ä¸”æ”¯æŒ<code>ç›¸å¯¹è·¯å¾„</code>,<del>ç»å¯¹è·¯å¾„æˆ‘æµ‹ä¸å‡ºæ¥</del></p><p><em>ä»£ç ç¤ºä¾‹å¦‚ä¸‹</em></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">f.<span class="built_in">open</span>(<span class="string">&quot;this,txt&quot;</span>,ios::in);<span class="comment">///æ‰“å¼€å½“å‰æ–‡ä»¶å¤¹çš„æ–‡ä»¶,this.txtæ˜¯æ–‡ä»¶å</span></span><br><span class="line">f.<span class="built_in">open</span>(<span class="string">&quot;../father.txt&quot;</span>,ios::in);<span class="comment">//æ‰“å¼€çˆ¶çº§æ–‡ä»¶å¤¹çš„æ–‡ä»¶,father.txtæ˜¯æ–‡ä»¶å</span></span><br><span class="line">f.<span class="built_in">open</span>(<span class="string">&quot;./dir/child.txt&quot;</span>,ios::in);<span class="comment">//æ‰“å¼€å­çº§æ–‡ä»¶å¤¹çš„æ–‡ä»¶(diræ˜¯æ–‡ä»¶å¤¹åç§°)child.txtæ˜¯æ–‡ä»¶å</span></span><br></pre></td></tr></table></figure><h3 id="mode"><a href="#mode" class="headerlink" title="mode"></a>mode</h3><p><strong>ç”¨å‰é¡»çŸ¥</strong>:è¿™äº›<code>mode</code>éƒ½å­˜åœ¨äº<code>ios_base</code>çš„ç±»åŸŸä¸­,ä½†ç”±äº<code>ios</code>ç»§æ‰¿è‡ª<code>ios_base</code>,æ··ç”¨äºŒè€…çš†å¯ï¼Œæœ¬æ–‡ä¸ºäº†ç®€æ´ï¼ŒæŒ‡å®šç±»åŸŸæ—¶ï¼Œä½¿ç”¨<code>ios</code>ï¼Œå¦‚<code>f.open(&quot;file.txt&quot;,ios::out)</code></p><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/PixPin_2024-05-16_19-22-46.png"></p><p><em>ä¸Šå›¾æ˜¯ç»§æ‰¿å…³ç³»å›¾ï¼Œç®­å¤´æŒ‡å‘çˆ¶ç±»</em></p><p>è¿™é‡Œä¾ç„¶ç»Ÿä¸€ä½¿ç”¨<code>fstream</code>ç±»å£°æ˜ä¸€ä¸ª<code>f</code>å¯¹è±¡</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fstream f;</span><br></pre></td></tr></table></figure><p>æ‰“å¼€æ¨¡å¼æ¯”è¾ƒå¤šï¼Œä¸‹é¢å…ˆæ”¾ä¸€å¼ è¡¨</p><table><thead><tr><th>mode</th><th>stands for</th><th>æè¿°</th></tr></thead><tbody><tr><td>out</td><td>output</td><td>æ‰“å¼€æ–‡ä»¶ç”¨äº<code>å†™å…¥</code>,å³<code>å†…å­˜-&gt;æ–‡ä»¶</code>,ä¸”ä¼š<strong>å®Œå…¨è¦†ç›–</strong>åŸæ–‡ä»¶,å†…ç½®çš„æµç¼“å­˜(<code>internal stream buffer</code>)æ”¯æŒè¾“å‡ºæ“ä½œ(ç±»ä¼¼<code>cout</code>)</td></tr><tr><td>in</td><td>input</td><td>æ‰“å¼€æ–‡ä»¶ç”¨äºè¯»å–,å³<code>æ–‡ä»¶-&gt;å†…å­˜</code>,å†…ç½®çš„æµç¼“å­˜æ”¯æŒè¾“å…¥æ“ä½œ(<code>ç±»ä¼¼cin</code>)</td></tr><tr><td>app</td><td>append</td><td>æ‰€æœ‰çš„è¾“å‡ºæ“ä½œéƒ½<strong>è¿½åŠ åœ¨æ–‡ä»¶æœ«å°¾</strong>,å‘å·²æœ‰å†…å®¹è¿½åŠ æ–‡æœ¬</td></tr><tr><td>trunc</td><td>truncate</td><td>åœ¨æ‰“æ–‡ä»¶<strong>å‰</strong>,<strong>æ¸…é™¤æ‰€æœ‰å†…å®¹</strong></td></tr><tr><td>binary</td><td>binary</td><td>æ‰€æœ‰æ“ä½œéƒ½ä»¥<code>äºŒè¿›åˆ¶</code>çš„å½¢å¼ï¼Œè€Œä¸æ˜¯æ–‡æœ¬</td></tr><tr><td>ate</td><td>at end</td><td>è¾“å‡ºæ“ä½œåœ¨æ–‡ä»¶æœ«å°¾å¼€å§‹</td></tr></tbody></table><p><em>æ³¨</em>,è¿™äº›<code>mode</code>èƒ½ç”¨<code>|</code>æ“ä½œç¬¦è¿æ¥,<strong>åŒæ—¶</strong>ä½¿ç”¨è¿™äº›<code>mode</code></p><p><strong>ä½†æ˜¯</strong></p><p>-ä½¿ç”¨<code>trunc | app</code>ä¼šæ‰“å¼€å¤±è´¥<br>-ä½¿ç”¨<code>trunc</code>è€Œæœªä½¿ç”¨<code>|</code>è¿æ¥<code>out</code>,ä¹Ÿä¼šå¤±è´¥</p><p>æ¥ä¸‹æ¥é€ä¸€ä»‹ç»è¿™äº›<code>mode</code></p><h4 id="out-å’Œ-in"><a href="#out-å’Œ-in" class="headerlink" title="out å’Œ in"></a>out å’Œ in</h4><p><code>out</code>æ˜¯æœ€å¸¸ç”¨çš„æ¨¡å¼ä¹‹ä¸€,ç”¨äº<code>è¦†ç›–</code>å†™å…¥æ–‡ä»¶,è€Œä¸”å½“æ–‡ä»¶ä¸å­˜åœ¨æ—¶ï¼Œä¼šæŒ‰æ–‡ä»¶å<strong>æ–°å»º</strong>ä¸€ä¸ªæ–‡ä»¶å¹¶æ‰§è¡Œå†™å…¥æ“ä½œ(å“ªæ€•æ˜¯ç©ºæ–‡ä»¶)</p><p><code>in</code>ä¹Ÿæ˜¯æœ€å¸¸ç”¨çš„æ¨¡å¼ä¹‹ä¸€ï¼Œç”¨äº<code>åªè¯»</code>åœ°è¯»å–æ–‡ä»¶ï¼Œä¸”å½“æ–‡ä»¶ä¸å­˜åœ¨æ—¶ï¼Œä¼š<strong>æŠ›å¼‚å¸¸</strong>(<em>è¿™é‡ŒæŒ–ä¸ªå‘</em>)</p><ul><li>ä½¿ç”¨<code>out</code>æ—¶ï¼Œ<code>f</code>å¯¹è±¡æ”¯æŒ<code>&lt;&lt;</code>æµæ’å…¥æ“ä½œç¬¦</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">string <span class="title">str</span><span class="params">(<span class="string">&quot;123456&quot;</span>)</span></span>;</span><br><span class="line">f&lt;&lt;str&lt;&lt;endl;<span class="comment">//å’Œè¾“å‡ºå†…å®¹åˆ°ç»ˆç«¯(cout)æ˜¯ä¸€æ ·çš„</span></span><br></pre></td></tr></table></figure><ul><li>ä½¿ç”¨<code>in</code>æ—¶,<code>f</code>å¯¹è±¡æ”¯æŒ<code>&gt;&gt;</code>æµæå–å’Œä½œä¸º<code>getline</code>å‡½æ•°çš„å‚æ•°</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">string s1,s2;</span><br><span class="line">f&gt;&gt;s1&gt;&gt;s2;<span class="comment">//å’Œä»ç»ˆç«¯æå–å†…å®¹(cin)æ˜¯ä¸€æ ·çš„</span></span><br><span class="line"></span><br><span class="line">string line;</span><br><span class="line"><span class="built_in">getline</span>(f,line);<span class="comment">//ä»æ–‡ä»¶æµä¸­æå–ä¸€è¡Œ,å­˜å…¥lineå¯¹è±¡</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">getline</span>(f,line))<span class="comment">//é€è¡Œæå–è‡³æ–‡ä»¶æœ«å°¾</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//....</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ä½¿ç”¨<code>in | out</code>æ—¶ï¼Œ<code>f</code>åŒæ—¶æ”¯æŒä»¥ä¸Šæ“ä½œ</li></ul><p>ä½†æ˜¯<code>å†™å…¥</code>æ“ä½œåˆå’Œå•ä¸€ä¸ª<code>out</code>ä¸ä¸€æ ·ï¼Œ<code>å•out</code>æ˜¯å®Œå…¨è¦†ç›–ï¼Œä¸è€ƒè™‘åŸæ–‡ä»¶å†…å®¹,è€Œ<code>in | out</code>æ—¶ï¼Œæ˜¯<strong>ä¸å®Œå…¨</strong>è¦†ç›–ï¼šä»å¤´å¼€å§‹è¦†ç›–ï¼Œæ–°å†™å…¥çš„å†…å®¹æ²¡æœ‰åŸæ–‡ä»¶é•¿æ—¶ï¼Œå‰©ä¸‹çš„åŸæ–‡ä»¶<strong>ä¾ç„¶ä¿ç•™</strong></p><blockquote><p><em>ç¤ºä¾‹ä»£ç </em></p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">fstream f;</span><br><span class="line">f.<span class="built_in">open</span>(<span class="string">&quot;ff.txt&quot;</span>, ios::out);</span><br><span class="line">f &lt;&lt; <span class="string">&quot;LongWord&quot;</span>;<span class="comment">//å‡†å¤‡ä¸€ä¸ªæœ‰å†…å®¹çš„åŸæ–‡ä»¶</span></span><br><span class="line">f.<span class="built_in">close</span>();</span><br><span class="line"></span><br><span class="line">f.<span class="built_in">open</span>(<span class="string">&quot;ff.txt&quot;</span>, ios::in | ios::out);</span><br><span class="line">f &lt;&lt; <span class="string">&quot;1234&quot;</span>;<span class="comment">//å†™å…¥1234</span></span><br><span class="line">f.<span class="built_in">close</span>();</span><br><span class="line"><span class="comment">//æœ€åff.txtçš„å†…å®¹ä¸º&quot;1234Word&quot;,ä¸å®Œå…¨è¦†ç›–</span></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä½†æ˜¯ï¼ŒåŒæ—¶è¿›è¡Œæµæ’å…¥å’Œæµæå–æ—¶ï¼Œæ–‡ä»¶çš„æ“ä½œç»“æœä¼šæ¯”è¾ƒè¯¡å¼‚ï¼Œæ‰€ä»¥å¹¶ä¸å»ºè®®å¯¹<strong>åŒä¸€ä¸ªæ–‡ä»¶æµ</strong>åŒæ—¶è¿›è¡Œè¯»å†™æ“ä½œã€‚</p><p>åœ¨ä¸€æ®µ<code>f.open()</code>å’Œ<code>f.close()</code>ä¹‹é—´ä¾ç„¶è¿˜æ˜¯åªè¿›è¡Œè¯»å–<strong>æˆ–</strong>å†™å…¥ä¸­çš„<strong>ä¸€ç§</strong>ï¼Œè€Œä¸è¦æ··åˆæ“ä½œ</p><p><strong>ç¼ºçœå‚æ•°</strong>ï¼šå…¶å®<code>mode</code>å½¢å‚æ˜¯æœ‰ç¼ºçœå‚æ•°çš„ï¼Œæ­£æ˜¯<code>ios_base::in | ios_base::out</code>,ä¹Ÿå°±æ˜¯è¯´åœ¨æ˜ç¡®åªä½¿ç”¨<code>out</code>æˆ–<code>in</code>çš„æƒ…å†µä¸‹ï¼Œä¸”æ‰§è¡Œè¦†ç›–å†™å…¥æ“ä½œæ—¶ï¼Œå•å†™ä¸€ä¸ª<code>f.open(æ–‡ä»¶å)</code>å³å¯</p><h4 id="å…¶å®ƒmode"><a href="#å…¶å®ƒmode" class="headerlink" title="å…¶å®ƒmode"></a>å…¶å®ƒmode</h4><h5 id="app"><a href="#app" class="headerlink" title="app"></a>app</h5><p>æ­£å¦‚è¡¨æ ¼é‡Œæè¿°çš„ï¼Œä½¿ç”¨<code>app</code>æ—¶ï¼Œå†™å…¥æ—¶ä¸ä¼šè¦†ç›–è¿œå†…å®¹ï¼Œè€Œæ˜¯<code>è¿½åŠ </code>åˆ°æ–‡ä»¶æœ«å°¾ã€‚å…¶ä¸­ä¸<code>out</code>ä¸€æ ·ï¼Œå½“æ–‡ä»¶ä¸å­˜åœ¨æ—¶ï¼Œä¼šè‡ªåŠ¨åˆ›å»ºå¹¶å†™å…¥å†…å®¹ã€‚(å³ä½¿æ²¡å†…å®¹ï¼Œä¹Ÿä¼šåˆ›å»ºç©ºæ–‡ä»¶)</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">fstream f;</span><br><span class="line"></span><br><span class="line">f.<span class="built_in">open</span>(<span class="string">&quot;file.txt&quot;</span>,ios::out);</span><br><span class="line">f &lt;&lt; <span class="string">&quot;111&quot;</span>;<span class="comment">//å‡†å¤‡ä¸€ä¸ªå†…å®¹ä¸º111çš„æ–‡ä»¶</span></span><br><span class="line">f.<span class="built_in">close</span>();</span><br><span class="line">f.<span class="built_in">open</span>(<span class="string">&quot;file.txt&quot;</span>, ios::app);</span><br><span class="line">f &lt;&lt; <span class="string">&quot;222&quot;</span>;<span class="comment">//111åé¢è¿½åŠ 222</span></span><br><span class="line">f.<span class="built_in">close</span>();</span><br><span class="line"><span class="comment">//æ–‡ä»¶å†…å®¹ä¸º111222</span></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="trunc"><a href="#trunc" class="headerlink" title="trunc"></a>trunc</h5><p>å› ä¸ºä¸åŠ <code>out</code>ä¼šæ‰“å¼€å¤±è´¥ï¼Œæ‰€ä»¥<code>trunc</code>ç®—æ˜¯ä¸ª<code>out</code>çš„ä¿®æ­£,åœ¨ä»¥<code>out</code>æ¨¡å¼æ‰“å¼€å‰ï¼Œæ¸…ç©ºåŸæ–‡ä»¶çš„å†…å®¹</p><p>ä¹ä¸€çœ‹ï¼Œå› ä¸º<code>å•out</code>æ˜¯<code>å®Œå…¨è¦†ç›–å†™å…¥</code>,ä¼¼ä¹<code>trunc</code>æ²¡ä»€ä¹ˆç”¨</p><p>ä½†æ˜¯ä½¿ç”¨<code>ios::out | ios::in | ios::trunc</code>æ—¶æ˜¯ä¸å®Œå…¨è¦†ç›–å†™å…¥ï¼Œæ‰€ä»¥æå‰æ¸…ç©ºå†…å®¹è¿˜æ˜¯å¾ˆæœ‰æ„ä¹‰çš„ã€‚<del>(é‚£ä¸ºå•¥ä¸ç”¨å•outå‘¢)</del></p><h5 id="ate"><a href="#ate" class="headerlink" title="ate"></a>ate</h5><p>å…¨ç§°<code>at end</code>,å•ç”¨<code>ate</code>ä¹Ÿä¼šæ‰“å¼€å¤±è´¥,å½“ç„¶ï¼Œ<code>ios::ate | ios::out</code>æ²¡æœ‰æ„ä¹‰ï¼Œå› ä¸ºè¿˜æ˜¯å®Œå…¨è¦†ç›–å†™å…¥,<code>ate</code>åœ¨<code>ios::in | ios::out | ios::in</code>æ›´åŠ æœ‰ç”¨ï¼Œå¯ä»¥ä»æ–‡ä»¶æœ«å°¾è¿½åŠ å†…å®¹</p><h5 id="binary"><a href="#binary" class="headerlink" title="binary"></a>binary</h5><p>è™½ç„¶è¡¨æ ¼é‡Œæ˜¯é‚£ä¹ˆè¯´äº†ï¼Œæœ‰æ²¡æœ‰ç”¨<code>binary</code>æˆ‘æ˜¯çœŸæµ‹ä¸å‡ºå·®åˆ«(<del>çœŸè¦ç”¨çš„è¯ï¼Œå¦å¯»é«˜å°±æŠŠ</del>)</p><p>ä½†æ˜¯å•ç”¨<code>binary</code>ä¾ç„¶ä¼šæ‰“å¼€å¤±è´¥,éœ€è¦å†è¿ä¸ª<code>out</code>æˆ–<code>in</code></p><hr><h1 id="ifstream-å’Œ-ofstream"><a href="#ifstream-å’Œ-ofstream" class="headerlink" title="ifstream å’Œ ofstream"></a>ifstream å’Œ ofstream</h1><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/PixPin_2024-05-17_11-18-29.png"></p><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/PixPin_2024-05-17_11-18-48.png"></p><p>ä¸Šå›¾åˆ†åˆ«ä¸ºäºŒè€…çš„ç»§æ‰¿å…³ç³»,å®é™…ä¸ŠäºŒè€…ç”¨èµ·æ¥å’Œ<code>fstream</code>æ˜¯åŸºæœ¬ä¸€æ ·çš„ï¼Œåªä¸è¿‡åœ¨æ‰“å¼€æ–‡ä»¶æ—¶ï¼Œä¸€ä¸ªå§‹ç»ˆè‡ªå¸¦<code>ios::in</code>,å¦ä¸€ä¸ªå§‹ç»ˆè‡ªå¸¦<code>ios::out</code></p><h1 id="è¯»å–æ–‡ä»¶æµçš„ä¸€äº›æ–¹æ³•"><a href="#è¯»å–æ–‡ä»¶æµçš„ä¸€äº›æ–¹æ³•" class="headerlink" title="è¯»å–æ–‡ä»¶æµçš„ä¸€äº›æ–¹æ³•"></a>è¯»å–æ–‡ä»¶æµçš„ä¸€äº›æ–¹æ³•</h1><h2 id="æ“ä½œç¬¦"><a href="#æ“ä½œç¬¦" class="headerlink" title="&gt;&gt;æ“ä½œç¬¦"></a><code>&gt;&gt;</code>æ“ä½œç¬¦</h2><p>è¿™æ˜¯æœ€å®¹æ˜“ç†è§£çš„æ–¹å¼ï¼Œå’Œä»ç»ˆç«¯è¯»å–<code>æ•°æ®</code>åˆ°å˜é‡é‡Œæ˜¯ä¸€æ ·çš„,åªè¦ç±»å‹åŒ¹é…ï¼Œä¸ä¸€å®šè¦å­˜åˆ°å­—ç¬¦ä¸²é‡Œ</p><h2 id="getline-å‡½æ•°"><a href="#getline-å‡½æ•°" class="headerlink" title="getline()å‡½æ•°"></a><code>getline()</code>å‡½æ•°</h2><p>ç”¨<code>getline</code>å¯ä»¥è¯»å–ä¸€è¡Œ(å³è¯»åˆ°<code>\n</code>æˆ–æ–‡ä»¶æœ«å°¾<code>EOF</code>)</p><p>ä½†<code>getline</code>ä¸»è¦æœ‰ä¸¤ç§ï¼Œå­˜åœ¨äºä¸åŒçš„å¤´æ–‡ä»¶ä¸­ï¼Œä¸”å‚æ•°ä¸åŒ</p><h3 id="ä¸­çš„getline"><a href="#ä¸­çš„getline" class="headerlink" title="&lt;string&gt;ä¸­çš„getline"></a>&lt;string&gt;ä¸­çš„getline</h3><p><code>istream&amp; getline (istream&amp; is, string&amp; str);</code></p><p>å‡½æ•°å£°æ˜å¦‚ä¸Šï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ–‡ä»¶æµ(<code>fstream</code>ç±»æˆ–<code>istream</code>ç±»éƒ½å¯ä»¥),ç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯ä¸ª<code>string</code>å¯¹è±¡</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªé€è¡Œæå–çš„ä¾‹å­</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//æå‰å‡†å¤‡ä¸€ä¸ªå¾…æå–æ–‡ä»¶</span></span><br><span class="line">fstream f;</span><br><span class="line">f.<span class="built_in">open</span>(<span class="string">&quot;ff.txt&quot;</span>, ios::out);</span><br><span class="line">f &lt;&lt; <span class="string">&quot;line 1&quot;</span> &lt;&lt; endl &lt;&lt; <span class="string">&quot;line 2&quot;</span> &lt;&lt; endl;</span><br><span class="line">f.<span class="built_in">close</span>();</span><br><span class="line"><span class="comment">//================</span></span><br><span class="line">f.<span class="built_in">open</span>(<span class="string">&quot;ff.txt&quot;</span>);</span><br><span class="line">string str;</span><br><span class="line"><span class="keyword">while</span> (<span class="built_in">getline</span>(f, str))<span class="comment">//å½“fä¸ºç©ºæ—¶ï¼Œå¾ªç¯åœæ­¢</span></span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; str &lt;&lt; endl;<span class="comment">//æ‰“å°æ¯è¡Œ,strå†…ä¸å«æ¢è¡Œç¬¦</span></span><br><span class="line">&#125;</span><br><span class="line">f.<span class="built_in">close</span>();</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æˆå‘˜å‡½æ•°ä¸­çš„getline"><a href="#æˆå‘˜å‡½æ•°ä¸­çš„getline" class="headerlink" title="æˆå‘˜å‡½æ•°ä¸­çš„getline"></a>æˆå‘˜å‡½æ•°ä¸­çš„getline</h3><p><code>std::istream::getline</code></p><p>æ ¹æ®ç»§æ‰¿å…³ç³»,<code>fstream</code>ç»§æ‰¿äº†æ¥è‡ª<code>istream</code>çš„<code>getline</code>æˆå‘˜å‡½æ•°,ä¹Ÿå°±æ˜¯è¯´å®ƒä»¬çš„å¯¹è±¡éƒ½èƒ½è°ƒç”¨è¿™ä¸€æˆå‘˜å‡½æ•°</p><p><code>istream&amp; getline (char* s, streamsize n );</code></p><p>å‡½æ•°å£°æ˜å¦‚ä¸Šï¼Œå¯ä»¥çœ‹åˆ°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯<code>char*</code>ï¼Œè¦ä¼ ç»™å®ƒä¸€ä¸ª<code>å­—ç¬¦æ•°ç»„</code>,ç¬¬äºŒä¸ªåˆ™æ˜¯è¯»å…¥å­—ç¬¦æ•°çš„æœ€å¤§å€¼,å½“å®é™…è¯»å…¥çš„å­—ç¬¦æ•°<strong>å°äº</strong><code>n</code>æ—¶ï¼Œä¼šè‡ªåŠ¨åœ¨ç»“å°¾åŠ ä¸€ä¸ª<code>\0</code></p><p><del>è®²çœŸè¿™ä¸ªå‡½æ•°æ›´åƒæ˜¯æ¥è‡ªCè¯­è¨€çš„å‡½æ•°</del></p><p>ç¤ºä¾‹ä»£ç </p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">fstream f;</span><br><span class="line">f.<span class="built_in">open</span>(<span class="string">&quot;ff.txt&quot;</span>, ios::out);</span><br><span class="line">f &lt;&lt; <span class="string">&quot;line 1&quot;</span> &lt;&lt; endl &lt;&lt; <span class="string">&quot;line 2&quot;</span> &lt;&lt; endl;</span><br><span class="line">f.<span class="built_in">close</span>();</span><br><span class="line"></span><br><span class="line">f.<span class="built_in">open</span>(<span class="string">&quot;ff.txt&quot;</span>);</span><br><span class="line"><span class="type">char</span> str[<span class="number">256</span>] = &#123; <span class="number">0</span> &#125;;</span><br><span class="line">f.<span class="built_in">getline</span>(str, <span class="number">256</span>);<span class="comment">//stré‡Œå­˜äº†line 1\0</span></span><br><span class="line">f.<span class="built_in">close</span>();</span><br><span class="line">cout &lt;&lt; str;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="get-å‡½æ•°"><a href="#get-å‡½æ•°" class="headerlink" title="get() å‡½æ•°"></a>get() å‡½æ•°</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">get</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function">istream&amp; <span class="title">get</span> <span class="params">(<span class="type">char</span>&amp; c)</span></span>;</span><br></pre></td></tr></table></figure><p>å¦‚ä¸Šæ˜¯ä¸¤ç§å¸¸ç”¨çš„å‡½æ•°é‡è½½,å‡ä¸ºç»§æ‰¿æ¥çš„<code>æˆå‘˜å‡½æ•°</code>,é€å­—ç¬¦æå–çš„è¯å°±èƒ½æå–åˆ°<code>\n``\r</code>ä¹‹ç±»çš„è½¬ä¹‰å­—ç¬¦</p><p>ä»£ç ç¤ºä¾‹</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//æå‰å‡†å¤‡ä¸€ä¸ªå¾…æå–æ–‡ä»¶</span></span><br><span class="line">fstream f;</span><br><span class="line">f.<span class="built_in">open</span>(<span class="string">&quot;ff.txt&quot;</span>, ios::out);</span><br><span class="line">f &lt;&lt; <span class="string">&quot;line 1&quot;</span> &lt;&lt; endl &lt;&lt; <span class="string">&quot;line 2&quot;</span> &lt;&lt; endl;</span><br><span class="line">f.<span class="built_in">close</span>();</span><br><span class="line"><span class="comment">//================</span></span><br><span class="line"><span class="comment">//æ–¹æ³•1</span></span><br><span class="line">f.<span class="built_in">open</span>(<span class="string">&quot;ff.txt&quot;</span>);</span><br><span class="line"><span class="type">char</span> ch;</span><br><span class="line"><span class="keyword">while</span> (f.<span class="built_in">get</span>(ch))<span class="comment">//è·å–å­—ç¬¦</span></span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; ch;<span class="comment">//æ‰“å°å­—ç¬¦</span></span><br><span class="line">&#125;</span><br><span class="line">f.<span class="built_in">close</span>();</span><br><span class="line"><span class="comment">//æ–¹æ³•2</span></span><br><span class="line">f.<span class="built_in">open</span>(<span class="string">&quot;ff.txt&quot;</span>);</span><br><span class="line"><span class="keyword">while</span> ((ch = f.<span class="built_in">get</span>()) != EOF)<span class="comment">//å› ä¸ºä¼˜å…ˆçº§çš„é—®é¢˜ï¼Œå¿…é¡»åŠ æ‹¬å·</span></span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; ch;<span class="comment">//æ‰“å°å­—ç¬¦</span></span><br><span class="line">&#125;</span><br><span class="line">f.<span class="built_in">close</span>();</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h1><p>ä»¥ä¸Šå°±æ˜¯C++æ–‡ä»¶æ“ä½œçš„å¤§éƒ¨åˆ†å¸¸ç”¨å†…å®¹äº†ã€‚æŒ–ä¸€æŒ–ç¡®å®ä¹Ÿä¸å°‘å†…å®¹äº†,å€¼å¾—æ€»ç»“ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> C++ æ–‡ä»¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é€šè¿‡è®¾è®¡listç±»æ·±å…¥ç†è§£iteratorè¿­ä»£å™¨</title>
      <link href="/2024/04/26/create-mylist/"/>
      <url>/2024/04/26/create-mylist/</url>
      
        <content type="html"><![CDATA[<p>å‰ç½®åšå®¢:<strong><a href="https://www.supdriver.top/2023/12/07/cpp-class/" title="ç‚¹å‡»è·³è½¬">ä»æ„å»ºä¸€ä¸ªDateç±»å…¥é—¨C++ç±»ä¸å¯¹è±¡</a></strong></p><blockquote><p>ä¸‹é¢å…ˆè¿…é€Ÿåœ°æ“ä¸€ä¸ª<code>list</code>ç±»</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;<span class="comment">//å…ˆç”¨æ¨¡æ¿åˆ›å»ºä¸€ä¸ªèŠ‚ç‚¹ç±»</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">ListNode</span></span><br><span class="line">&#123;</span><br><span class="line">T _val;</span><br><span class="line">ListNode&lt;T&gt;* _next;</span><br><span class="line">ListNode&lt;T&gt;* _prev;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æä¾›å…¨ç¼ºçœçš„é»˜è®¤æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="built_in">ListNode</span>(<span class="type">const</span> T&amp; val = <span class="built_in">T</span>()) :_val(val), _next(<span class="literal">nullptr</span>), _prev(<span class="literal">nullptr</span>) &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç”¨ListNodeæ„é€ listç±»</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">list</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">typedef</span> ListNode&lt;T&gt; Node;<span class="comment">//ç”¨typedefç®€åŒ–ä»£ç </span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">list</span>()<span class="comment">//é»˜è®¤æ„é€ å‡½æ•°</span></span><br><span class="line">&#123;</span><br><span class="line">_head = <span class="keyword">new</span> Node;</span><br><span class="line"><span class="comment">//ç»´æŠ¤ä¸¤ä¸ªæŒ‡é’ˆ</span></span><br><span class="line">_head-&gt;_next = _head;</span><br><span class="line">_head-&gt;_prev = _head;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">push_front</span><span class="params">(<span class="type">const</span> T&amp; val)</span><span class="comment">//å¤´æ’</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Node* newnode = <span class="keyword">new</span> <span class="built_in">Node</span>(val);</span><br><span class="line">Node* next = _head-&gt;_next;<span class="comment">//é¢å¤–çš„æŒ‡é’ˆï¼Œç®€åŒ–ä»£ç </span></span><br><span class="line"></span><br><span class="line">_head-&gt;_next = newnode;</span><br><span class="line">newnode-&gt;_prev = _head;</span><br><span class="line">newnode-&gt;_next = next;</span><br><span class="line">next-&gt;_prev = newnode;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">pop_front</span><span class="params">()</span><span class="comment">//å°¾æ’</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">empty</span>()) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">Node* cur = _head-&gt;_next;</span><br><span class="line"></span><br><span class="line">_head-&gt;_next = cur-&gt;_next;</span><br><span class="line">cur-&gt;_next-&gt;_prev = _head;</span><br><span class="line"><span class="keyword">delete</span> cur;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">empty</span><span class="params">()</span> <span class="comment">//åˆ¤ç©º</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> _head-&gt;_next == _head;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å‰©ä½™ä»£ç è‡ªè¡Œè¡¥å…¨</span></span><br><span class="line">    <span class="comment">//......</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">Node* _head;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="listçš„è¿­ä»£å™¨"><a href="#listçš„è¿­ä»£å™¨" class="headerlink" title="listçš„è¿­ä»£å™¨"></a>listçš„è¿­ä»£å™¨</h1><p>ä¸åŒäº<code>vector</code>åº•å±‚çš„æ•°æ®åœ¨å†…å­˜ä¸­<strong>è¿ç»­</strong>å­˜å‚¨,å¯ä»¥ç”¨<code>åŸç”ŸæŒ‡é’ˆ</code>å……å½“è¿­ä»£å™¨,ä¾‹å¦‚<code>typedef T* iterator</code></p><p><code>list</code>çš„åº•å±‚æ˜¯é“¾è¡¨,åœ¨å†…å­˜ä¸­<strong>åˆ†æ•£</strong>*å­˜å‚¨ï¼Œæ˜¯<strong>ä¸èƒ½</strong>ç”¨<code>åŸç”ŸæŒ‡é’ˆ</code>æ¥<strong>è¿ç»­</strong>è®¿é—®çš„,æ‰€ä»¥ä¸ºäº†è§£å†³è¿™ä¸€å¤æ‚é—®é¢˜ï¼Œ<br>éœ€è¦è‡ªå·±å†™ä¸€ä¸ª<code>iterator</code>ç±»</p><h2 id="æ™®é€šè¿­ä»£å™¨"><a href="#æ™®é€šè¿­ä»£å™¨" class="headerlink" title="æ™®é€šè¿­ä»£å™¨"></a>æ™®é€šè¿­ä»£å™¨</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;<span class="comment">//è¿­ä»£å™¨ä¹Ÿå¾—ç”¨æ¨¡æ¿</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">__list_iterator</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">typedef</span> __list_iterator&lt;T&gt; Self;<span class="comment">//ç®€åŒ–ä»£ç </span></span><br><span class="line"><span class="keyword">typedef</span> ListNode&lt;T&gt; Node;</span><br><span class="line">Node* _node;</span><br><span class="line"></span><br><span class="line">__list_iterator(Node* node) :_node(node) &#123;&#125;</span><br><span class="line"></span><br><span class="line">Self&amp; <span class="keyword">operator</span>++()<span class="comment">//é‡è½½operator++</span></span><br><span class="line">&#123;</span><br><span class="line">_node = _node-&gt;_next;</span><br><span class="line"><span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">bool</span> <span class="keyword">operator</span>!=(<span class="type">const</span> Self&amp; it) <span class="type">const</span> <span class="comment">//é‡è½½!==,æ¯”è¾ƒæ“ä½œç¬¦è®°å¾—åŠ const</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> _node != it._node;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">T&amp; <span class="keyword">operator</span>*()<span class="comment">//é‡è½½ *</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> _node-&gt;_val;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><em><code>list</code>ç±»ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç </em></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="keyword">typedef</span> __list_iterator&lt;T&gt; iterator;</span><br><span class="line"></span><br><span class="line">    <span class="function">iterator <span class="title">begin</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">iterator</span>(_head-&gt;_next);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">iterator <span class="title">end</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">iterator</span>(_head);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡å¦‚ä¸Šä¿®æ”¹,<code>list</code>å·²ç»æ”¯æŒ<code>æ™®é€šè¿­ä»£å™¨</code>,å¹¶ä¸”é<code>const</code>ä¿®é¥°çš„<code>list</code>å·²ç»æ”¯æŒ<code>èŒƒå›´for</code>äº†</p><blockquote><p>æµ‹è¯•ä»£ç å¦‚ä¸‹</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">list&lt;<span class="type">int</span>&gt; lst;</span><br><span class="line">lst.<span class="built_in">push_front</span>(<span class="number">5</span>);</span><br><span class="line">lst.<span class="built_in">push_front</span>(<span class="number">4</span>);</span><br><span class="line">lst.<span class="built_in">push_front</span>(<span class="number">3</span>);</span><br><span class="line">lst.<span class="built_in">push_front</span>(<span class="number">2</span>);</span><br><span class="line">lst.<span class="built_in">push_front</span>(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">auto</span> e : lst)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; e &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="constè¿­ä»£å™¨"><a href="#constè¿­ä»£å™¨" class="headerlink" title="constè¿­ä»£å™¨"></a>constè¿­ä»£å™¨</h2><p><code>const list</code>è¦èƒ½æä¾›<code>const_iterator</code>ï¼Œå› æ­¤æˆ‘ä»¬è¿˜è¦å†™ä¸€ä¸ª<code>const_iterator</code>ç±»â€¦å—ï¼Ÿ</p><p>å…¶å®<strong>å¹¶ä¸ç”¨</strong>ï¼Œè¦åˆ©ç”¨å¥½C++ä¸­çš„<code>æ¨¡æ¿è¯­æ³•</code>æ¥å¤§å¤§æé«˜ä»£ç çš„å¤ç”¨æ€§,å°¤å…¶åƒ<code>iterator</code>å’Œ<code>const_iterator</code>è¿™ç§å·®åˆ«ä¸å¤§çš„ç±»,æ²¡å¿…è¦æ¯ä¸ªéƒ½å•ç‹¬å†™ä¸€æ®µä»£ç </p><p>ä¸ºæ­¤æˆ‘ä»¬çš„<code>__list_iterator</code>åªéœ€è¦èƒ½ç”¨<code>æ¨¡æ¿</code>è§£å†³å¥½äºŒè€…çš„å·®å¼‚å³å¯ã€‚è€Œç›®å‰æœ€å¤§çš„é—®é¢˜æ˜¯ä»€ä¹ˆï¼Ÿæ˜¯<code>operator*()</code>çš„è¿”å›å€¼é—®é¢˜,ä¸€ä¸ªæ˜¯è¿”å›<code>T&amp;</code>,å¦ä¸€ä¸ªæ˜¯<code>const T&amp;</code>,å…¶ä»–çš„æˆå‘˜å‡½æ•°åˆ™åŸºæœ¬æ²¡å·®åˆ«,æ‰€ä»¥ä¸å¦¨æ‰©å……ä¸€ä¸‹<code>æ¨¡æ¿å‚æ•°</code>,æ·»åŠ ä¸€ä¸ª<code>Ref</code>ç±»ã€‚</p><blockquote><p>æœ‰å˜åŒ–çš„ä»£ç å¦‚ä¸‹</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T</span>,<span class="keyword">class</span> <span class="title class_">Ref</span>&gt;<span class="comment">//å¢åŠ ä¸€ä¸ªRefå‚æ•°</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">__list_iterator</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">typedef</span> __list_iterator&lt;T,Ref&gt; Self;<span class="comment">//Selfè¿™é‡Œçš„åŸç±»ä¹Ÿè¦åŠ </span></span><br><span class="line"><span class="keyword">typedef</span> ListNode&lt;T&gt; Node;</span><br><span class="line">Node* _node;</span><br><span class="line"></span><br><span class="line">__list_iterator(Node* node) :_node(node) &#123;&#125;</span><br><span class="line"></span><br><span class="line">Ref <span class="keyword">operator</span>*()<span class="comment">//ç›´æ¥è¿”å›Refç±»</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> _node-&gt;_val;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><em><code>list</code>ç±»ä¹Ÿæœ‰ç›¸åº”å˜åŒ–</em></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="keyword">typedef</span> __list_iterator&lt;T,T&amp;&gt; iterator;<span class="comment">//æ™®é€šè¿­ä»£å™¨</span></span><br><span class="line"><span class="keyword">typedef</span> __list_iterator&lt;T,<span class="type">const</span> T&amp;&gt; const_iterator;<span class="comment">//constè¿­ä»£å™¨</span></span><br><span class="line"></span><br><span class="line">    <span class="function">const_iterator <span class="title">begin</span><span class="params">()</span> <span class="type">const</span> <span class="comment">//é’ˆå¯¹constæŒ‡é’ˆçš„</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">const_iterator</span>(_head-&gt;_next);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">const_iterator <span class="title">end</span><span class="params">()</span> <span class="type">const</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">const_iterator</span>(_head);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·é€šè¿‡å¢åŠ ä¸€ä¸ª<code>Ref</code>æ¨¡æ¿å‚æ•°,å®Œæˆäº†å¯¹<code>iterator</code>å’Œ<code>const_iterator</code>çš„ä»£ç çº§ç»Ÿä¸€(<em>å½“ç„¶æ¨¡æ¿å®ä¾‹åŒ–å‡ºæ¥æ˜¯ä¸ä¸€æ ·çš„</em>)</p><p>ä½†åˆ«å¿˜äº†è¿­ä»£å™¨è¿˜è¦æä¾›<code>-&gt;</code>æ“ä½œç¬¦çš„é‡è½½,è€Œ<code>operator-&gt;()</code>å‡½æ•°è¦è¿”å›ä¸åŒçš„æŒ‡é’ˆï¼Œæ‰€ä»¥æˆ‘ä»¬å¦‚æ³•ç‚®åˆ¶ï¼Œå†å¢åŠ ä¸€ä¸ª<code>Ptr</code>æ¨¡æ¿å‚æ•°</p><blockquote><p>æœ‰å˜åŒ–çš„ä»£ç å¦‚ä¸‹</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T</span>,<span class="keyword">class</span> <span class="title class_">Ref</span>,<span class="keyword">class</span> <span class="title class_">Ptr</span>&gt;<span class="comment">//å¢åŠ ä¸€ä¸ªPtrå‚æ•°</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">__list_iterator</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">typedef</span> __list_iterator&lt;T,Ref,Ptr&gt; Self;<span class="comment">//Selfç›¸åº”æ›´æ”¹</span></span><br><span class="line"></span><br><span class="line">Ptr <span class="keyword">operator</span>-&gt;()<span class="comment">//é‡è½½-&gt;</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> &amp;(_node-&gt;_val);</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><em><code>list</code>ç±»ä¹Ÿæœ‰ç›¸åº”å˜åŒ–</em></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="keyword">typedef</span> __list_iterator&lt;T,T&amp;,T*&gt; iterator;<span class="comment">//æ™®é€šè¿­ä»£å™¨</span></span><br><span class="line"><span class="keyword">typedef</span> __list_iterator&lt;T,<span class="type">const</span> T&amp;,<span class="type">const</span> T*&gt; const_iterator;<span class="comment">//constè¿­ä»£å™¨</span></span><br></pre></td></tr></table></figure><p>è‡³æ­¤ï¼Œ<code>list</code>å’Œ<code>__list_iterator</code>çš„åŸºæœ¬åŠŸèƒ½å·²åŸºæœ¬å®Œæˆï¼Œæœ¬ç¯‡çš„é‡ç‚¹<code>__list_iterator</code>ä¸»è¦è§£å†³äº†ä¸¤ç‚¹é—®é¢˜</p><p>-ä¸ºäº†åº”å¯¹<code>list</code>çš„è¿­ä»£å™¨çš„å¤æ‚æ€§ï¼Œå•ç‹¬ä¸ºå…¶æ„å»ºä¸€ä¸ª<code>__list_iterator</code>ç±»ï¼Œå¹¶æä¾›ä¸€ç³»åˆ—çš„æ“ä½œç¬¦é‡è½½<br>-ä¸ºäº†æé«˜ä»£ç çš„<strong>å¤ç”¨æ€§</strong>,ä»…ç”¨ä¸€ä¸ª<code>__list_iterator</code>ç±»æ¥<code>typedef</code>æ™®é€šè¿­ä»£å™¨å’Œ<code>const</code>è¿­ä»£å™¨,æˆ‘ä»¬å¢åŠ äº†æ¨¡æ¿å‚æ•°,æœ€ç»ˆæ¨¡æ¿å˜ä¸º<code>template&lt;class T, class Ref, class Ptr&gt;</code></p><h2 id="ç”¨æ™®é€šè¿­ä»£å™¨æ„é€ constè¿­ä»£å™¨"><a href="#ç”¨æ™®é€šè¿­ä»£å™¨æ„é€ constè¿­ä»£å™¨" class="headerlink" title="ç”¨æ™®é€šè¿­ä»£å™¨æ„é€ constè¿­ä»£å™¨"></a>ç”¨æ™®é€šè¿­ä»£å™¨æ„é€ constè¿­ä»£å™¨</h2><p>æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦ç”¨æ™®é€šè¿­ä»£å™¨æ„é€ <code>const</code>è¿­ä»£å™¨,äºæ˜¯å¯ä»¥ç»™<code>__list_iterator</code>æä¾›ä¸€ä¸ªæ¯”è¾ƒæœ‰æ„æ€çš„<code>æ„é€ å‡½æ•°</code>,<br>å¯ä»¥å®ç°æ—¶è€Œå……å½“æ‹·è´æ„é€ ï¼Œæ—¶è€Œå……å½“æ»¡è¶³ä¸Šè¿°çš„æ„é€ </p><blockquote><p>ä»£ç å¦‚ä¸‹</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> __list_iterator&lt;T,Ref,Ptr&gt; Self;<span class="comment">//å†å±•ç¤ºä¸€éSelfçš„ä»£ç ï¼Œä¾¿äºä¸‹æ–‡å¯¹æ¯”</span></span><br><span class="line"><span class="keyword">typedef</span> __list_iterator&lt;T,T&amp;,T*&gt; iterator;<span class="comment">//æŒ‡å®šæ™®é€šè¿­ä»£å™¨ï¼Œå¹¶ç”¨typedefç®€åŒ–ä»£ç </span></span><br><span class="line"></span><br><span class="line">__list_iterator(iterator it) :_node(it._node) &#123;&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>-å½“æ¨¡æ¿å‚æ•°ä¸º<code>&lt;T,T&amp;,T*&gt;</code>æ—¶ï¼Œ<code>Self</code>å’Œ<code>iterator</code>ç›¸åŒï¼Œä¸Šæ®µä»£ç ä¸­çš„æ„é€ å‡½æ•°ç›¸å½“äº<code>æ‹·è´æ„é€ </code></p><p>-å½“æ¨¡æ¿å‚æ•°ä¸º<code>&lt;T,const T&amp;,const T*&gt;</code>æ—¶ï¼Œ<code>Self</code>å’Œ<code>iterator</code>ä¸åŒ,<code>Slef</code>æ˜¯<code>const</code>è¿­ä»£å™¨,<code>iterator</code><strong>å§‹ç»ˆ</strong>æ˜¯æ™®é€šè¿­ä»£å™¨ï¼Œè¿™ä¸ªæ„é€ å‡½æ•°ä¾¿èƒ½ç”¨æ™®é€šè¿­ä»£å™¨æ„é€ <code>const</code>è¿­ä»£å™¨</p><h1 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h1><p>é€šè¿‡æ„é€ ä¸€ä¸ª<code>list</code>ç±»ï¼Œæˆ‘ä»¬ä½¿ç”¨åˆ°äº†æ›´å¤æ‚çš„è¿­ä»£å™¨ï¼Œä½¿ç”¨äº†å¸¦<code>3ä¸ªæ¨¡æ¿å‚æ•°</code>çš„<code>__list_iterator</code>ç±»å®šä¹‰æ™®é€šè¿­ä»£å™¨å’Œ<code>const</code>è¿­ä»£å™¨ï¼Œå­¦ä¹ äº†å¦‚ä½•åˆ©ç”¨æ¨¡æ¿å‚æ•°æé«˜ä»£ç çš„å¤ç”¨æ€§ï¼Œå¦‚ä½•æä¾›é¢å¤–çš„<code>æ„é€ å‡½æ•°</code>ä½¿<code>__list_iterator</code>æ”¯æŒç”¨æ™®é€šè¿­ä»£å™¨æ„é€ <code>const</code>è¿­ä»£å™¨</p>]]></content>
      
      
      
        <tags>
            
            <tag> C++ ç±»å’Œå¯¹è±¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vimåŸºç¡€æŒ‡ä»¤é›†</title>
      <link href="/2023/12/11/vim-cmd/"/>
      <url>/2023/12/11/vim-cmd/</url>
      
        <content type="html"><![CDATA[<p><code>Vim</code>æ˜¯ä¸€æ¬¾æ–‡æœ¬ç¼–è¾‘å™¨,ä¸‹é¢ä»‹ç»åœ¨vimç•Œé¢ä¸­çš„å¸¸ç”¨æŒ‡ä»¤</p><p><strong>ä¸‰ç§æ¨¡å¼</strong>:<code>å‘½ä»¤æ¨¡å¼(Command Mode)</code> <code>æ’å…¥æ¨¡å¼ï¼ˆInsert Mode</code> <code>å‘½ä»¤è¡Œæ¨¡å¼ï¼ˆCommand-Line Modeï¼‰</code>ï¼ˆè¿™é‡Œç§°å‘½ä»¤è¡Œæ¨¡å¼ä¸º<code>åº•è¡Œæ¨¡å¼</code>ï¼‰</p><p>ä¸‰è€…å…³ç³»å¦‚ä¸‹å›¾</p><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/PixPin_2023-12-11_10-39-04.png"></p><h1 id="å‘½ä»¤æ¨¡å¼"><a href="#å‘½ä»¤æ¨¡å¼" class="headerlink" title="å‘½ä»¤æ¨¡å¼"></a>å‘½ä»¤æ¨¡å¼</h1><p><code>vim</code>ç•Œé¢ä¸­å¤šæ‘å‡ æ¬¡<code>ESC</code>å°±èƒ½é€€å‡ºå…¶å®ƒæ¨¡å¼å›åˆ°<code>å‘½ä»¤æ¨¡å¼</code>ï¼Œåœ¨è¿™ä¸ªæ¨¡å¼ä¸‹å¯ä»¥ä½¿ç”¨ä¸€ç³»åˆ—vim<a href="https://linux.cn/article-8144-1.html">å¿«æ·é”®</a></p><h1 id="åº•è¡Œæ¨¡å¼"><a href="#åº•è¡Œæ¨¡å¼" class="headerlink" title="åº•è¡Œæ¨¡å¼"></a>åº•è¡Œæ¨¡å¼</h1><p><code>tips</code>:ä¸ç®¡ç›®å‰æ˜¯ä»€ä¹ˆæ¨¡å¼,å…ˆç‹‚æŒ‰<code>ESC</code>,å›åˆ°<code>å‘½ä»¤æ¨¡å¼</code>,ç„¶åè¾“å…¥<code>:</code>è¿›å…¥<code>åº•è¡Œæ¨¡å¼</code>,å‡†å¤‡å¼€å§‹è¾“å‘½ä»¤</p><p><code>å‘½ä»¤ç»„æˆ</code><br><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/PixPin_2023-12-11_12-48-54.png"></p><ul><li>ä¿å­˜<code>:w</code>-&gt;å¼ºåˆ¶ä¿å­˜<code>!w</code></li><li>é€€å‡º<code>:q</code>-&gt;å¼ºåˆ¶é€€å‡º<code>:!q</code></li><li>ä¿å­˜å¹¶é€€å‡º<code>:wq</code>-.å¼ºåˆ¶ä¿å­˜å¹¶é€€å‡º<code>:!wq</code></li><li>å¯¹æ¯”<code>:vs </code>+<code>(æºæ–‡ä»¶è·¯å¾„)</code></li></ul><h1 id="æ’å…¥æ¨¡å¼"><a href="#æ’å…¥æ¨¡å¼" class="headerlink" title="æ’å…¥æ¨¡å¼"></a>æ’å…¥æ¨¡å¼</h1><p>åœ¨<code>å‘½ä»¤æ¨¡å¼</code>ä¸‹æŒ‰é”®ç›˜<code>i</code>è¿›å…¥<code>æ’å…¥æ¨¡å¼</code>ï¼Œæ‰§è¡Œæ­£å¸¸çš„æ–‡æœ¬ç¼–è¾‘åŠŸèƒ½</p>]]></content>
      
      
      
        <tags>
            
            <tag> Linux vim </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä»æ„å»ºä¸€ä¸ªDateç±»å…¥é—¨C++ç±»ä¸å¯¹è±¡</title>
      <link href="/2023/12/07/cpp-class/"/>
      <url>/2023/12/07/cpp-class/</url>
      
        <content type="html"><![CDATA[<h1 id="ç±»çš„å®šä¹‰"><a href="#ç±»çš„å®šä¹‰" class="headerlink" title="ç±»çš„å®šä¹‰"></a>ç±»çš„å®šä¹‰</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Date</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">Init</span><span class="params">(<span class="type">int</span> year = <span class="number">1</span>,<span class="type">int</span> month = <span class="number">1</span>,<span class="type">int</span> day = <span class="number">1</span>)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        _year = year;</span><br><span class="line">        _month = month;</span><br><span class="line">        _day = day;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">Print</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        cout &lt;&lt; _year &lt;&lt; <span class="string">&quot;:&quot;</span> &lt;&lt; _month &lt;&lt; <span class="string">&quot;:&quot;</span> &lt;&lt; _day &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span> _year;</span><br><span class="line">    <span class="type">int</span> _month;</span><br><span class="line">    <span class="type">int</span> _day;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="æŠ½è±¡æ•°æ®ç±»å‹-ç±»"><a href="#æŠ½è±¡æ•°æ®ç±»å‹-ç±»" class="headerlink" title="æŠ½è±¡æ•°æ®ç±»å‹(ç±»)"></a>æŠ½è±¡æ•°æ®ç±»å‹(ç±»)</h2><p>é€šè¿‡å¦‚ä¸Šä»£ç ï¼Œæˆ‘ä»¬å°±åœ¨æºä»£ç ä¸­é€šè¿‡<code>class</code>å£°æ˜äº†ä¸€ä¸ªæŠ½è±¡æ•°æ®ç±»å‹<code>Date</code>,ç®€ç§°<code>ç±»</code>ï¼Œé‚£ä¹ˆå°è£…ä¸€ä¸ªç±»æœ‰ä»€ä¹ˆå¥½å¤„å‘¢ï¼Ÿ<br>å¥½å¤„æ˜¯ç±»æŠŠç›¸å…³çš„æ“ä½œåˆ†ä¸º<strong>ä¸¤ç±»</strong>:</p><ul><li>ç±»çš„<strong>è®¾è®¡è€…</strong>:è´Ÿè´£è€ƒè™‘ç±»çš„å…·ä½“å®ç°ï¼Œæä¾›ç±»çš„æ¥å£ï¼Œæˆå‘˜å˜é‡ç­‰</li><li>ç±»çš„<strong>ä½¿ç”¨è€…</strong>:åªå…³å¿ƒç±»<strong>æä¾›</strong>äº†å“ªäº›åŠŸèƒ½ï¼Œè€Œä¸å…³å¿ƒå…·ä½“å®ç°ï¼Œä»è€Œç®€åŒ–æ€è·¯</li></ul><p>ä»¥ä¸Šé¢çš„<code>Date</code>ç±»ä¸ºä¾‹</p><blockquote><p>å¯¹è®¾è®¡è€…</p></blockquote><ul><li>è¦è€ƒè™‘å®ç°<code>Date</code>,å°±éœ€è¦å£°æ˜<strong>æˆå‘˜å˜é‡</strong><code>_year</code> <code>_month</code> <code>_day</code>,ä»¥åŠå£°æ˜åŠå®ç°<strong>æˆå‘˜å‡½æ•°</strong><code>Init</code>å’Œ<code>Print</code></li></ul><blockquote><p>å¯¹ä½¿ç”¨è€…</p></blockquote><ul><li>åªéœ€çŸ¥é“å¯ä»¥è°ƒç”¨<code>Date</code>çš„<strong>æˆå‘˜å‡½æ•°</strong><code>Init</code>å’Œ<code>Print</code>,ä»¥åŠçŸ¥é“å®ƒä»¬çš„ç”¨å¤„å³å¯</li></ul><h2 id="å®ä¾‹åŒ–-â€“-å°†ç±»çœŸæ­£æŠ•å…¥ä½¿ç”¨"><a href="#å®ä¾‹åŒ–-â€“-å°†ç±»çœŸæ­£æŠ•å…¥ä½¿ç”¨" class="headerlink" title="å®ä¾‹åŒ– â€“ å°†ç±»çœŸæ­£æŠ•å…¥ä½¿ç”¨"></a>å®ä¾‹åŒ– â€“ å°†ç±»çœŸæ­£æŠ•å…¥ä½¿ç”¨</h2><p>ç±»ä¹Ÿå¯ä»¥ç”¨äºå£°æ˜å˜é‡ï¼Œä¾‹å¦‚<code>Date d</code>å°±å£°æ˜äº†ä¸€ä¸ªå˜é‡<code>d</code>,ä½†ç”±äºæ˜¯ç”±<code>ç±»</code>å£°æ˜çš„,æˆ‘ä»¬å°†è¿™ä¸€è¿‡ç¨‹ç§°ä¸º<code>å®ä¾‹åŒ–</code>,å…¶ä¸­<code>Date</code>è¿™æ ·çš„æŠ½è±¡æ•°æ®ç±»å‹ç§°ä¸º<code>ç±»</code>ï¼Œåƒ<code>d</code>è¿™æ ·çš„å˜é‡ç§°ä¸º<code>å¯¹è±¡</code></p><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/PixPin_2024-04-16_11-19-21.png"></p><p>å®ä¾‹åŒ–åçš„å¯¹è±¡æ‹¥æœ‰<strong>ç§æœ‰</strong>çš„<code>æˆå‘˜å˜é‡</code>å’Œæ•´ä¸ªç±»<strong>å…¬æœ‰</strong>çš„<code>æˆå‘˜å‡½æ•°</code>,æ¥ä¸‹æ¥å¯¹<code>å¯¹è±¡</code>çš„æ“ä½œéƒ½æ˜¯å¯¹<code>æˆå‘˜å˜é‡</code>å’Œ<code>æˆå‘˜å‡½æ•°</code>çš„æ“ä½œ</p><h2 id="è®¿é—®æˆå‘˜å‡½æ•°-å˜é‡"><a href="#è®¿é—®æˆå‘˜å‡½æ•°-å˜é‡" class="headerlink" title="è®¿é—®æˆå‘˜å‡½æ•°&#x2F;å˜é‡"></a>è®¿é—®æˆå‘˜å‡½æ•°&#x2F;å˜é‡</h2><h3 id="åœ¨ç±»çš„å†…éƒ¨"><a href="#åœ¨ç±»çš„å†…éƒ¨" class="headerlink" title="åœ¨ç±»çš„å†…éƒ¨"></a>åœ¨<code>ç±»çš„å†…éƒ¨</code></h3><p>å¯¹äºç±»çš„æˆå‘˜å‡½æ•°ï¼Œé™¤äº†æ˜¾å¼å£°æ˜çš„<code>å‡½æ•°å‚æ•°</code>å¤–,è¿˜æœ‰<strong>éšå¼</strong>ä¼ å…¥çš„<code>this</code>æŒ‡é’ˆï¼Œè¿™æ˜¯ä¸ª<strong>é»˜è®¤<code>éconst</code>ä¿®é¥°</strong>çš„,æŒ‡å‘è°ƒç”¨è¯¥æˆå‘˜å‡½æ•°çš„<strong>å¯¹è±¡çš„æŒ‡é’ˆ</strong>,ç¼–è¯‘å™¨å¯ä»¥é€šè¿‡è¿™ä¸ªæŒ‡é’ˆè®¿é—®è¯¥å¯¹è±¡çš„<code>æˆå‘˜å˜é‡</code>å’Œ<code>æˆå‘˜å‡½æ•°</code>ã€‚</p><p>è€Œæˆ‘ä»¬ä½œä¸ºç±»çš„<strong>è®¾è®¡è€…</strong>ï¼Œæ—¢ç„¶è¯­æ³•éƒ½<strong>éšå¼</strong>åœ°ä¼ å…¥<code>this</code>æŒ‡é’ˆäº†ï¼Œè‡ªç„¶ä¹Ÿå¯ä»¥<strong>éšå¼</strong>åœ°è°ƒç”¨<code>æˆå‘˜</code>,å³<strong>ç›´æ¥å†™</strong>å˜é‡å&#x2F;å‡½æ•°åè°ƒç”¨</p><p><em>å½“ç„¶ï¼Œæ‰‹åŠ¨æ˜¾å¼è°ƒç”¨thisæŒ‡é’ˆä¹Ÿæ˜¯å¯ä»¥çš„</em></p><blockquote><p>ä»¥<code>Date</code>ä¸ºä¾‹</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è¯¥å‡½æ•°å£°æ˜åœ¨Dateç±»ä¸­ï¼Œæˆå‘˜å˜é‡è§æ–‡ç« å¼€å¤´</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">TestPrint</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    _year = <span class="number">2024</span>;<span class="comment">//éšå¼è°ƒç”¨thisè®¿é—®æˆå‘˜å˜é‡</span></span><br><span class="line">    <span class="keyword">this</span>-&gt;_month = <span class="number">4</span>;<span class="comment">//æ˜¾å¼è°ƒç”¨this</span></span><br><span class="line">    _day = <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">Print</span>();<span class="comment">//éšå¼è°ƒç”¨thisæ¥è°ƒç”¨æˆå‘˜å‡½æ•°Print()</span></span><br><span class="line">    <span class="keyword">this</span>-&gt;<span class="built_in">Print</span>();<span class="comment">//æ˜¾å¼è°ƒç”¨thisï¼Œæ•ˆæœä¸ä¸Šä¸€å¥ç›¸åŒ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½†ç”±äº<code>const</code>ä¿®é¥°çš„<code>å¯¹è±¡</code>ä¼ å‡ºçš„æ˜¯<code>const</code>ä¿®é¥°çš„<code>this</code>æŒ‡é’ˆï¼Œæ™®é€šçš„<code>this</code>å½¢å‚æ— æ³•æ¥æ”¶ã€‚<br>é‚£ä¹ˆå¦‚ä½•è®©<code>æˆå‘˜å‡½æ•°</code>ä¼ å…¥<code>const</code>ä¿®é¥°çš„<code>this</code>æŒ‡é’ˆ,æ¥ä½¿<code>const</code>ä¿®é¥°çš„<code>å¯¹è±¡</code>æœ‰æˆå‘˜å‡½æ•°å¯è°ƒç”¨å‘¢ï¼Ÿ</p><p>è¯­æ³•è§„å®šï¼Œåœ¨å‡½æ•°çš„å‚æ•°åˆ—è¡¨(<em>åœ†æ‹¬å·åé¢</em>)ç´§è·Ÿä¸€ä¸ª<code>const</code>å¯ä½¿å‡½æ•°ä¼ å…¥<code>const</code>ä¿®é¥°çš„<code>this</code>æŒ‡é’ˆ</p><p><em>è¿™ç§å‡½æ•°ç§°ä¸ºå¸¸é‡æˆå‘˜å‡½æ•°</em></p><blockquote><p><em>ä¸¾ä¸ªä¾‹å­</em></p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç¤ºä¾‹ä»£ç </span></span><br><span class="line"><span class="comment">//è¯¥å‡½æ•°å£°æ˜åœ¨ç±»ä¸­</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">constPrint</span><span class="params">()</span> <span class="type">const</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//....</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åœ¨ç±»çš„å¤–éƒ¨"><a href="#åœ¨ç±»çš„å¤–éƒ¨" class="headerlink" title="åœ¨ç±»çš„å¤–éƒ¨"></a>åœ¨<code>ç±»çš„å¤–éƒ¨</code></h3><p>å’ŒCè¯­è¨€çš„ç»“æ„ä½“ä¸€æ ·ï¼Œè®¿é—®å¯¹è±¡å†…çš„æˆå‘˜æœ‰ä¸¤ç§æ–¹å¼</p><ul><li><em>å¯¹è±¡å</em> + <code>.</code> + æˆå‘˜å ï¼š ç”¨<code>.</code>æ“ä½œç¬¦è®¿é—®å¯¹åº”æˆå‘˜</li><li><em>å¯¹è±¡çš„æŒ‡é’ˆ</em> + <code>-&gt;</code> + æˆå‘˜å : ç”¨<code>-&gt;</code>æ“ä½œç¬¦è®¿é—®æŒ‡é’ˆ<strong>æŒ‡å‘å¯¹è±¡</strong>çš„å¯¹åº”æˆå‘˜</li></ul><blockquote><p>ä»¥<code>Date</code>å®ä¾‹åŒ–ä¸€ä¸ª<code>d</code>ä¸ºä¾‹</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// class Date</span></span><br><span class="line"><span class="comment">// &#123;</span></span><br><span class="line"><span class="comment">//     ....</span></span><br><span class="line"><span class="comment">// &#125;;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test1</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Date d;</span><br><span class="line">    Date* pd = &amp;d;</span><br><span class="line">    d.<span class="built_in">Init</span>(<span class="number">2024</span>,<span class="number">4</span>,<span class="number">1</span>);<span class="comment">// . æ“ä½œç¬¦è°ƒç”¨Initæˆå‘˜å‡½æ•°æ¥åˆå§‹åŒ–å¯¹è±¡</span></span><br><span class="line">    pd-&gt;<span class="built_in">Print</span>();<span class="comment">//-&gt;æ“ä½œç¬¦è°ƒç”¨Printæˆå‘˜å‡½æ•°æ¥æ‰“å°å†…å®¹</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test2</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Date d;</span><br><span class="line">    d._year = <span class="number">2024</span>;<span class="comment">//è¯•å›¾è®¿é—®æˆå‘˜å˜é‡_year,ä½†æ˜¯è®¿é—®æƒé™å†²çª</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//test1è¾“å‡º</span></span><br><span class="line"><span class="number">2024</span>:<span class="number">4</span>:<span class="number">1</span></span><br><span class="line"><span class="comment">//test2è¾“å‡º</span></span><br><span class="line">æŠ¥é”™ï¼Œæ— è¾“å‡ºï¼Œå› ä¸ºè®¿é—®æƒé™å†²çª</span><br></pre></td></tr></table></figure><p>ä»£ç å¦‚ä¸Šï¼Œ<code>test1</code>è¿è¡Œçš„å¾ˆå¥½ï¼Œä½†<code>test2</code>æŠ¥é”™äº†ï¼ŒåŸå› åœ¨äº<code>test2</code>ä½œä¸º<strong>éæˆå‘˜å‡½æ•°</strong>è®¿é—®äº†è®¿é—®é™å®šç¬¦<code>private</code>æ§åˆ¶çš„æˆå‘˜<code>_year</code>,æƒé™å†²çªï¼Œå°±ä¼šæŠ¥é”™ã€‚</p><p>ç”±æ­¤ï¼ŒC++ç±»å’Œå¯¹è±¡è¿˜æœ‰ä¸€ä¸ªé‡è¦æ¦‚å¿µéœ€è¦å¼ºè°ƒâ€“<strong>è®¿é—®æ§åˆ¶</strong></p><h2 id="è®¿é—®æƒé™æ§åˆ¶ä¸å°è£…"><a href="#è®¿é—®æƒé™æ§åˆ¶ä¸å°è£…" class="headerlink" title="è®¿é—®æƒé™æ§åˆ¶ä¸å°è£…"></a>è®¿é—®æƒé™æ§åˆ¶ä¸å°è£…</h2><p>ä½¿ç”¨ç±»å’Œå¯¹è±¡ç¼–ç¨‹çš„ä¸€å¤§ä¼˜ç‚¹å°±æ˜¯ç±»å¯ä»¥<code>å°è£…</code>ä»£ç ï¼Œè®©ä½¿ç”¨è€…åªèƒ½ä½¿ç”¨å…¬æœ‰çš„æ¥å£å’Œæˆå‘˜å˜é‡ï¼Œè€Œå¯¹å†…éƒ¨çš„å…·ä½“å®ç°ä¸å¯è§ï¼Œæ¥æé«˜ç±»çš„<code>æ˜“ç”¨æ€§</code>å’Œ<code>å®‰å…¨æ€§</code></p><p>æ‰€ä»¥C++è¯­æ³•æä¾›äº†ä¸‰ç§<code>è®¿é—®è¯´æ˜ç¬¦</code>(<em>access specifiers</em>)</p><ul><li>public: è¯¥è¯´æ˜ç¬¦ä¹‹åçš„æˆå‘˜åœ¨æ•´ä¸ªç¨‹åºå†…å¯è¢«è®¿é—®</li><li>private: ä¹‹åçš„æˆå‘˜ä»…å¯è¢«è¯¥ç±»çš„çš„ç±»åŸŸé‡Œï¼ˆ<em>å¦‚æˆå‘˜å‡½æ•°</em>ï¼‰è®¿é—®</li><li>protected: ä¸€èˆ¬åŒ<code>private</code>,ä¸»è¦ç‰¹ç‚¹ä½“ç°åœ¨ç±»çš„ç»§æ‰¿ï¼Œè¿™é‡Œ<strong>ä¸ä½œè®¨è®º</strong></li></ul><h3 id="ä½œç”¨èŒƒå›´"><a href="#ä½œç”¨èŒƒå›´" class="headerlink" title="ä½œç”¨èŒƒå›´"></a>ä½œç”¨èŒƒå›´</h3><p>æŸä¸€<code>è®¿é—®è¯´æ˜ç¬¦</code>çš„ä½œç”¨èŒƒå›´å¼€å§‹äºå®ƒçš„<code>å†’å·</code>,ç»ˆæ­¢äºä¸‹ä¸€ä¸ª<code>è®¿é—®è¯´æ˜ç¬¦</code>æˆ–<code>ç±»çš„ç»“å°¾</code>,è€Œ<code>ç±»çš„å¼€å§‹</code>åˆ°ç¬¬ä¸€ä¸ª<code>è®¿é—®è¯´æ˜ç¬¦</code>å‰çš„è®¿é—®æƒé™å–å†³äº<strong>å£°æ˜</strong>ç±»çš„<code>å…³é”®å­—</code>,åˆ†ç±»å¦‚ä¸‹</p><ul><li><code>class</code>é»˜è®¤ä¸º<code>private</code>æƒé™</li><li><code>struct</code>é»˜è®¤ä¸º<code>public</code>æƒé™</li></ul><blockquote><p>å›¾ä¾‹å¦‚ä¸‹</p></blockquote><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/PixPin_2024-04-18_14-15-40.png"></p><p>å®é™…ä¸Š<code>class</code>å’Œ<code>struct</code>é™¤äº†é»˜è®¤æƒé™ä¸ä¸€æ ·ï¼ŒåŸºæœ¬<strong>æ²¡æœ‰å·®åˆ«</strong>ã€‚</p><p>æ‰€ä»¥ä¸ºäº†é˜²æ­¢è¯¯è¯»ï¼Œ<strong>æé«˜å¯è¯»æ€§</strong>,<strong>ä¸å»ºè®®</strong>åœ¨<code>é»˜è®¤åŒº</code>å†™ä»£ç ,è€Œæ˜¯ä¿è¯æ¯æ®µè¯­å¥å‰éƒ½æœ‰åˆé€‚çš„<code>è®¿é—®é™å®šç¬¦</code></p><h3 id="å°è£…"><a href="#å°è£…" class="headerlink" title="å°è£…"></a>å°è£…</h3><p>ä½œä¸ºç±»çš„è®¾è®¡è€…ï¼Œä¸€ä¸ªç±»æŒ‰<code>è®¿é—®æƒé™</code>å¯ä»¥åˆ†ä¸ºä¸¤ä¸ªåŒº</p><ul><li><code>public</code>: å°†æä¾›ç»™<code>ä½¿ç”¨è€…</code>çš„<code>æ¥å£ï¼ˆå‡½æ•°ï¼‰</code>å’Œ<code>æˆå‘˜å˜é‡</code>å£°æ˜åœ¨æ­¤ï¼Œç”¨äºå¤–éƒ¨è°ƒç”¨æ¥å£å’Œä¿®æ”¹éç§æœ‰çš„æˆå‘˜å‡½æ•°</li><li><code>private</code>: ç”¨äºå­˜æ”¾<strong>å—ä¿æŠ¤</strong>çš„<code>æˆå‘˜å˜é‡</code>å’Œ<code>æˆå‘˜å‡½æ•°</code>,é˜²æ­¢å¤–éƒ¨ä½¿ç”¨è€…<em>æ„å¤–</em>æˆ–<em>æ¶æ„</em>è°ƒç”¨æˆ–ä¿®æ”¹,é€ æˆç±»çš„å†…éƒ¨ç»“æ„è¢«ç ´åç­‰<strong>å®‰å…¨é—®é¢˜</strong>,æ‰€ä»¥ç‰¹åˆ«é‡è¦çš„æˆå‘˜å˜é‡ï¼Œå’Œä¸å¸Œæœ›è¢«å¤–éƒ¨è°ƒç”¨çš„å‡½æ•°å£°æ˜åœ¨è¿™é‡Œ</li></ul><blockquote><p>ä¾‹å¦‚åœ¨å£°æ˜<code>Date</code>ç±»æ—¶ï¼Œæˆ‘ä»¬å°†<code>Init</code>å’Œ<code>Print</code>æ¥å£æä¾›ç»™ä½¿ç”¨è€…ï¼Œç”¨<code>public</code>æ§åˆ¶ï¼›<code>_year</code>ç­‰æˆå‘˜å˜é‡ä¸å¸Œæœ›è¢«å¤–éƒ¨éšæ„ä¿®æ”¹ï¼Œå°±ç”¨<code>private</code>æ§åˆ¶</p></blockquote><h1 id="è¿›é˜¶"><a href="#è¿›é˜¶" class="headerlink" title="è¿›é˜¶"></a>è¿›é˜¶</h1><p>å­¦å®Œä»¥ä¸Šå†…å®¹ï¼Œä¸è¿‡æ˜¯ä¼šå†™ä¸ªé«˜çº§ç‚¹çš„<code>ç»“æ„ä½“</code>è€Œå·²ï¼Œè¦å†™ä¸€ä¸ªå®Œæ•´çš„ç±»ï¼Œè¿˜éœ€è¦å­¦ä¹ æ›´å¤šçš„è¯­æ³•çŸ¥è¯†</p><h2 id="æ„é€ å‡½æ•°"><a href="#æ„é€ å‡½æ•°" class="headerlink" title="æ„é€ å‡½æ•°"></a>æ„é€ å‡½æ•°</h2><p>åƒæœ¬ç¯‡çš„<code>Date</code>ç±»é‚£æ ·æ˜¾å¼åœ°è°ƒç”¨<code>Init</code>å‡½æ•°æ¥åˆå§‹åŒ–æ˜¯éå¸¸æŒ«çš„ï¼Œæ—¢ç„¶è¯­è¨€æœ¬èº«çš„<code>å†…ç½®ç±»å‹</code>å¯ä»¥åœ¨å£°æ˜çš„æ—¶å€™åˆå§‹åŒ–ï¼Œé‚£ä¹ˆç±»çš„è®¾è®¡è€…è®¾è®¡å‡ºæ¥çš„ç±»ä¹Ÿåº”å½“æä¾›<code>åˆå§‹åŒ–çš„æ¥å£</code>,è€Œæ”¯æŒè¿™ä¸€åŠŸèƒ½çš„æ¥å£ä¾¿æ˜¯<code>æ„é€ å‡½æ•°</code></p><p>æŒ‰è¯­æ³•è§„å®šï¼Œ<code>æ„é€ å‡½æ•°</code>çš„å‡½æ•°åå¿…é¡»æ˜¯<code>ç±»å</code>,<strong>æ²¡æœ‰è¿”å›å€¼</strong>ï¼Œ<code>const</code>ä¿®é¥°çš„æˆå‘˜å˜é‡å¿…é¡»ä½äº<code>åˆå§‹åŒ–åˆ—è¡¨</code>,å…¶å®ƒåˆ™å¯çœç•¥ã€‚<em>å…³äºåˆå§‹åŒ–åˆ—è¡¨ï¼Œç¨åè¯¦ç»†è§£é‡Š</em></p><blockquote><p>ä»¥<code>Date</code>ç±»ä¸ºä¾‹</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Date</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">//ä¸€ä¸ªæ™®é€šçš„æ„é€ å‡½æ•°</span></span><br><span class="line">    <span class="built_in">Date</span>(<span class="type">int</span> year,<span class="type">int</span> month,<span class="type">int</span> day)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//è¿›å…¥æ‹¬å·æ—¶æˆå‘˜å˜é‡å·²ç»å£°æ˜ï¼Œä¸”æœªåˆå§‹åŒ–</span></span><br><span class="line">        _year = year;<span class="comment">//è¿™æ˜¯ä¸€ä¸ªèµ‹å€¼æ“ä½œï¼Œè€Œä¸æ˜¯åˆå§‹åŒ–</span></span><br><span class="line">        _month = month;</span><br><span class="line">        _day = day;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span> _year;</span><br><span class="line">    <span class="type">int</span> _month;</span><br><span class="line">    <span class="type">int</span> _day;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">Date <span class="title">d</span><span class="params">(<span class="number">2024</span>,<span class="number">4</span>,<span class="number">1</span>)</span></span>;<span class="comment">//ä½¿ç”¨æ„é€ å‡½æ•°å£°æ˜äº†ä¸€ä¸ªdå¯¹è±¡</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šçš„æ„é€ å‡½æ•°åŸºæœ¬èƒ½ç”¨äº†,ä½†è¿˜æœ‰ä¸¤ä¸ªé—®é¢˜</p><ul><li>æ„é€ å‡½æ•°æ²¡æœ‰åˆå§‹åŒ–æˆå‘˜å˜é‡ï¼Œè€Œæ˜¯é‡‡ç”¨èµ‹å€¼æ“ä½œ,æ— æ³•åˆå§‹åŒ–<code>const</code>ä¿®é¥°çš„æˆå‘˜å˜é‡</li><li>ä½¿ç”¨<code>Date d</code>æ˜¯ä¼šæŠ¥é”™çš„ï¼Œå› ä¸ºæ²¡æœ‰æä¾›<code>é»˜è®¤æ„é€ å‡½æ•°</code></li></ul><p>å¯¹äº<strong>ç¬¬ä¸€ä¸ªé—®é¢˜</strong>ï¼Œå°±è¦å¼•å…¥<code>åˆå§‹åŒ–åˆ—è¡¨</code>è¿™ä¸€æ¦‚å¿µï¼Œè®©åˆå§‹åŒ–å‡½æ•°ç›´æ¥æ‹¥æœ‰<code>åˆå§‹åŒ–æˆå‘˜å˜é‡</code>çš„åŠŸèƒ½</p><p>åˆå§‹åŒ–åˆ—è¡¨ä½äºæ„é€ å‡½æ•°çš„å‚æ•°åˆ—è¡¨ä¹‹åï¼ŒèŠ±æ‹¬å·ä¹‹å‰ï¼Œä»¥<code>:</code>å¼€å¤´ï¼Œç”¨<code>,</code>åˆ†éš”æˆå‘˜å˜é‡</p><blockquote><p>ä»¥<code>Date</code>ä¸ºä¾‹</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Date</span>(<span class="type">int</span> year,<span class="type">int</span> month,<span class="type">int</span> day):_year(year) , _month(month) , _day(day) &#123;&#125;</span><br><span class="line"><span class="comment">//æˆ–è€…æ¢ä¸ªä¹¦å†™æ ¼å¼ï¼ˆäºŒè€…å®Œå…¨ç­‰ä»·ï¼‰</span></span><br><span class="line"><span class="built_in">Date</span>(<span class="type">int</span> year,<span class="type">int</span> month,<span class="type">int</span> day):_year(year) </span><br><span class="line">, _month(month) </span><br><span class="line">, _day(day) </span><br><span class="line">&#123;&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡è¿™æ ·<code>åˆå§‹åŒ–åˆ—è¡¨</code>,ä¾¿èƒ½åœ¨å£°æ˜å¯¹è±¡æ—¶ï¼Œ<strong>ç›´æ¥</strong>åˆå§‹åŒ–æˆå‘˜å˜é‡</p><p>å¯¹äº<strong>é—®é¢˜äºŒ</strong>ï¼Œæˆ‘ä»¬å¼€å¯å¦ä¸€ä¸ªä¸ªå°ä¸“é¢˜</p><h3 id="æ„é€ å‡½æ•°çš„é‡è½½å’Œç¼ºçœå‚æ•°"><a href="#æ„é€ å‡½æ•°çš„é‡è½½å’Œç¼ºçœå‚æ•°" class="headerlink" title="æ„é€ å‡½æ•°çš„é‡è½½å’Œç¼ºçœå‚æ•°"></a>æ„é€ å‡½æ•°çš„é‡è½½å’Œç¼ºçœå‚æ•°</h3><p>æ²¡é”™ï¼Œæ„é€ å‡½æ•°å’Œå‡½æ•°ä¸€æ ·ï¼Œä¹Ÿæ˜¯èƒ½<code>é‡è½½</code>å’Œç»™å‚æ•°ä¼ <code>ç¼ºçœå€¼</code>çš„</p><p><em>ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬èƒ½å†™å¥½å‡ ä¸ªæ„é€ å‡½æ•°</em></p><p>ä¸‹é¢ç‰¹åˆ«è¯´æ˜å‡ ä¸ª<strong>ç‰¹æ®Š</strong>çš„æ„é€ å‡½æ•°</p><h4 id="é»˜è®¤æ„é€ å‡½æ•°"><a href="#é»˜è®¤æ„é€ å‡½æ•°" class="headerlink" title="é»˜è®¤æ„é€ å‡½æ•°"></a>é»˜è®¤æ„é€ å‡½æ•°</h4><p>åŸåˆ™ä¸Šå¯¹äºæ¯ä¸€ä¸ªç±»ï¼Œéƒ½åº”è¯¥æä¾›<strong>æœ‰ä¸”ä»…æœ‰ä¸€ä¸ª</strong>é»˜è®¤æ„é€ å‡½æ•°ï¼ˆ*å¤šä¸ª<code>é»˜è®¤æ„é€ å‡½æ•°</code>ä¼šæŠ¥é”™!*ï¼‰</p><p>è€Œè¦<strong>å£°æ˜</strong>é»˜è®¤æ„é€ å‡½æ•°ï¼Œåªéœ€å£°æ˜<code>æ— å‚æ•°</code>æ„é€ å‡½æ•°ï¼Œæˆ–è€…<code>å…¨ç¼ºçœå‚æ•°</code>æ„é€ å‡½æ•°å³å¯</p><blockquote><p>ä»¥<code>Date</code>ä¸ºä¾‹</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Date</span>():_year(<span class="number">2024</span>),_month(<span class="number">4</span>),_day(<span class="number">1</span>)&#123;&#125;</span><br><span class="line"><span class="comment">//====åˆ†å‰²çº¿=======</span></span><br><span class="line"><span class="comment">//æˆ–è€…å…¨ç¼ºçœï¼Œä¸¤ä¸ªå‡½æ•°ä¸èƒ½åŒæ—¶å£°æ˜</span></span><br><span class="line"><span class="built_in">Date</span>(<span class="type">int</span> year = <span class="number">2024</span>,<span class="type">int</span> month = <span class="number">4</span>,<span class="type">int</span> day = <span class="number">1</span>): _year(year),_month(month),_day(day)&#123;&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šå°±æ˜¯ä¸¤ç§é»˜è®¤æ„é€ å‡½æ•°çš„å£°æ˜å½¢å¼</p><h4 id="æ‹·è´æ„é€ å‡½æ•°"><a href="#æ‹·è´æ„é€ å‡½æ•°" class="headerlink" title="æ‹·è´æ„é€ å‡½æ•°"></a>æ‹·è´æ„é€ å‡½æ•°</h4><p>æœ‰æ—¶å€™æˆ‘ä»¬ä¼šå¸Œæœ›ç”¨<strong>ç°æœ‰çš„</strong>çš„å¯¹è±¡å»åˆå§‹åŒ–ä¸€ä¸ª<strong>æ–°</strong>å¯¹è±¡,æ­¤æ—¶å¯¹åº”çš„æ„é€ å‡½æ•°å°±ç§°ä¸º<code>æ‹·è´æ„é€ ï¼ˆå‡½æ•°ï¼‰</code></p><p><code>æ‹·è´æ„é€ </code>çš„å£°æ˜æ–¹å¼ä¸º<code>æ„é€ å‡½æ•°</code>+å‚æ•°ç±»å‹ä¸º<code>ç±»æœ¬èº«çš„å¼•ç”¨ä¼ å‚</code>,ä¸åŠ <code>&amp;</code>çš„è¯å°±ä¼šæ­»é€’å½’æŠ¥é”™,æœ‰æ— <code>const</code>çš†å¯ï¼Œä½†ç”±äºæ˜¯å®ç°<code>æ‹·è´åŠŸèƒ½</code>ï¼Œä¸€èˆ¬æ˜¯åŠ <code>const</code>çš„</p><blockquote><p>ä»¥<code>Date</code>ä¸ºä¾‹</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Date</span>(<span class="type">const</span> Date&amp; d):_year(d._year),_month(d._month),_day(d._day)&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä½¿ç”¨ç¤ºä¾‹</span></span><br><span class="line"><span class="function">Date <span class="title">d</span><span class="params">(<span class="number">2024</span>,<span class="number">4</span>,<span class="number">1</span>)</span></span>;</span><br><span class="line"><span class="function">Date <span class="title">copy1</span><span class="params">(d)</span></span>;<span class="comment">//è°ƒç”¨æ–¹å¼ä¸€</span></span><br><span class="line">Date copy2 = d;<span class="comment">//è°ƒç”¨æ–¹å¼äºŒ,æ­¤æ—¶ä¸ä¼šè°ƒç”¨operator=()</span></span><br><span class="line"></span><br><span class="line">copy1 = copy2;<span class="comment">//è¿™ç§å¹¶ä¸ä¼šè°ƒç”¨æ‹·è´æ„é€ ,è€Œæ˜¯è°ƒç”¨operator=()</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="ä½¿ç”¨æ¨¡æ¿çš„ç±»çš„å‡½æ•°ç¼ºçœå€¼"><a href="#ä½¿ç”¨æ¨¡æ¿çš„ç±»çš„å‡½æ•°ç¼ºçœå€¼" class="headerlink" title="ä½¿ç”¨æ¨¡æ¿çš„ç±»çš„å‡½æ•°ç¼ºçœå€¼"></a>ä½¿ç”¨æ¨¡æ¿çš„ç±»çš„å‡½æ•°ç¼ºçœå€¼</h4><p>æœ‰æ—¶æˆ‘ä»¬åœ¨ä½¿ç”¨ç±»æ¨¡æ¿æ¥è®¾è®¡ç±»æ—¶ï¼Œéœ€è¦ç»™<code>æ¨¡ç‰ˆç±»</code>ç±»å‹çš„å½¢å‚æä¾›ä¸€ä¸ªç¼ºçœå€¼ï¼Œæœ‰äº›äººå¯èƒ½ä¼šå†™ä¸ª<code>0</code>,ä½†æ˜¯å…¶å®æ˜¯<strong>é”™çš„</strong>ï¼Œæ­£ç¡®çš„åšæ³•æ˜¯ä¼ ä¸€ä¸ª<code>ä¸´æ—¶å˜é‡</code></p><p>ä½†æ­¤æ—¶è¦æ±‚<code>æ¨¡æ¿å‚æ•°ä¸­çš„ç±»</code>æœ‰å¯ç”¨çš„<code>é»˜è®¤æ„é€ å‡½æ•°</code>å’Œ<code>æ‹·è´æ„é€ </code>ç”¨äºè°ƒç”¨</p><blockquote><p>ä»¥é“¾è¡¨èŠ‚ç‚¹<code>Node</code>ä¸ºä¾‹</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">value_type</span>&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Node</span></span><br><span class="line">&#123;</span><br><span class="line">    value_type _val;</span><br><span class="line">    Node&lt;value_type&gt;* _next;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">Node</span>(<span class="type">const</span> value_type&amp; val = <span class="built_in">value_type</span>()):_val(val),_next(<span class="literal">nullptr</span>)&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä»¥ç”¨æœ¬æ–‡çš„Dateå®ä¾‹åŒ–ä¸ºä¾‹</span></span><br><span class="line">Node&lt;Date&gt; node;</span><br><span class="line"><span class="comment">//é€šè¿‡è¾“å‡ºä¼šå‘ç°nodeä¸­çš„valå·²ç»è°ƒç”¨äº†é»˜è®¤æ„é€ å‡½æ•°</span></span><br><span class="line">node.val.<span class="built_in">TestPrint</span>();</span><br></pre></td></tr></table></figure><h2 id="ææ„å‡½æ•°"><a href="#ææ„å‡½æ•°" class="headerlink" title="ææ„å‡½æ•°"></a>ææ„å‡½æ•°</h2><p>å¯¹äºå£°æ˜åœ¨<code>æ ˆåŒº</code>æˆ–<code>é™æ€åŒº</code>çš„æˆå‘˜å‡½æ•°ï¼Œç¨‹åºå®Œå…¨å¯ä»¥è‡ªåŠ¨é”€æ¯ï¼Œ<br>ä½†å¦‚æœ<code>æˆå‘˜å˜é‡</code>æœ‰æŒ‡å‘åœ¨<code>å †åŒº</code>å£°æ˜çš„æŸæ®µ<code>å†…å­˜å—</code>,åœ¨è¯¥å¦‚æœåªæ˜¯ä»ç”±ç¨‹åºè‡ªåŠ¨<br>é”€æ¯è¿™ä¸ªæŒ‡é’ˆï¼Œé‚£ä¹ˆé‚£æ®µ<code>å†…å­˜å—</code>å°±ä¼šä¸€ç›´å¤„äº<strong>æœªé‡Šæ”¾</strong>çš„çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯é€ æˆå†…å­˜æ³„æ¼ï¼Œ<br>ä¹Ÿå°±æ˜¯è¯´æ­¤æ—¶ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆçš„<code>ææ„å‡½æ•°</code>å·²ç»ä¸èƒ½æ»¡è¶³éœ€æ±‚,ç¼–è¯‘å™¨å¹¶ä¸çŸ¥é“å¦‚ä½•å¤„ç†å£°æ˜åœ¨<code>å †åŒº</code>ä¸Šçš„æ•°æ®,<br>è¿™éƒ¨åˆ†æ“ä½œåº”ç”±ç±»çš„è®¾è®¡è€…æ¥è§„åˆ’</p><p>æ‰€ä»¥æˆ‘ä»¬åº”å½“<strong>æ˜¾å¼</strong>åœ°å£°æ˜ä¸€ä¸ªåˆç†çš„<code>ææ„å‡½æ•°</code></p><p><code>ææ„å‡½æ•°</code>çš„å‡½æ•°åä¹Ÿæ˜¯ç”±è¯­æ³•è§„å®šçš„ï¼Œä¸º<code>~</code>+<code>ç±»å</code>,å¹¶ä¸”<strong>ä¸èƒ½</strong>å£°æ˜å½¢å‚</p><blockquote><p>ä»¥ä¸€ä¸ª<code>æŒ‡é’ˆç±»</code>ä¸ºä¾‹</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Ptr</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Ptr</span>()<span class="comment">//æ„é€ å‡½æ•°</span></span><br><span class="line">    &#123; </span><br><span class="line">        _ptr = <span class="keyword">new</span> <span class="built_in">int</span>(<span class="number">1</span>); </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ~<span class="built_in">Ptr</span>()<span class="comment">//ææ„å‡½æ•°</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">delete</span> _ptr;<span class="comment">//æ‰‹åŠ¨delteå †åŒºä¸Šçš„æ•°æ®</span></span><br><span class="line">        _ptr = <span class="literal">nullptr</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span>* _ptr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ç±»çš„é‡è½½æ“ä½œç¬¦"><a href="#ç±»çš„é‡è½½æ“ä½œç¬¦" class="headerlink" title="ç±»çš„é‡è½½æ“ä½œç¬¦"></a>ç±»çš„é‡è½½æ“ä½œç¬¦</h2><p>C++è¯­æ³•æä¾›äº†é‡è½½æ“ä½œç¬¦çš„å‡½æ•°ï¼Œè€Œç”±äº<code>this</code>æŒ‡é’ˆçš„å­˜åœ¨ï¼Œåœ¨ç±»çš„<code>å†…éƒ¨å£°æ˜</code>é‡è½½æ“ä½œç¬¦å‡½æ•°ä¼šç¨æœ‰ä¸åŒ</p><p>-å¯¹äºä¸€å…ƒæ“ä½œç¬¦ï¼Œ<code>[]</code>,<code>-&gt;</code>ä¹‹ç±»çš„é‡è½½ï¼Œä¸å†éœ€è¦<code>æ˜¾å¼ä¼ å‚</code><br>-å¯¹äºäºŒå…ƒæ“ä½œç¬¦ï¼Œ<code>+</code>,<code>&gt;</code>ä¹‹ç±»åªéœ€è¦ä¼ <code>å³æ“ä½œæ•°</code></p><blockquote><p>ä»¥<code>Date</code>ç±»ä¸ºä¾‹</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åœ¨ç±»çš„å†…éƒ¨,é‡æ„ä¸€ä¸ª ==</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="type">bool</span> <span class="keyword">operator</span>==(<span class="type">const</span> Date&amp; date) <span class="type">const</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> _year == date._year</span><br><span class="line">            &amp;&amp; _month == date._month</span><br><span class="line">            &amp;&amp; _day == date._day;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h1 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h1><p>è‡³æ­¤ï¼ŒC++ç±»å’Œå¯¹è±¡å·²åŸºæœ¬å…¥é—¨ï¼Œå†è¿›é˜¶çš„<code>è¿­ä»£å™¨</code>,<code>ç»§æ‰¿</code>,<code>è™šç»§æ‰¿</code>ç­‰å°†å•ç‹¬å‡ºåšå®¢ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> C++ ç±»å’Œå¯¹è±¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æŒ‡é’ˆè¯¦è§£</title>
      <link href="/2023/11/23/pointer/"/>
      <url>/2023/11/23/pointer/</url>
      
        <content type="html"><![CDATA[<p><em>è¿™ç¯‡è´¨é‡ä¸å¤ªè¡Œ:ï¼ˆ</em></p><h1 id="å†…å­˜å’Œåœ°å€"><a href="#å†…å­˜å’Œåœ°å€" class="headerlink" title="å†…å­˜å’Œåœ°å€"></a>å†…å­˜å’Œåœ°å€</h1><p>åœ¨äº†è§£æŒ‡é’ˆä¹‹å‰ï¼Œå…ˆè®²è®²å†…å­˜æ˜¯å¦‚ä½•ç®¡ç†çš„</p><p>é¦–å…ˆå› ä¸ºå†…å­˜å¾ˆå¤§ï¼ˆä¸€èˆ¬æœ‰å‡ ä¸ªGï¼‰,æ‰€ä»¥ä¸ºäº†é«˜æ•ˆç®¡ç†ï¼Œæœ‰äº†<code>å†…å­˜å•å…ƒ</code>çš„æ¦‚å¿µã€‚è€Œè¿™ä¸ªå•å…ƒçš„å¤§å°ï¼Œæ­£å¥½æ˜¯ä¸€ä¸ªå­—èŠ‚ã€‚</p><p>å› ä¸ºä¸€ä¸ª<code>æ¯”ç‰¹ä½</code>å°±æ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶ä½ï¼Œå¤ªå°äº†ï¼Œè¶…è¿‡ä¸€ä¸ªå­—èŠ‚ï¼Œåœ¨å¤„ç†<code>char</code>è¿™æ ·ä¸€ä¸ªå­—èŠ‚é•¿çš„å˜é‡å¾ˆéº»çƒ¦ã€‚</p><p>å®šä¸‹é•¿åº¦åï¼Œå°±å¯ä»¥ç»™å†…å­˜å•å…ƒç¼–å·ï¼Œè€Œæ¯ä¸ªå†…å­˜å•å…ƒè·å¾—çš„ç‹¬ä¸€æ— äºŒçš„ç¼–å·ï¼Œä¾¿æ˜¯å®ƒçš„<strong>åœ°å€</strong>,ä»¥å£°æ˜äº†ä¸€ä¸ªå˜é‡aä¸ºä¾‹,ç¤ºæ„å›¾å¦‚ä¸‹</p><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/Snipaste_2023-11-23_09-59-30.png"></p><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/Snipaste_2023-11-23_10-21-48.png"></p><h2 id="å˜é‡çš„åœ°å€"><a href="#å˜é‡çš„åœ°å€" class="headerlink" title="å˜é‡çš„åœ°å€"></a>å˜é‡çš„åœ°å€</h2><p>ä¸Šå›¾ä¸­<code>a</code>å 4ä¸ªå­—èŠ‚ï¼Œæ¯ä¸ªå­—èŠ‚éƒ½æœ‰è‡ªå·±çš„åœ°å€ï¼Œä½†è¦æ‰¾åˆ°<code>a</code>å…¶å®åªéœ€è¦æ‰¾åˆ°ç¬¬ä¸€ä¸ªåœ°å€å°±è¡Œäº†ï¼Œå®é™…ä¸Šåœ¨<code>Cè¯­è¨€</code>ä¸­ä¹Ÿæ˜¯å¦‚æ­¤,<code>a</code>çš„åœ°å€å°±æ˜¯<code>é¦–å­—èŠ‚åœ°å€</code>,å³å›¾ä¸­çš„<code>0x000000AF88DFF6A4</code></p><h2 id="å…³äºå‡ ä¸ªåè¯"><a href="#å…³äºå‡ ä¸ªåè¯" class="headerlink" title="å…³äºå‡ ä¸ªåè¯"></a>å…³äºå‡ ä¸ªåè¯</h2><p>åœ¨<code>Cè¯­è¨€</code>ä¸­ç§°<code>åœ°å€</code>ä¸º<code>æŒ‡é’ˆ</code>,<strong>å‚¨å­˜</strong>åœ°å€çš„å˜é‡å«<code>æŒ‡é’ˆå˜é‡</code>,å¹³æ—¶ä¹Ÿ<strong>ç®€ç§°</strong><code>æŒ‡é’ˆ</code>,æ­¤æ—¶å¼ºè°ƒçš„æ˜¯<code>æŒ‡é’ˆå˜é‡</code>é‡Œå‚¨å­˜çš„åœ°å€ï¼Œè€Œä¸æ˜¯è¿™ä¸ªå˜é‡ã€‚</p><h2 id="æŒ‡é’ˆå˜é‡çš„ç»„æˆ"><a href="#æŒ‡é’ˆå˜é‡çš„ç»„æˆ" class="headerlink" title="æŒ‡é’ˆå˜é‡çš„ç»„æˆ"></a>æŒ‡é’ˆå˜é‡çš„ç»„æˆ</h2><p>æŒ‡é’ˆå˜é‡ä¹Ÿè¦<strong>æ‹†æˆä¸¤éƒ¨åˆ†</strong>æ¥çœ‹</p><p>ä¸€ä¸ªæ˜¯å˜é‡çš„<code>å€¼</code>,åœ¨åŒä¸€ä¸ªç¨‹åºä¸­ï¼Œæ‰€æœ‰æŒ‡é’ˆå˜é‡çš„å€¼çš„<code>é•¿åº¦</code>éƒ½æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æŒ‡å‘äº†æŸ<strong>ä¸€</strong>ä¸ªå†…å­˜ä¸­çš„<code>å­—èŠ‚</code>, è‡³äºå…·ä½“å¤šé•¿ï¼Œå–å†³äºç¯å¢ƒ:<code>32ä½ç¨‹åºæ˜¯4ä¸ªå­—èŠ‚</code>,<code>64ä½ç¨‹åºæ˜¯8ä¸ªå­—èŠ‚</code></p><p>å¦ä¸€ä¸ªæ˜¯å˜é‡çš„<code>ç±»å‹</code>,ç±»å‹å†³å®šç¼–è¯‘å™¨ä»<code>å€¼</code>æ‰€æŒ‡å‘çš„å­—èŠ‚ï¼Œå‘åæ€»å…±è¯»<strong>å‡ ä¸ª</strong>å­—èŠ‚ï¼Œä»¥åŠç”¨<strong>ä»€ä¹ˆæ–¹å¼</strong>è¯»å–å†…å­˜é‡Œçš„å†…å®¹ã€‚ä»¥ä¸‹å›¾çš„ä»£ç ä¸ºä¾‹</p><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/Snipaste_2023-11-23_11-36-47.png"></p><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/Snipaste_2023-11-23_11-29-53.png"></p><p>å¯ä»¥çœ‹åˆ°ä¸‰ç§æŒ‡é’ˆæŒ‡å‘äº†<strong>åŒä¸€ä¸ª</strong>å­—èŠ‚ï¼Œå³å®ƒä»¬çš„å€¼æ˜¯ç›¸ç­‰çš„ï¼Œä½†<code>æŒ‡é’ˆç±»å‹</code>ä¸åŒï¼Œè§£å¼•ç”¨ä¹‹åå¾—åˆ°çš„<code>å€¼</code>ä¹Ÿä¸åŒ,</p><p><code>char</code>æ¯”<code>int</code>çŸ­ï¼Œæ‰€ä»¥<code>*p_char</code>åªèƒ½å–åˆ°<code>00</code>,</p><p>è€Œè™½ç„¶<code>float</code>å’Œ<code>int</code>ä¸€æ ·é•¿ï¼Œä½†å¯¹å†…å­˜çš„<strong>è¯»æ³•ä¸åŒ</strong>ï¼Œæ‰€ä»¥<code>*p_float</code>å’Œ<code>*p_int</code>ä¾ç„¶ä¸åŒ</p><h1 id="æŒ‡é’ˆ-å˜é‡-çš„ä½¿ç”¨"><a href="#æŒ‡é’ˆ-å˜é‡-çš„ä½¿ç”¨" class="headerlink" title="æŒ‡é’ˆ(å˜é‡)çš„ä½¿ç”¨"></a>æŒ‡é’ˆ(å˜é‡)çš„ä½¿ç”¨</h1><h2 id="å£°æ˜æŒ‡é’ˆå˜é‡"><a href="#å£°æ˜æŒ‡é’ˆå˜é‡" class="headerlink" title="å£°æ˜æŒ‡é’ˆå˜é‡"></a>å£°æ˜æŒ‡é’ˆå˜é‡</h2><p>æŒ‡é’ˆå˜é‡ä¹Ÿæ˜¯å˜é‡ï¼Œåœ¨æ²¡æœ‰ç»“åˆæ€§é—®é¢˜æ—¶ï¼Œå’Œä¸€èˆ¬å˜é‡çš„å£°æ˜æ–¹å¼å·®ä¸å¤šã€‚</p><p>å˜é‡çš„å£°æ˜:<code>å˜é‡ç±»å‹</code> + <code>å˜é‡å</code></p><p>æŒ‡é’ˆçš„å£°æ˜:<code>æŒ‡å‘çš„å˜é‡ç±»å‹</code> + <code>*</code> + <code>å˜é‡å</code></p><p>ä»¥ä¸‹ä»¥å£°æ˜ä¸€ä¸ªå­—ç¬¦æŒ‡é’ˆä¸ºä¾‹</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span>* pointer = <span class="literal">NULL</span>;</span><br></pre></td></tr></table></figure><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/Snipaste_2023-11-24_10-02-19.png"></p><p><em>å˜é‡çš„å£°æ˜é€»è¾‘å¦‚ä¸Šå›¾</em></p><h3 id="è¿›é˜¶ï¼šäºŒçº§æŒ‡é’ˆ-Nçº§æŒ‡é’ˆ"><a href="#è¿›é˜¶ï¼šäºŒçº§æŒ‡é’ˆ-Nçº§æŒ‡é’ˆ" class="headerlink" title="è¿›é˜¶ï¼šäºŒçº§æŒ‡é’ˆ-&gt;Nçº§æŒ‡é’ˆ"></a>è¿›é˜¶ï¼šäºŒçº§æŒ‡é’ˆ-&gt;Nçº§æŒ‡é’ˆ</h3><p>æˆ‘ä»¬å¯ä»¥ç”¨åŒæ ·çš„é€»è¾‘å£°æ˜æ›´é«˜çº§çš„æŒ‡é’ˆ</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span>* *ppstr = <span class="literal">NULL</span>;<span class="comment">//ppstræ˜¯ä¸€ä¸ªäºŒçº§æŒ‡é’ˆ</span></span><br><span class="line"><span class="type">char</span>** *ppstr = <span class="literal">NULL</span>;<span class="comment">//pppstræ˜¯ä¸€ä¸ªä¸‰çº§æŒ‡é’ˆ</span></span><br></pre></td></tr></table></figure><p>åœ¨å£°æ˜ä¸­,å‰é¢çš„<code>char*</code>å£°æ˜äº†<code>ppstr</code><strong>æŒ‡å‘</strong>çš„å˜é‡ç±»å‹,åé¢çš„<code>*</code>ä¸<code>å˜é‡å</code>ç»“åˆï¼Œå£°æ˜<code>ppstr</code>æ˜¯ä¸€ä¸ªæŒ‡é’ˆ.</p><p>æ­¤å¤„ï¼Œç§°æŒ‡å‘<code>ä¸€çº§æŒ‡é’ˆ</code>çš„æŒ‡é’ˆä¸º<code>äºŒçº§æŒ‡é’ˆ</code>,åŒç†æœ‰<code>ä¸‰çº§æŒ‡é’ˆ</code>,è‡³<code>Nçº§æŒ‡é’ˆ</code>.</p><h2 id="æŒ‡é’ˆçš„è§£å¼•ç”¨"><a href="#æŒ‡é’ˆçš„è§£å¼•ç”¨" class="headerlink" title="æŒ‡é’ˆçš„è§£å¼•ç”¨"></a>æŒ‡é’ˆçš„è§£å¼•ç”¨</h2><p>æŒ‡é’ˆæœ€å¸¸è§çš„ç”¨å¤„å°±æ˜¯é€šè¿‡å˜é‡é‡Œ<strong>å‚¨å­˜çš„åœ°å€</strong>ï¼Œé€šè¿‡ç›´æ¥ä¿®æ”¹ç›®æ ‡å˜é‡çš„<strong>å†…å­˜</strong>æ¥ä¿®æ”¹å˜é‡çš„å€¼ ï¼Œ å½“ç„¶è¿˜æœ‰å¼ºåˆ¶è½¬æ¢æŒ‡é’ˆç±»å‹æ¥è¯»å–ç›®æ ‡å˜é‡çš„<strong>ä¸€éƒ¨åˆ†</strong>å†…å­˜ ä¹‹ç±»çš„éªšæ“ä½œ</p><h3 id="å‡½æ•°çš„ä¼ å€è°ƒç”¨"><a href="#å‡½æ•°çš„ä¼ å€è°ƒç”¨" class="headerlink" title="å‡½æ•°çš„ä¼ å€è°ƒç”¨"></a>å‡½æ•°çš„ä¼ å€è°ƒç”¨</h3><p>åœ¨é‡åˆ°æŒ‡é’ˆå‰ï¼Œä½¿ç”¨å‡½æ•°æ—¶ï¼Œç”±äºå®å‚ä¼ åˆ°å‡½æ•°é‡Œéƒ½å˜æˆäº†<strong>å½¢å‚</strong>,æ— æ³•é€šè¿‡å½¢å‚ï¼ˆ<em>åŒ…æ‹¬ä¿®æ”¹å½¢å‚çš„å€¼</em>ï¼‰æ¥æ”¹å˜å®å‚çš„å€¼ï¼Œå› ä¸ºå½¢å‚ç»ˆç©¶åªæ˜¯å®å‚çš„ä¸€ä»½<strong>ä¸´æ—¶æ‹·è´</strong>.</p><p>è€Œæœ‰äº†æŒ‡é’ˆä¹‹åï¼Œå‡½æ•°çš„å®å‚ï¼Œå½¢å‚å…³ç³»ä¸å˜ï¼Œä½†æˆ‘ä»¬æœ‰äº†<strong>æ›´é«˜ç«¯</strong>çš„å½¢å‚,ä¹Ÿå°±æ˜¯<code>æŒ‡é’ˆ</code>, å°½ç®¡<code>å‡½æ•°å†…çš„æŒ‡é’ˆ</code>ä¾æ—§æ˜¯<code>å‡½æ•°å¤–çš„æŒ‡é’ˆ</code>çš„<strong>ä¸´æ—¶æ‹·è´</strong>,ä½†æˆ‘ä»¬å·²ç»èƒ½é€šè¿‡å…¶å‚¨å­˜çš„<strong>å€¼</strong>è®¿é—®<code>å‡½æ•°å¤–å˜é‡</code>çš„å†…å­˜äº†,åŒæ—¶åŒ…æ‹¬<code>è¯»å–</code>å’Œ<code>ä¿®æ”¹</code>, è¿™ç§é€šè¿‡ä¼ å…¥æŒ‡é’ˆæ¥ä¿®æ”¹å¤–éƒ¨å˜é‡çš„å‡½æ•°è°ƒç”¨ï¼Œä¾¿ç§°ä¸º<code>å‡½æ•°çš„ä¼ å€è°ƒç”¨</code></p><p><em>ä»¥å¦‚ä¸‹ä»£ç ä¸ºä¾‹</em></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">Swap_int</span><span class="params">(<span class="type">int</span>*a,<span class="type">int</span>*b)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//ç»™æˆ‘ä¸¤ä¸ªæ•´å‹çš„åœ°å€ï¼Œæˆ‘å°±èƒ½ çœŸÂ·äº¤æ¢å®ƒä»¬çš„å€¼</span></span><br><span class="line">    <span class="type">int</span> tmp = *a;</span><br><span class="line">    *a = *b;</span><br><span class="line">    *b = tmp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æé—®-å¦‚ä½•ä¿®æ”¹å‡½æ•°å¤–çš„æŒ‡é’ˆçš„å€¼"><a href="#æé—®-å¦‚ä½•ä¿®æ”¹å‡½æ•°å¤–çš„æŒ‡é’ˆçš„å€¼" class="headerlink" title="æé—®?å¦‚ä½•ä¿®æ”¹å‡½æ•°å¤–çš„æŒ‡é’ˆçš„å€¼?"></a>æé—®?å¦‚ä½•ä¿®æ”¹å‡½æ•°å¤–çš„æŒ‡é’ˆçš„å€¼?</h4><p>ä¾ç„¶è¿˜æ˜¯æŠŠè¿™ä¸€<strong>æŒ‡é’ˆçš„åœ°å€</strong>ä¼ è¿›å»ï¼Œè€Œå‡½æ•°çš„å½¢å‚å†™æˆ<strong>æ›´é«˜ä¸€çº§</strong>çš„æŒ‡é’ˆ</p><p><em>å¦‚ä¸‹ä»£ç ï¼Œä¾‹å¦‚æˆ‘æƒ³åœ¨å‡½æ•°é‡ŒæŠŠå¤–éƒ¨çš„æŒ‡é’ˆç½®ç©º</em></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">Reset</span><span class="params">(<span class="type">char</span>* *pstr)</span> </span><br><span class="line">&#123;</span><br><span class="line">    *pstr = <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">char</span>* str;</span><br><span class="line">    Reset(&amp;str)<span class="comment">//å¯¹ä¸€çº§æŒ‡é’ˆå–åœ°å€ï¼Œä¼ å…¥äºŒçº§æŒ‡é’ˆ</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="æœ‰å…³æŒ‡é’ˆçš„å±é™©æ“ä½œ"><a href="#æœ‰å…³æŒ‡é’ˆçš„å±é™©æ“ä½œ" class="headerlink" title="æœ‰å…³æŒ‡é’ˆçš„å±é™©æ“ä½œ"></a>æœ‰å…³æŒ‡é’ˆçš„å±é™©æ“ä½œ</h1><h2 id="é‡æŒ‡é’ˆçš„è§£å¼•ç”¨"><a href="#é‡æŒ‡é’ˆçš„è§£å¼•ç”¨" class="headerlink" title="é‡æŒ‡é’ˆçš„è§£å¼•ç”¨"></a>é‡æŒ‡é’ˆçš„è§£å¼•ç”¨</h2><p>æœ‰äº›æŒ‡é’ˆå› ä¸ºé”™è¯¯æ“ä½œï¼ŒæŒ‡å‘äº†ä¸èƒ½è®¿é—®çš„å†…å­˜ï¼Œä¸€æ—¦è§£å¼•ç”¨ï¼Œå°±æœ‰å¯èƒ½ä½¿ç¨‹åºå´©æºƒ</p><p><em>æƒ…å½¢å¦‚ä¸‹</em></p><h3 id="ä½¿ç”¨äº†-æœªåˆå§‹åŒ–-èµ‹å€¼-çš„æŒ‡é’ˆ"><a href="#ä½¿ç”¨äº†-æœªåˆå§‹åŒ–-èµ‹å€¼-çš„æŒ‡é’ˆ" class="headerlink" title="ä½¿ç”¨äº† æœªåˆå§‹åŒ–&#x2F;èµ‹å€¼ çš„æŒ‡é’ˆ"></a>ä½¿ç”¨äº† æœªåˆå§‹åŒ–&#x2F;èµ‹å€¼ çš„æŒ‡é’ˆ</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span>* pa;<span class="comment">//æœªåˆå§‹åŒ–ï¼Œpaçš„å€¼ä¸ºéšæœºå€¼</span></span><br><span class="line">*pa = <span class="number">0</span> ;<span class="comment">//é‡æŒ‡é’ˆçš„è§£å¼•ç”¨</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ­£ç¡®çš„ç”¨æ³•</span></span><br><span class="line"><span class="type">int</span> arr[<span class="number">10</span>] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span>* pa;</span><br><span class="line">pa = arr;<span class="comment">//ç«‹å³åˆå§‹åŒ–</span></span><br><span class="line"><span class="type">int</span>* pb = <span class="literal">NULL</span>;<span class="comment">//åˆå§‹åŒ–</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ‰€ä»¥å£°æ˜æŒ‡é’ˆæ—¶æœ€å¥½åˆå§‹åŒ–,å¦‚æœä¸çŸ¥é“åˆå§‹åŒ–æˆä»€ä¹ˆï¼Œå°±ç”¨<code>NULL</code>ç©ºæŒ‡é’ˆåˆå§‹åŒ–</p><h3 id="æŒ‡å‘äº†-å·²å›æ”¶çš„-å†…å­˜ç©ºé—´"><a href="#æŒ‡å‘äº†-å·²å›æ”¶çš„-å†…å­˜ç©ºé—´" class="headerlink" title="æŒ‡å‘äº† å·²å›æ”¶çš„ å†…å­˜ç©ºé—´"></a>æŒ‡å‘äº† å·²å›æ”¶çš„ å†…å­˜ç©ºé—´</h3><p>æœ‰çš„å‡½æ•°<strong>é”™è¯¯</strong>*åœ°è¿”å›äº†å†…éƒ¨ä¸´æ—¶å˜é‡çš„åœ°å€ï¼Œ åœ¨<strong>å¤–é¢</strong>ä½¿ç”¨è¿”å›çš„æŒ‡é’ˆï¼Œå› ä¸ºæ­¤æ—¶å‡½æ•°çš„æ ˆå¸§å·²ç»<strong>é”€æ¯</strong>ï¼Œä¼šå‘ç”Ÿé‡æŒ‡é’ˆçš„è§£å¼•ç”¨</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span>* <span class="title function_">fun</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">char</span> a = <span class="number">0</span>;</span><br><span class="line">    <span class="type">char</span>* pa = &amp;a;</span><br><span class="line">    <span class="keyword">return</span> pa;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//æƒ…å½¢ä¸€</span></span><br><span class="line">    <span class="type">char</span>* pa = fun();</span><br><span class="line">    *pa = <span class="number">1</span>;<span class="comment">//æ­¤æ—¶å˜é‡aå·²ç»é”€æ¯ï¼Œå‘ç”Ÿé‡æŒ‡é’ˆçš„è§£å¼•ç”¨ï¼Œå³éæ³•è®¿é—®</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//æƒ…å½¢äºŒ</span></span><br><span class="line">    <span class="type">char</span>* str = (<span class="type">char</span>*) <span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="type">char</span>) *<span class="number">10</span>) <span class="comment">//åœ¨å †åŒºå¼€è¾Ÿ10ä¸ªå­—èŠ‚çš„ç©ºé—´</span></span><br><span class="line">    <span class="built_in">free</span>(str);<span class="comment">//ç„¶åé‡Šæ”¾æ‰</span></span><br><span class="line">    str[<span class="number">0</span>] = <span class="string">&#x27;A&#x27;</span>;<span class="comment">//è¯•å›¾è®¿é—®å·²freeçš„å†…å­˜ï¼Œå¹¶å†™å…¥ï¼Œå‘ç”Ÿéæ³•è®¿é—®</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="ç©ºæŒ‡é’ˆçš„è§£å¼•ç”¨"><a href="#ç©ºæŒ‡é’ˆçš„è§£å¼•ç”¨" class="headerlink" title="ç©ºæŒ‡é’ˆçš„è§£å¼•ç”¨"></a>ç©ºæŒ‡é’ˆçš„è§£å¼•ç”¨</h2><p>ç©ºæŒ‡é’ˆ<code>NULL</code>,<code>å€¼</code>ä¸º<code>0</code>,ä¸€æ—¦è§£å¼•ç”¨å°±ä¼šæŠ¥é”™ï¼Œæ‰€ä»¥åœ¨è§£å¼•ç”¨é™Œç”ŸæŒ‡é’ˆæ—¶ä¸€å®šè¦æ³¨æ„åˆ¤ç©º</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æƒ…å½¢ä¸€</span></span><br><span class="line"><span class="type">char</span>* <span class="title function_">func</span><span class="params">(<span class="type">char</span>* str)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span>(str == <span class="literal">NULL</span>)<span class="comment">//é˜²æ­¢ä½¿ç”¨è€…é”™è¯¯ä¼ å…¥ç©ºæŒ‡é’ˆ</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æƒ…å½¢äºŒ</span></span><br><span class="line"><span class="type">char</span>* <span class="title function_">InitArray</span><span class="params">(<span class="type">char</span>** pstr)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span>(pstr == <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    *pstr = (<span class="type">char</span>*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="type">char</span>) * <span class="number">10</span>);</span><br><span class="line">    <span class="keyword">if</span>(*ptr == <span class="literal">NULL</span>)<span class="comment">//mallocä¸€æ—¦å¤±è´¥å°±ä¼šè¿”å›NULL,æ‰€ä»¥è°ƒç”¨åä¸€å®šè¦åˆ¤ç©º</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>=Cå…¥é—¨=æ·±å…¥ç ”ç©¶ å­—ç¬¦ä¸²ä¸å­—ç¬¦æ•°ç»„</title>
      <link href="/2023/11/08/str-arr/"/>
      <url>/2023/11/08/str-arr/</url>
      
        <content type="html"><![CDATA[<h1 id="ä»€ä¹ˆæ˜¯å­—ç¬¦ä¸²"><a href="#ä»€ä¹ˆæ˜¯å­—ç¬¦ä¸²" class="headerlink" title="ä»€ä¹ˆæ˜¯å­—ç¬¦ä¸²"></a>ä»€ä¹ˆæ˜¯å­—ç¬¦ä¸²</h1><h2 id="åˆè§å­—ç¬¦ä¸²"><a href="#åˆè§å­—ç¬¦ä¸²" class="headerlink" title="åˆè§å­—ç¬¦ä¸²"></a>åˆè§å­—ç¬¦ä¸²</h2><p>æˆ‘ä»¬æœ€å…ˆé‡åˆ°çš„å­—ç¬¦ä¸²,ä¸€èˆ¬æ˜¯<code>hello_world</code>ç¨‹åºä¸­ç”¨åˆ°çš„<code>&quot;hello world&quot;</code>,ä¹Ÿå°±æ˜¯<strong>ä¸¤ä¸ªåŒå¼•å·æ‹¬èµ·æ¥çš„ä¸€ä¸²å­—ç¬¦</strong>,è¾“å‡ºæ—¶çš„å ä½ç¬¦æ˜¯<code>%s</code>,å¯ä»¥ç›´æ¥æ‹¿å»ä¼ å€¼ï¼Œä»£ç å¦‚ä¸‹</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%s&quot;</span>,<span class="string">&quot;hello world&quot;</span>);</span><br></pre></td></tr></table></figure><h2 id="å£°æ˜å­—ç¬¦ä¸²å˜é‡"><a href="#å£°æ˜å­—ç¬¦ä¸²å˜é‡" class="headerlink" title="å£°æ˜å­—ç¬¦ä¸²å˜é‡"></a>å£°æ˜å­—ç¬¦ä¸²å˜é‡</h2><p>æœ‰æ—¶æˆ‘ä»¬æƒ³è¦å…ˆæŠŠå­—ç¬¦ä¸²å­˜èµ·æ¥ï¼Œå†è¿›è¡Œæ“ä½œï¼Œé‚£ä¹ˆå°±ä½¿ç”¨<strong>å­—ç¬¦æ•°ç»„</strong>ï¼Œå¹¶åœ¨<strong>åˆå§‹åŒ–</strong>çš„æ—¶å€™æŠŠå­—ç¬¦ä¸²ä¼ ç»™å®ƒ,è¿™æ ·åœ¨<strong>åˆ›å»ºæ•°ç»„</strong>æ—¶ä¼šç¼–è¯‘å™¨ä¼šè‡ªåŠ¨åˆ†é…å†…å­˜ç»™å®ƒï¼Œä»£ç å¦‚ä¸‹</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span> str[] = <span class="string">&quot;abcdef&quot;</span>;</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶æˆ‘ä»¬ä¹Ÿå¯ä»¥å¼€å¯VSçš„<strong>è°ƒè¯•</strong>ï¼Œå¹¶æ‰“å¼€<strong>å†…å­˜</strong>å’Œ<strong>ç›‘è§†</strong>çª—å£è§‚å¯Ÿå­—ç¬¦ä¸²æ˜¯å¦‚ä½•åœ¨å†…å­˜ä¸­å‚¨å­˜çš„,å¦‚ä¸‹å›¾</p><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/Snipaste_2023-11-09_10-06-06.jpg"></p><p>é€šè¿‡è§‚å¯Ÿå¯ä»¥å‘ç°ï¼ŒCè¯­â¾”å­—ç¬¦ä¸²çš„å­—ç¬¦ä¸²æœ‰ä¸ª<code>è§„å®š</code>(ç‰¹ç‚¹)ï¼Œå°±æ˜¯ä»¥å­—ç¬¦<code>\0</code>ç»“å°¾ï¼Œæ— è®ºæ˜¯åˆå§‹åŒ–æ•°ç»„æ—¶ï¼Œè¿˜æ˜¯åœ¨åˆ†é…å†…å­˜æ—¶ï¼Œéƒ½æœ‰<code>\0</code>çš„ä½ç½®ã€‚</p><h3 id="strlen-å‡½æ•°"><a href="#strlen-å‡½æ•°" class="headerlink" title="strlen()å‡½æ•°"></a>strlen()å‡½æ•°</h3><p>ä¾æ®ä»¥<code>\0</code>ä¸ºå­—ç¬¦ä¸²ç»“å°¾çš„è§„åˆ™ï¼Œ<code>strlen</code>å‡½æ•°å°±å¯ä»¥è®¡ç®—å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œå®ƒä¼šä»å­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªå­—ç¬¦å‘åæ‰«æï¼Œç›´åˆ°é‡åˆ°<code>\0</code>ç»“æŸ,ä¸”<code>\0</code>ä¸è¿›å…¥è®¡æ•°ï¼Œæœ€åè¿”å›å­—ç¬¦ä¸²çš„é•¿åº¦,ä»£ç å¦‚ä¸‹</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span> <span class="comment">//éœ€è¦å¼•å¯¹åº”çš„å¤´æ–‡ä»¶</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> len = <span class="built_in">strlen</span>(<span class="string">&quot;abcdef&quot;</span>);<span class="comment">//lençš„å€¼ä¸º6</span></span><br><span class="line"><span class="type">int</span> sz = <span class="keyword">sizeof</span>(<span class="string">&quot;abcdef&quot;</span>);<span class="comment">//szçš„å¤§å°ä¸º7(\0è¢«è®¡å…¥æ€»æ•°)</span></span><br></pre></td></tr></table></figure><h3 id="éªŒè¯å­—ç¬¦ä¸²çš„ç»“å°¾"><a href="#éªŒè¯å­—ç¬¦ä¸²çš„ç»“å°¾" class="headerlink" title="éªŒè¯å­—ç¬¦ä¸²çš„ç»“å°¾"></a>éªŒè¯å­—ç¬¦ä¸²çš„ç»“å°¾</h3><h4 id="æ­£å‘éªŒè¯"><a href="#æ­£å‘éªŒè¯" class="headerlink" title="æ­£å‘éªŒè¯"></a>æ­£å‘éªŒè¯</h4><p>æˆ‘ä»¬åšåœ¨å­—ç¬¦æ•°ç»„é‡Œæ’å…¥ä¸€ä¸ª<code>\0</code>,æ¥çœ‹çœ‹å‡½æ•°<code>printf</code>å’Œ<code>strlen</code>æ‰¾åˆ°çš„ç»“å°¾åœ¨å“ªé‡Œ,å¦‚ä¸‹å›¾</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span> str[] = &#123;<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>,<span class="string">&#x27;\0&#x27;</span>,<span class="string">&#x27;d&#x27;</span>,<span class="string">&#x27;e&#x27;</span>,<span class="string">&#x27;f&#x27;</span>,<span class="string">&#x27;\0&#x27;</span>&#125;;</span><br></pre></td></tr></table></figure><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/Snipaste_2023-11-09_11-01-35.jpg"></p><p>å¯ä»¥çœ‹åˆ°å­—ç¬¦æ•°ç»„ä¼¼ä¹è¢«â€œæˆªæ–­â€äº†ï¼Œ<code>printf</code>åªè¾“å‡ºäº†<code>\0</code>å‰é¢çš„å†…å®¹, <code>strlen</code>ç®—å‡ºæ¥çš„é•¿åº¦ä¹Ÿåªæœ‰<code>3</code>,å¯è§æ’å…¥çš„<code>\0</code>è¢«ä½œä¸ºäº†<strong>å­—ç¬¦ä¸²</strong>çš„ç»“å°¾ï¼Œå­—ç¬¦ä¸²æå‰ä¸­æŒ‡,è€Œæ²¡åˆ°è¾¾<strong>å­—ç¬¦æ•°ç»„</strong>çš„ç»“å°¾</p><h4 id="åå‘éªŒè¯"><a href="#åå‘éªŒè¯" class="headerlink" title="åå‘éªŒè¯"></a>åå‘éªŒè¯</h4><p>æˆ‘ä»¬æ¥<strong>åå‘</strong>éªŒè¯ä¸€ä¸‹ï¼Œ<code>\0</code>æ˜¯å­—ç¬¦ä¸²ç»“å°¾çš„æ ‡å¿—,å¦‚ä¸‹å›¾ï¼Œæˆ‘ä»¬å£°æ˜ä¸€ä¸ª<strong>æ²¡æœ‰</strong><code>\0</code>ç»“å°¾çš„å­—ç¬¦æ•°ç»„ï¼Œçœ‹çœ‹å‡½æ•°<code>printf</code>å’Œ<code>strlen</code>è¿˜æ‰¾ä¸æ‰¾å¾—åˆ°æˆ‘ä»¬â€œè®¤ä¸ºâ€çš„ç»“å°¾</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span> str[] = &#123;<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>,<span class="string">&#x27;d&#x27;</span>,<span class="string">&#x27;e&#x27;</span>,<span class="string">&#x27;f&#x27;</span>&#125;;</span><br></pre></td></tr></table></figure><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/Snipaste_2023-11-09_14-02-07.jpg"></p><p>å¯ä»¥çœ‹åˆ°å‡½æ•°å¯¹å­—ç¬¦ä¸²çš„åˆ¤æ–­å‡ºç°äº†ä¸¥é‡<strong>å¤±è¯¯</strong>ï¼Œæ‰€ä»¥<strong>å­—ç¬¦æ•°ç»„</strong>é‡Œæ²¡æœ‰<code>\0</code>æ ‡è®°ç»“å°¾æ˜¯éå¸¸ä¸¥é‡çš„é—®é¢˜ï¼Œä¸å…‰æ˜¯æ‰¾ä¸åˆ°å­—ç¬¦ä¸²çš„ç»“å°¾ï¼Œè€Œä¸”ä¼š<strong>è¶Šç•Œè®¿é—®</strong>ï¼å±é™©æ“ä½œï¼Œå†™ä»£ç çš„æ—¶å€™ä¸€å®šè¦æ³¨æ„</p><hr><h2 id="ä»å­—ç¬¦ä¸²åˆ°å­—ç¬¦æ•°ç»„"><a href="#ä»å­—ç¬¦ä¸²åˆ°å­—ç¬¦æ•°ç»„" class="headerlink" title="ä»å­—ç¬¦ä¸²åˆ°å­—ç¬¦æ•°ç»„"></a>ä»å­—ç¬¦ä¸²åˆ°å­—ç¬¦æ•°ç»„</h2><p>è™½ç„¶ä¸Šé¢å·²ç»ç”¨åˆ°äº†å­—ç¬¦æ•°ç»„ï¼Œä½†ä¸»è¦è¿˜æ˜¯ä¸ºäº†æ–¹ä¾¿è®¨è®º<strong>å­—ç¬¦ä¸²</strong>,æ¥ä¸‹æ¥ç€é‡ç ”ç©¶å­—ç¬¦æ•°ç»„ã€‚</p><h3 id="å…ˆæ•´æ¸…æ¥šå‡ ä¸ªæ¦‚å¿µ"><a href="#å…ˆæ•´æ¸…æ¥šå‡ ä¸ªæ¦‚å¿µ" class="headerlink" title="å…ˆæ•´æ¸…æ¥šå‡ ä¸ªæ¦‚å¿µ"></a>å…ˆæ•´æ¸…æ¥šå‡ ä¸ªæ¦‚å¿µ</h3><p><code>ä»€ä¹ˆæ˜¯æ•°ç»„</code>ï¼šæ•°ç»„æ˜¯â¼€ç»„ç›¸åŒç±»å‹å…ƒç´ çš„é›†åˆ,ä¼šåœ¨å†…å­˜ä¸­å¼€è¾Ÿä¸€æ®µè¿ç»­çš„ç©ºé—´ï¼Œå°†å…ƒç´ å‚¨å­˜åœ¨é‚£æ®µå†…å­˜ä¸­</p><p><code>ä»€ä¹ˆæ˜¯æ•°ç»„å…ƒç´ </code>ï¼šå­˜æ”¾åœ¨æ•°ç»„çš„å€¼è¢«ç§°ä¸ºæ•°ç»„çš„å…ƒç´ ï¼Œæ•°ç»„åœ¨åˆ›å»ºçš„æ—¶å€™å¯ä»¥æŒ‡å®šæ•°ç»„çš„â¼¤â¼©å’Œæ•°ç»„çš„å…ƒç´ ç±»å‹ã€‚</p><p>æ‰€ä»¥<code>å­—ç¬¦æ•°ç»„</code>æ˜¯ä¸€ç»„<code>å­—ç¬¦</code>çš„é›†åˆï¼Œå­—ç¬¦æ•°ç»„é‡Œçš„<code>å…ƒç´ </code>éƒ½æ˜¯<code>å­—ç¬¦</code>!,è®¿é—®åˆ°çš„å­—ç¬¦æ•°ç»„é‡Œçš„<strong>å…ƒç´ </strong>éƒ½æ˜¯<strong>å­—ç¬¦</strong>ï¼Œåƒ<code>&#39;a&#39;</code>,<code>&#39;b&#39;</code>,<code>&#39;c&#39;</code>è¿™ç§çš„å•ä¸ªçš„å­—ç¬¦,åˆ«å’Œ<code>å­—ç¬¦ä¸²</code>æ··ä¸ºä¸€è°ˆï¼</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span> str = <span class="string">&quot;abc&quot;</span>;</span><br><span class="line"><span class="type">int</span> sz = <span class="keyword">sizeof</span>(str);<span class="comment">//è¿™é‡Œsträ»£è¡¨äº†æ•´ä¸ªæ•°ç»„,æ‰€ä»¥åŒ…æ‹¬\0</span></span><br><span class="line">,szçš„å€¼ä¸º<span class="number">4</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="å­—ç¬¦æ•°ç»„çš„å£°æ˜"><a href="#å­—ç¬¦æ•°ç»„çš„å£°æ˜" class="headerlink" title="å­—ç¬¦æ•°ç»„çš„å£°æ˜"></a>å­—ç¬¦æ•°ç»„çš„å£°æ˜</h3><p>å­—ç¬¦æ•°ç»„çš„å£°æ˜å’Œå…¶ä»–ç±»å‹çš„æ•°ç»„å·®ä¸å¤šï¼Œæœ‰<strong>åˆå§‹åŒ–</strong>ï¼Œ<strong>ä¸å®Œå…¨åˆå§‹åŒ–</strong>ï¼Œ<strong>å£°æ˜é•¿åº¦</strong>ï¼Œ<strong>ä¸å£°æ˜é•¿åº¦</strong></p><p><em>æ­£ç¡®çš„å£°æ˜ä»£ç å¦‚ä¸‹</em></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span> str1[] = <span class="string">&quot;abc&quot;</span>;<span class="comment">//åˆå§‹åŒ–,ä¸å£°æ˜é•¿åº¦</span></span><br><span class="line"></span><br><span class="line"><span class="type">char</span> str2[] = &#123;<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>,<span class="string">&#x27;\0&#x27;</span>&#125;;<span class="comment">//è¿™ä¹Ÿæ˜¯åˆå§‹åŒ–ï¼Œä¸”ä¸å£°æ˜é•¿åº¦</span></span><br><span class="line"></span><br><span class="line"><span class="type">char</span> str3[<span class="number">10</span>] = &#123; <span class="number">0</span> &#125;;<span class="comment">//åˆå§‹åŒ–ï¼Œç”¨å€¼0(ç­‰ä»·äº`\0`)å¡«å……</span></span><br><span class="line"></span><br><span class="line"><span class="type">char</span> str4[<span class="number">10</span>] = <span class="string">&quot;abc&quot;</span>;<span class="comment">//ä¸å®Œå…¨åˆå§‹åŒ–ï¼Œå­˜å…¥å­—ç¬¦ä¸²&quot;abc&quot;,åé¢éƒ½ç”¨&#x27;\0&#x27;å¡«å……</span></span><br><span class="line"></span><br><span class="line"><span class="type">char</span> str5[<span class="number">10</span>] = &#123;<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>,<span class="string">&#x27;d&#x27;</span>&#125;;<span class="comment">//ä¸å®Œå…¨åˆå§‹åŒ–,ä»ä¸‹æ ‡ä¸º0å¼€å§‹ï¼Œä¾æ¬¡å¾€åå¡«å……å­—ç¬¦ a,b,c,\0</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><em>é”™è¯¯çš„å£°æ˜ä»£ç </em></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span> str1[<span class="number">3</span>] = <span class="string">&quot;abc&quot;</span>;<span class="comment">//æ•°ç»„å£°æ˜çŸ­äº†ï¼Œæ”¾ä¸ä¸‹ç»“å°¾çš„\0,ç¼–è¯‘è¿‡ä¸äº†</span></span><br><span class="line"></span><br><span class="line"><span class="type">char</span> str2[<span class="number">3</span>] = &#123;<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>,<span class="string">&#x27;d&#x27;</span>&#125;;<span class="comment">//åŒä¸Š,æ”¾ä¸ä¸‹</span></span><br><span class="line"></span><br><span class="line"><span class="type">char</span> str3[] = &#123; <span class="number">0</span> &#125;;<span class="comment">//èƒ½å£°æ˜ï¼Œä½†æ˜¯å­—ç¬¦æ•°ç»„é•¿åº¦ä¸º1ï¼Œè¿™ä¸ªæ•°ç»„å¤§æ¦‚ç‡æ˜¯ç”¨ä¸äº†çš„/ä¼šè¢«æ‹¿å»é”™è¯¯ä½¿ç”¨çš„</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="æ¥çœ‹çœ‹è¿™äº›å£°æ˜æ–¹å¼åœ¨å†…å­˜ä¸­çš„è¡¨ç°"><a href="#æ¥çœ‹çœ‹è¿™äº›å£°æ˜æ–¹å¼åœ¨å†…å­˜ä¸­çš„è¡¨ç°" class="headerlink" title="æ¥çœ‹çœ‹è¿™äº›å£°æ˜æ–¹å¼åœ¨å†…å­˜ä¸­çš„è¡¨ç°"></a>æ¥çœ‹çœ‹è¿™äº›å£°æ˜æ–¹å¼åœ¨å†…å­˜ä¸­çš„è¡¨ç°</h3><h4 id="ä¸åˆå§‹åŒ–çš„å£°æ˜-æåº¦ä¸æ¨è"><a href="#ä¸åˆå§‹åŒ–çš„å£°æ˜-æåº¦ä¸æ¨è" class="headerlink" title="ä¸åˆå§‹åŒ–çš„å£°æ˜(æåº¦ä¸æ¨è)"></a>ä¸åˆå§‹åŒ–çš„å£°æ˜(æåº¦ä¸æ¨è)</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span> str[];<span class="comment">//è¿™ä¸ªä¸åŠ é•¿åº¦ï¼Œç›´æ¥ç¼–è¯‘å¤±è´¥ï¼ˆå¦‚ä¸‹å›¾ï¼‰</span></span><br></pre></td></tr></table></figure><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/Snipaste_2023-11-10_11-39-10.jpg"></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span> str[<span class="number">10</span>];<span class="comment">//è¯­æ³•æ²¡æœ‰é—®é¢˜ï¼Œæ¥çœ‹çœ‹æ­¤æ—¶æ•°ç»„é‡Œå­˜äº†ä»€ä¹ˆ</span></span><br></pre></td></tr></table></figure><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/Snipaste_2023-11-10_11-46-49.jpg"><br>å¯ä»¥çœ‹åˆ°å…¨éƒ½å­˜äº†<code>-52</code>,å¯¹åº”çš„ä¸­æ–‡å­—ç¬¦æ˜¯<code>çƒ«</code>ï¼Œè¿™æ ·<strong>ä¸å¥½</strong>ï¼Œè¯·åœ¨å£°æ˜å­—ç¬¦æ•°ç»„çš„æ—¶å€™<strong>åˆå§‹åŒ–æ•°ç»„</strong></p><h4 id="ä¸å£°æ˜é•¿åº¦çš„æ•°ç»„å£°æ˜"><a href="#ä¸å£°æ˜é•¿åº¦çš„æ•°ç»„å£°æ˜" class="headerlink" title="ä¸å£°æ˜é•¿åº¦çš„æ•°ç»„å£°æ˜"></a>ä¸å£°æ˜é•¿åº¦çš„æ•°ç»„å£°æ˜</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span> str1[] = <span class="string">&quot;abc&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">char</span> str2[] = &#123;<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>,<span class="string">&#x27;\0&#x27;</span>&#125;;</span><br></pre></td></tr></table></figure><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/Snipaste_2023-11-09_14-59-34.jpg"></p><p>å¦‚ä¸Šå›¾ï¼Œä¸å£°æ˜é•¿åº¦æ—¶ï¼Œç¼–è¯‘å™¨è‡ªåŠ¨ç»™å­—ç¬¦æ•°ç»„åˆ†é…å†…å­˜ï¼Œæ—¢ä¸ç»™å¤šï¼Œä¹Ÿä¸ç»™å°‘ï¼Œåˆå§‹åŒ–ç»™çš„<code>å­—ç¬¦ä¸²</code>æˆ–è€…<code>&#123;...&#125;</code>å¤šé•¿ï¼Œåˆ›å»ºçš„æ•°ç»„å°±å¤šé•¿ã€‚</p><p><strong>æ³¨æ„çº¢æ¡†</strong>ï¼Œå†å¼ºè°ƒä¸€éï¼Œå­—ç¬¦ä¸²ä»¥<code>\0</code>ç»“å°¾,çœ‹åˆ°åŒå¼•å·æ‹¬èµ·æ¥çš„å­—ç¬¦ä¸²ï¼Œè¦è®°å¾—æœ€åéšè—äº†ä¸€ä¸ª<code>\0</code>,ç”¨å­—ç¬¦æ•°ç»„å‚¨å­˜çš„æ—¶å€™ä¸€å®šè¦ç•™è¶³ç©ºé—´</p><h4 id="å£°æ˜é•¿åº¦çš„æ•°ç»„å£°æ˜"><a href="#å£°æ˜é•¿åº¦çš„æ•°ç»„å£°æ˜" class="headerlink" title="å£°æ˜é•¿åº¦çš„æ•°ç»„å£°æ˜"></a>å£°æ˜é•¿åº¦çš„æ•°ç»„å£°æ˜</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span> str3[<span class="number">10</span>] = &#123; <span class="number">0</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">char</span> str4[<span class="number">10</span>] = <span class="string">&quot;abc&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">char</span> str5[<span class="number">10</span>] = &#123;<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>,<span class="string">&#x27;d&#x27;</span>&#125;;</span><br></pre></td></tr></table></figure><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/Snipaste_2023-11-09_15-25-54.jpg"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œåœ¨å£°æ˜çš„é•¿åº¦<strong>è¶³å¤Ÿé•¿</strong>æ—¶ï¼Œä½ åˆå§‹åŒ–çš„æ—¶å€™ç»™å®ƒå¤šå°‘å­—ç¬¦ï¼Œå®ƒå°±ä»<code>ä¸‹æ ‡0</code>å¤„å¼€å§‹<strong>æŒ‰é¡ºåº</strong>å­˜è¿›å»å¤šå°‘,å‰©ä¸‹çš„éƒ¨åˆ†<strong>è‡ªåŠ¨</strong>ç”¨<code>&#39;\0&#39;</code>å¡«å……,</p><p>æ‰€ä»¥å®é™…ä¸Šä¸Šé¢ä»£ç ä¸­çš„<code>str5</code>å› ä¸ºé•¿åº¦<code>10</code>&gt;åˆå§‹åŒ–ç»™çš„<code>4</code>ä¸ªå­—ç¬¦ï¼Œåé¢å…­ä¸ªå…ƒç´ ç”¨<code>\0</code>å¡«å……äº†ï¼Œæ‰€ä»¥<code>str5</code>é‡Œå­˜äº†æœ‰<strong>ç»“å°¾</strong>çš„å®Œæ•´å­—ç¬¦ä¸²</p><h4 id="é”™è¯¯å£°æ˜"><a href="#é”™è¯¯å£°æ˜" class="headerlink" title="é”™è¯¯å£°æ˜"></a>é”™è¯¯å£°æ˜</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span> str1[<span class="number">3</span>] = <span class="string">&quot;abc&quot;</span>;</span><br><span class="line"><span class="type">char</span> str2[<span class="number">3</span>] = &#123; <span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>,<span class="string">&#x27;d&#x27;</span> &#125;;</span><br></pre></td></tr></table></figure><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/Snipaste_2023-11-10_07-44-57.jpg"></p><p>å¯ä»¥çœ‹åˆ°ä¸Šé¢ä¸¤ç§é”™è¯¯çš„å£°æ˜æ–¹å¼ï¼Œç”šè‡³ç›´æ¥<strong>ç¼–è¯‘å¤±è´¥</strong>,æ‰€ä»¥å£°æ˜å­—ç¬¦æ•°ç»„çš„æ—¶å€™ä¸€å®šè¦<strong>ç•™è¶³ç©ºé—´</strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span> str3[] = &#123; <span class="number">0</span> &#125;;</span><br></pre></td></tr></table></figure><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/Snipaste_2023-11-10_07-51-55.jpg"></p><p>å¦‚ä¸Šå›¾ï¼Œå¯ä»¥çœ‹åˆ°è¿™æ ·å†™è¿˜æ˜¯ç¼–è¯‘æˆåŠŸäº†ï¼Œä½†æ˜¯åœ¨ç›‘è§†æŸ¥çœ‹<strong>æ•°ç»„é•¿åº¦</strong>çš„æ—¶å€™ï¼Œå‘ç°é•¿åº¦ä¸º<code>1</code>,é‡Œé¢å­˜äº†ä¸€ä¸ª<code>\0</code>,è¿™ä¹ˆ<strong>çŸ­</strong>çš„æ•°ç»„èƒ½ç”¨å—ï¼Ÿåªèƒ½<strong>ç”¨ä¸€ç‚¹ç‚¹</strong>ï¼Œç”šè‡³è¿˜ä¸å¦‚ç›´æ¥å£°æ˜ä¸€ä¸ª<code>char</code>ç±»å‹çš„å­—ç¬¦å˜é‡</p><h2 id="å½“å­—ç¬¦æ•°ç»„åŠ ä¸Šconst"><a href="#å½“å­—ç¬¦æ•°ç»„åŠ ä¸Šconst" class="headerlink" title="å½“å­—ç¬¦æ•°ç»„åŠ ä¸Šconst"></a>å½“å­—ç¬¦æ•°ç»„åŠ ä¸Šconst</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">const</span> <span class="type">char</span> str[<span class="number">5</span>] = <span class="string">&quot;abc&quot;</span>;</span><br></pre></td></tr></table></figure><h3 id="ä¸€äº›æ€§è´¨"><a href="#ä¸€äº›æ€§è´¨" class="headerlink" title="ä¸€äº›æ€§è´¨"></a>ä¸€äº›æ€§è´¨</h3><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/Snipaste_2023-11-10_18-55-52.jpg"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œå£°æ˜æ—¶åŠ äº†<code>const</code>ä¹‹åï¼Œå­—ç¬¦æ•°ç»„<code>str</code>åœ¨å£°æ˜æ—¶çš„<strong>åˆå§‹åŒ–</strong>ä¹‹åä¾¿ä¸å¯æ›´æ”¹äº†ï¼Œåªèƒ½<strong>è®¿é—®</strong>å…¶å…ƒç´ ,è€Œ<strong>ä¸èƒ½é€šè¿‡è®¿é—®å…ƒç´ æ¥æ”¹å˜æ•°ç»„å†…å®¹</strong></p><p>é‚£ä¹ˆ<code>scanf</code>è¿˜èƒ½å†™å…¥å†…å®¹å—ï¼Ÿç­”æ¡ˆæ˜¯<strong>å¯ä»¥</strong>!<em>(å¦‚ä¸‹å›¾)</em></p><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/Snipaste_2023-11-10_19-10-43.jpg"></p><p>é‚£å®ƒèƒ½æ‹¿æ¥åˆå§‹åŒ–åˆ«çš„æ•°ç»„å—ï¼Ÿå¾ˆé—æ†¾ï¼Œ<strong>ä¸èƒ½</strong><br><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/Snipaste_2023-11-10_19-05-15.jpg"></p><h3 id="å¯¹åº”çš„æŒ‡é’ˆç±»å‹"><a href="#å¯¹åº”çš„æŒ‡é’ˆç±»å‹" class="headerlink" title="å¯¹åº”çš„æŒ‡é’ˆç±»å‹"></a>å¯¹åº”çš„æŒ‡é’ˆç±»å‹</h3><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/Snipaste_2023-11-10_19-15-32.jpg"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œå¾—ç”¨<code>const char*</code>æ¥å‚¨å­˜å­—ç¬¦æ•°ç»„çš„åœ°å€ï¼Œè€Œä½¿ç”¨<code>char*</code>å°±ä¼šæŠ¥é”™</p><p>é‚£ä¹ˆç”¨<code>åŒå¼•å·æ‹¬èµ·æ¥çš„å­—ç¬¦ä¸²</code>ï¼Œæ˜¯å¦ä¹Ÿæœ‰åœ°å€ï¼Œèƒ½ç”¨æŒ‡é’ˆå‚¨å­˜å®ƒçš„åœ°å€å‘¢ï¼Ÿ</p><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/Snipaste_2023-11-10_19-21-10.jpg"></p><p>å¦‚å›¾ï¼Œå¯ä»¥çœ‹åˆ°,å­—ç¬¦ä¸²<code>&quot;abc&quot;</code>æ˜¯å±äº<code>const char</code>ç±»å‹çš„æ•°ç»„ï¼Œå¯¹åº”çš„æŒ‡é’ˆæ˜¯<code>const char*</code>,ä¸èƒ½é€šè¿‡è®¿é—®å…ƒç´ æ¥æ”¹å˜å†…éƒ¨çš„å€¼ï¼Œä¹Ÿä¸èƒ½ç”¨<code>char*</code>æ¥å‚¨å­˜åœ°å€</p><h4 id="åœ¨å†…å­˜ä¸­çš„è¡¨ç°"><a href="#åœ¨å†…å­˜ä¸­çš„è¡¨ç°" class="headerlink" title="åœ¨å†…å­˜ä¸­çš„è¡¨ç°"></a>åœ¨å†…å­˜ä¸­çš„è¡¨ç°</h4><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/const_str.gif"></p><p>å¯ä»¥çœ‹åˆ°å“ªæ€•æ˜¯å­—ç¬¦ä¸²<code>&quot;abc&quot;</code>,ä¹Ÿæ˜¯åœ¨å†…å­˜ä¸­å¼€è¾Ÿäº†ä¸€æ®µç©ºé—´ï¼Œå¹¶æŠŠå­—ç¬¦<strong>å‚¨å­˜åœ¨å†…å­˜ä¸­</strong>äº†çš„</p><p>ä½†æ˜¯ï¼Œ<strong>ä¸è¦</strong>è¯•å›¾ç”¨<code>scanf</code>å»æ”¹å˜å­—ç¬¦ä¸²çš„å€¼<br><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/const_strrrr.gif"></p><hr><h2 id="å¦‚ä½•å‘å­—ç¬¦æ•°ç»„é‡Œæ·»åŠ å†…å®¹"><a href="#å¦‚ä½•å‘å­—ç¬¦æ•°ç»„é‡Œæ·»åŠ å†…å®¹" class="headerlink" title="å¦‚ä½•å‘å­—ç¬¦æ•°ç»„é‡Œæ·»åŠ å†…å®¹"></a>å¦‚ä½•å‘å­—ç¬¦æ•°ç»„é‡Œæ·»åŠ å†…å®¹</h2><p>æ·»åŠ çš„æ–¹æ³•å¤šç§å¤šæ ·ï¼Œæä¸å¥½å¯èƒ½è¿˜ä¼šå‡ºé”™ï¼Œæ‰€ä»¥æŠŠå­—ç¬¦æ•°ç»„<strong>å­¦æ˜ç™½</strong>å¾ˆé‡è¦ï¼</p><p>ä»¥ä¸‹ä½¿ç”¨çš„æ•°ç»„æ ·ä¾‹å£°æ˜å¦‚ä¸‹</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span> str[<span class="number">10</span>] = &#123; <span class="number">0</span> &#125;;</span><br></pre></td></tr></table></figure><h3 id="åˆå§‹åŒ–"><a href="#åˆå§‹åŒ–" class="headerlink" title="åˆå§‹åŒ–"></a>åˆå§‹åŒ–</h3><p>åœ¨åˆå§‹åŒ–çš„æ—¶å€™å°±æŠŠå€¼ä¼ è¿›å»ï¼Œæœ‰å“ªäº›åˆå§‹åŒ–æ–¹å¼<strong>ä¸Šé¢</strong>å·²ç»ä»‹ç»è¿‡äº†ï¼Œè¿™é‡Œä¸å¤šèµ˜è¿°</p><h3 id="è®¿é—®æ•°ç»„å…ƒç´ "><a href="#è®¿é—®æ•°ç»„å…ƒç´ " class="headerlink" title="è®¿é—®æ•°ç»„å…ƒç´ "></a>è®¿é—®æ•°ç»„å…ƒç´ </h3><p>é€šè¿‡<code>[]</code>å¯ä»¥è®¿é—®æ•°ç»„å…ƒç´ ï¼Œå¹¶å¯¹æ²¡æœ‰<code>const</code>ä¿®é¥°çš„æ•°ç»„ï¼Œä¿®æ”¹å…¶å…ƒç´ ,ä¾‹å¦‚:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">str[<span class="number">0</span>] = <span class="string">&#x27;A&#x27;</span>;<span class="comment">//å°†æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ æ”¹æˆå­—ç¬¦A</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡å¾ªç¯çš„æ–¹å¼ï¼Œå°†æ•°ç»„çš„æ‰€æœ‰å…ƒç´ å¡«å……ä¸ºæŸä¸ªå­—ç¬¦</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span> place_holder = <span class="string">&#x27;A&#x27;</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span> ; i++)<span class="comment">//è¿™é‡Œä½¿ç”¨å·¦é—­å³å¼€åŒºé—´ï¼Œ10ä¸ºæ•°ç»„çš„å¤§å°</span></span><br><span class="line">&#123;</span><br><span class="line">    str[i] = place_holder;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨scanfå‡½æ•°"><a href="#ä½¿ç”¨scanfå‡½æ•°" class="headerlink" title="ä½¿ç”¨scanfå‡½æ•°"></a>ä½¿ç”¨<code>scanf</code>å‡½æ•°</h3><p>ç”±ä¸Šé¢çš„æ¢ç©¶å·²çŸ¥ï¼šå¯¹äºå·²å£°æ˜çš„å­—ç¬¦æ•°ç»„ï¼Œ<strong>æ— è®º</strong>æœ‰æ²¡æœ‰<code>const</code>ä¿®é¥°ï¼Œéƒ½å¯å·²ç”¨<code>scanf</code>ä¿®æ”¹å†…å®¹,é‚£ä¹ˆ<code>scanf</code>æ€ä¹ˆç”¨ï¼Œåˆå…·ä½“æ€ä¹ˆå·¥ä½œçš„ï¼Œæˆ‘ä»¬æ¥ç€å¾€ä¸‹æ¢ç©¶</p><h4 id="ä½¿ç”¨ç¤ºä¾‹"><a href="#ä½¿ç”¨ç¤ºä¾‹" class="headerlink" title="ä½¿ç”¨ç¤ºä¾‹"></a>ä½¿ç”¨ç¤ºä¾‹</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span> str[<span class="number">10</span>] = &#123; <span class="number">0</span> &#125;;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,str);<span class="comment">//å ä½ç¬¦æ˜¯ %s ,å³è¾¹çš„å‚æ•°æ˜¯ str ,ä¹Ÿå°±æ˜¯æ•°ç»„å</span></span><br><span class="line"><span class="comment">//æˆ–è€… scanf(&quot;%s&quot;,&amp;str)</span></span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong>ï¼è¿™è¾¹çš„æ•°ç»„å<code>str</code>å‚¨å­˜çš„æ˜¯<strong>æ•°ç»„é¦–å…ƒç´ çš„åœ°å€</strong>ï¼Œè€Œ<code>&amp;str</code>å‚¨å­˜çš„æ˜¯<code>æ•´ä¸ªæ•°ç»„çš„åœ°å€</code>ï¼Œå€¼æ˜¯ä¸€æ ·çš„ï¼Œä¸¤è€…çš†å¯ç”¨äºä¼ å‚ï¼Œä½†<strong>æŒ‡é’ˆç±»å‹ä¸ä¸€æ ·</strong>ï¼Œè¦åšå¥½åŒºåˆ†</p><h4 id="scanféƒ½åšäº†ä»€ä¹ˆ"><a href="#scanféƒ½åšäº†ä»€ä¹ˆ" class="headerlink" title="scanféƒ½åšäº†ä»€ä¹ˆ"></a><code>scanf</code>éƒ½åšäº†ä»€ä¹ˆ</h4><p>å…ˆæ¥çœ‹çœ‹å®ƒåˆ†åˆ«å¯¹ç”¨<code>&#123; 0 &#125;</code><strong>åˆå§‹åŒ–</strong>å’Œ<strong>ä¸åˆå§‹åŒ–</strong>çš„æ•°ç»„åšäº†ä»€ä¹ˆ</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span> str1[<span class="number">10</span>] = &#123; <span class="number">0</span> &#125;;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,str1);</span><br><span class="line"><span class="type">char</span> str2[<span class="number">10</span>];</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,str2);</span><br></pre></td></tr></table></figure><p><em>ä¸¤ä¸ªæ•°ç»„çš„è¾“å…¥å‡ä¸ºabc</em><br><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/Snipaste_2023-11-11_19-09-50.jpg"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œå¯¹<code>str1</code>,å­—ç¬¦éå¸¸æ­£å¸¸åœ°å¡«å……è¿›å»äº†ï¼Œå› ä¸ºæ•´ä¸ªæ•°ç»„åŸæœ¬æ˜¯ç”¨<code>\0</code>å¡«å……çš„,çœ‹ä¸å‡ºä»€ä¹ˆç«¯å€ª</p><p>è€Œå¯¹äº<code>str2</code>,è§‚å¯Ÿå‘ç°ï¼Œé™¤äº†è¾“å…¥è¿›å»çš„å­—ç¬¦<code>a</code>,<code>b</code>,<code>c</code>,å®ƒè¿˜è‡ªåŠ¨åœ¨ç»“å°¾è¡¥äº†ä¸€ä¸ª<code>\0</code>,ä½¿<code>str2</code>é‡Œå‚¨å­˜äº†ä¸€ä¸ªå®Œæ•´çš„å­—ç¬¦ä¸²ã€‚<strong>ä½†æ˜¯</strong>ï¼Œå‰©ä¸‹çš„éƒ¨åˆ†è¿˜æ˜¯ç”¨<strong>å€¼</strong><code>-52</code>å¡«å……ï¼Œå³æœªåˆå§‹åŒ–çš„çŠ¶æ€ï¼Œæ‰€ä»¥ä¾ç„¶<strong>ä¸æå€¡</strong>å£°æ˜çš„æ—¶å€™æ²¡æœ‰åˆå§‹åŒ–</p><p>ç„¶åæ˜¯åœ¨å­—ç¬¦æ•°ç»„å†…å·²æœ‰å†…å®¹çš„æƒ…å†µä¸‹ï¼Œå†æ¬¡ä½¿ç”¨<code>scanf</code>çš„æƒ…å†µ</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span> str1[<span class="number">5</span>] = <span class="string">&quot;abc&quot;</span>;</span><br><span class="line"><span class="type">char</span> str2[<span class="number">5</span>] = <span class="string">&quot;abc&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%s %s&quot;</span>,str1,str2);</span><br></pre></td></tr></table></figure><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/Snipaste_2023-11-12_09-33-02.jpg"></p><p>å¦‚å›¾ï¼Œ<code>scanf</code>åšçš„æ˜¯æŠŠè¾“å…¥çš„å­—ç¬¦ä¸²<code>è¦†ç›–</code>å¼å­˜å…¥å­—ç¬¦æ•°ç»„ï¼Œæ¯”åŸæ¥é•¿ï¼Œå°±å®Œå…¨è¦†ç›–ï¼Œæ¯”åŸæ¥çŸ­ï¼Œå°±éƒ¨åˆ†è¦†ç›–ï¼Œæœªè¦†ç›–çš„éƒ¨åˆ†æ— æ”¹åŠ¨</p><h4 id="å…³äºscanfçš„å±é™©æ“ä½œ"><a href="#å…³äºscanfçš„å±é™©æ“ä½œ" class="headerlink" title="å…³äºscanfçš„å±é™©æ“ä½œ"></a>å…³äº<code>scanf</code>çš„å±é™©æ“ä½œ</h4><p>ç”±äº<code>scanf</code>æ— æ³•é¢„æµ‹<strong>å­—ç¬¦æ•°ç»„</strong>èƒ½å¦å­˜ä¸‹è¾“å…¥çš„<strong>å­—ç¬¦ä¸²</strong>ï¼Œå¦‚æœ<strong>å­—ç¬¦æ•°ç»„</strong>å£°æ˜çš„é•¿åº¦ä¸å¤Ÿï¼Œå°±å¯èƒ½å‡ºç°<strong>è¶Šç•Œè®¿é—®</strong>,éšä¹‹è€Œæ¥çš„ä¾¿æ˜¯å¥‡å¥‡æ€ªæ€ªçš„<code>bug</code></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span> str[<span class="number">4</span>] = &#123; <span class="number">0</span> &#125;;<span class="comment">//å…ˆå£°æ˜ä¸€ä¸ªé•¿åº¦ä¸º4çš„æ•°ç»„</span></span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,str);<span class="comment">//è¿™æ¬¡è¾“å…¥abcdefè¯•è¯•</span></span><br></pre></td></tr></table></figure><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/Snipaste_2023-11-12_09-47-00.jpg"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œç¡®å®<strong>è¶Šç•Œè®¿é—®</strong>äº†ï¼Œæ‰€ä»¥å£°æ˜å­—ç¬¦æ•°ç»„çš„æ—¶å€™ï¼Œå»ºè®®æ¯”é¢„è®¡æœ€å¤§è¾“å…¥ï¼Œåœ¨å¤šäº›é•¿åº¦ï¼Œé˜²æ­¢è¶Šç•Œè®¿é—®ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> Cè¯­è¨€ å­—ç¬¦ä¸² æ•°ç»„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>=Cè¯­è¨€å®è·µ= æ‰‹æŠŠæ‰‹æ•™ä½ åšé«˜ç«¯cmdç®€å•æ‰«é›·</title>
      <link href="/2023/10/30/mine-clearance/"/>
      <url>/2023/10/30/mine-clearance/</url>
      
        <content type="html"><![CDATA[<h1 id="ç›´æ¥å¼€å§‹å§ï¼"><a href="#ç›´æ¥å¼€å§‹å§ï¼" class="headerlink" title="ç›´æ¥å¼€å§‹å§ï¼"></a>ç›´æ¥å¼€å§‹å§ï¼</h1><h2 id="å¤šæ–‡ä»¶é¡¹ç›®"><a href="#å¤šæ–‡ä»¶é¡¹ç›®" class="headerlink" title="å¤šæ–‡ä»¶é¡¹ç›®"></a>å¤šæ–‡ä»¶é¡¹ç›®</h2><p>æ‰«é›·é¡¹ç›®å†…å®¹è¾ƒå¤šï¼Œéœ€è¦è°ƒç”¨çš„<strong>å‡½æ•°</strong>ä¹Ÿè¾ƒå¤šï¼Œé‡‡ç”¨å¤šæ–‡ä»¶çš„æ–¹å¼ï¼Œå¯ä»¥ä½¿ä»£ç <strong>æ¡ç†æ¸…æ™°</strong>ï¼Œå¹¶ä¸”<strong>æ˜“äºç®¡ç†å’Œç»´æŠ¤</strong>ã€‚æ–‡ä»¶å¦‚ä¸‹</p><p><code>game.h</code>ç”¨äºå®å®šä¹‰ï¼Œå‡½æ•°å£°æ˜ï¼Œå¼•å…¥å¤´æ–‡ä»¶ç­‰</p><p><code>game.c</code>ç”¨äº<strong>å‡½æ•°çš„å…·ä½“å®ç°</strong></p><p><code>front.c</code>ç”¨äºå®ç°ç¨‹åºçš„<strong>ä¸»å¹²éƒ¨åˆ†</strong></p><p><code>other.c</code>ç”¨äºå®ç°å…¶ä»–æ‚é¡¹å‡½æ•°ï¼Œè¿™é‡Œæˆ‘ç”¨äºå®ç°<code>menu()</code>å‡½æ•°ï¼Œ<del>ä¸»è¦å†…å®¹å¤ªèŠ±äº†</del></p><p><strong>æ³¨</strong>  <code>.c</code>ç»“å°¾çš„æºæ–‡ä»¶å‡éœ€åŠ ä¸€å¥<code>#include &quot;game.h&quot;</code></p><h2 id="å¤´æ–‡ä»¶"><a href="#å¤´æ–‡ä»¶" class="headerlink" title="å¤´æ–‡ä»¶"></a>å¤´æ–‡ä»¶</h2><p>æœ¬æ¬¡ç”¨åˆ°çš„å¤´æ–‡ä»¶æœ‰<code>stdio.h</code> <code>stdlib.h</code> <code>time.h</code> <code>windows.h</code><br>å’Œè‡ªå·±å»ºçš„<code>game.h</code></p><p><strong>å‡åœ¨</strong>æ–‡ä»¶<code>game.h</code>ä¸­<code>#include</code></p><h2 id="defineå®å®šä¹‰"><a href="#defineå®å®šä¹‰" class="headerlink" title="defineå®å®šä¹‰"></a>defineå®å®šä¹‰</h2><p>ä¸ºäº†ä¾¿äº<strong>é˜…è¯»å’Œç»´æŠ¤</strong>ä»£ç ,åœ¨<code>game.h</code>ä¸­çš„å®å®šä¹‰å¦‚ä¸‹</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ˜¾ç¤ºè¡Œåˆ—</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ROW 9</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> COL 9</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å®é™…æ•°ç»„å¤§å°</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ROWS ROW+2</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> COLS COL + 2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//åœ°é›·ä¿¡æ¯</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> Bomb <span class="string">&#x27;*&#x27;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> Blank <span class="string">&#x27; &#x27;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//éš¾åº¦</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> EZ_RANK 10</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> HD_RANK 15</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ˜¾ç¤ºåŒº</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> UN <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> Flag <span class="string">&#x27;!&#x27;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ä¸ºä»€ä¹ˆå®é™…æ•°ç»„è¦å¤§ä¸€åœˆï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆå®é™…æ•°ç»„è¦å¤§ä¸€åœˆï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆå®é™…æ•°ç»„è¦å¤§ä¸€åœˆï¼Ÿ"></a>ä¸ºä»€ä¹ˆå®é™…æ•°ç»„è¦å¤§ä¸€åœˆï¼Ÿ</h3><p>å¦‚å›¾ï¼Œé‡‡ç”¨ä¹å®«æ ¼å¼è®¿é—®æ—¶ï¼Œå¤§å‡ºæ¥çš„ä¸€åœˆèƒ½æœ‰æ•ˆ<strong>é˜²æ­¢è¶Šç•Œè®¿é—®</strong></p><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/Snipaste_2023-11-02_11-23-51.jpg"></p><h2 id="æ„å»ºmainå‡½æ•°"><a href="#æ„å»ºmainå‡½æ•°" class="headerlink" title="æ„å»ºmainå‡½æ•°"></a>æ„å»ºmainå‡½æ•°</h2><p>å†…å®¹ä¸å¤šï¼Œä¸»è¦æ˜¯ä¸èœå•é…åˆé£Ÿç”¨</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//ç”¨time()è·å–æ—¶é—´æˆ³ï¼Œä¼ ç»™srandè®¾ç½®(éšæœºå€¼ç”Ÿæˆå™¨çš„)ç§å­</span></span><br><span class="line">srand((<span class="type">unsigned</span> <span class="type">int</span>)time(<span class="literal">NULL</span>));</span><br><span class="line"><span class="keyword">while</span> (<span class="number">1</span>)<span class="comment">//å¾ªç¯æ¸¸ç©</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="type">int</span> input = <span class="number">0</span>;</span><br><span class="line">Menu();<span class="comment">//æ‰“å°èœå•</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;è¯·è¾“å…¥:&gt;&quot;</span>);</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;input);<span class="comment">//è·å–æŒ‡ä»¤</span></span><br><span class="line"><span class="keyword">switch</span> (input)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">Sleep(<span class="number">250</span>);</span><br><span class="line">game();<span class="comment">//å¼€å§‹æ¸¸æˆ,æ¸¸æˆå…·ä½“åœ¨game()å‡½æ•°ä¸­å®ç°</span></span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;æ¸¸æˆç»“æŸ\n&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;<span class="comment">//ç»“æŸç¨‹åº</span></span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;è¾“å…¥é”™è¯¯,è¯·é‡è¯•\n&quot;</span>);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="æ‰“å°èœå•"><a href="#æ‰“å°èœå•" class="headerlink" title="æ‰“å°èœå•"></a>æ‰“å°èœå•</h2><p>è¿˜åœ¨åšé™æ€èœå•?<del>å¼±çˆ†äº†ï¼</del>æ¥è¯•è¯•<strong>åŠ¨æ€å‡ºç°</strong>çš„èœå•ï¼</p><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/menu.gif"></p><p>åŸç†å¾ˆ<strong>ç®€å•</strong>ï¼Œå°±æ˜¯<code>æ‰“å°ç©ºç™½æ•°ç»„</code>-&gt;<code>å‘å†…é€ä¸ªæ›¿æ¢ä¸¤ä¾§å…ƒç´ </code>-&gt;<code>æ¸…å±</code>-&gt;<code>å†æ‰“å°</code>-&gt;<code>å†æ›¿æ¢</code>-&gt;<code>...</code></p><p><em>æ¥ä¸‹æ¥çš„ä»£ç å†™åœ¨<code>other.c</code>ä¸­</em></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åŠ¨æ€æ‰“å°èœå•</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">Menu</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="type">char</span> cover[]  =  <span class="string">&quot;=======================&quot;</span>;</span><br><span class="line"><span class="type">char</span> option1[] = <span class="string">&quot;======  play (1) ======&quot;</span>;</span><br><span class="line"><span class="type">char</span> option2[] = <span class="string">&quot;======  exit (2) ======&quot;</span>; </span><br><span class="line"><span class="type">char</span> empty_c[] = <span class="string">&quot;                       &quot;</span>;</span><br><span class="line"><span class="type">char</span> empty_1[] = <span class="string">&quot;                       &quot;</span>;</span><br><span class="line"><span class="type">char</span> empty_2[] = <span class="string">&quot;                       &quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> left = <span class="number">0</span>;</span><br><span class="line"><span class="type">int</span> right = <span class="number">22</span>;</span><br><span class="line"><span class="keyword">while</span> (left &lt; right)</span><br><span class="line">&#123;</span><br><span class="line">        <span class="comment">//å†…å®¹æ›¿æ¢</span></span><br><span class="line">empty_c[left] = cover[left];</span><br><span class="line">empty_c[right] = cover[right];</span><br><span class="line">empty_1[left] = option1[left];</span><br><span class="line">empty_1[right] = option1[right];</span><br><span class="line">empty_2[left] = option2[left];</span><br><span class="line">empty_2[right] = option2[right];</span><br><span class="line"></span><br><span class="line">Sleep(<span class="number">50</span>);</span><br><span class="line">system(<span class="string">&quot;cls&quot;</span>);<span class="comment">//æ¸…å±</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%s\n%s\n%s\n%s\n&quot;</span>,empty_c,empty_1,empty_2,empty_c);<span class="comment">//æ‰“å°èœå•</span></span><br><span class="line"></span><br><span class="line">left++;</span><br><span class="line">right--;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (left == right)<span class="comment">//æ‰“å°æœ€ç»ˆèœå•</span></span><br><span class="line">&#123;</span><br><span class="line">Sleep(<span class="number">50</span>);</span><br><span class="line">system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">empty_c[left] = cover[left];</span><br><span class="line">empty_1[left] = option1[left];</span><br><span class="line">empty_2[left] = option2[left];</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%s\n%s\n%s\n%s\n&quot;</span>, empty_c, empty_1, empty_2, empty_c);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å®ç°game-å‡½æ•°"><a href="#å®ç°game-å‡½æ•°" class="headerlink" title="å®ç°game()å‡½æ•°"></a>å®ç°game()å‡½æ•°</h2><p><em>æ¸¸æˆçš„ä¸»è¦é€»è¾‘åœ¨game()ä¸­å®ç°</em></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">game</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="type">char</span> mine[ROWS][COLS] = &#123; <span class="number">0</span> &#125;;</span><br><span class="line"><span class="type">char</span> show[ROWS][COLS] = &#123; <span class="number">0</span> &#125;;</span><br><span class="line"><span class="type">char</span> check[ROWS][COLS] = &#123; <span class="number">0</span> &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆå§‹åŒ–æ£‹ç›˜ï¼Œå…¶å®å°±æ˜¯ç”¨ç¬¬äºŒä¸ªå½¢å‚å¡«å……äºŒç»´æ•°ç»„</span></span><br><span class="line">InitBoard(mine, Blank);</span><br><span class="line">InitBoard(show, UN);</span><br><span class="line"></span><br><span class="line">InitCheck(check);<span class="comment">//åˆå§‹åŒ–checkæ•°ç»„ï¼Œé€»è¾‘ä¸ä¸Šé¢çš„åˆå§‹åŒ–ä¸åŒ</span></span><br><span class="line"></span><br><span class="line">SetMine(mine,EZ_RANK);<span class="comment">//è®¾ç½®åœ°é›·</span></span><br><span class="line">SetNum(mine);<span class="comment">//è®¾ç½®é›·å‘¨å›´çš„æ•°å­—</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//DisplayBoard(mine); //ç”¨äºå¼€å‘æ—¶æ£€æŸ¥æ£‹ç›˜å¸ƒå±€</span></span><br><span class="line"><span class="comment">//DisplayBoard(show); //åŒä¸Šï¼Œä¸ä½¿ç”¨æ—¶æ³¨é‡Šæ‰</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä»¥ä¸Šæ˜¯å‰æœŸå‡†å¤‡</span></span><br><span class="line">OPMine(mine,show, check);<span class="comment">//å¼€å§‹æ’é›·</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;æ•²å‡»enterä»¥ç»§ç»­\n&quot;</span>);</span><br><span class="line">getchar();</span><br><span class="line">getchar();</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä¸ºä»€ä¹ˆç”¨ä¸‰ä¸ªäºŒç»´æ•°ç»„ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆç”¨ä¸‰ä¸ªäºŒç»´æ•°ç»„ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆç”¨ä¸‰ä¸ªäºŒç»´æ•°ç»„ï¼Ÿ"></a>ä¸ºä»€ä¹ˆç”¨ä¸‰ä¸ªäºŒç»´æ•°ç»„ï¼Ÿ</h3><p>æ‰«é›·éœ€è¦å®ç°çš„åŠŸèƒ½è¾ƒå¤šï¼Œæ˜¾ç„¶ä¸€ä¸ªäºŒç»´æ•°ç»„æ˜¯ä¸è¶³ä»¥æ»¡è¶³éœ€æ±‚çš„ï¼Œæ‰€ä»¥è¿™é‡Œé‡‡ç”¨<strong>ä¸‰ä¸ª</strong>æ•°ç»„ç›¸å åŠ çš„æ–¹å¼ï¼Œå„è‡ªå®ç°åŠŸèƒ½ï¼Œå¹¶æ•´åˆåˆ°ä¸€èµ·ã€‚</p><p>æ•°ç»„<code>mine</code>ç”¨äºå­˜æ”¾<code>é›·</code>å’Œé›·å‘¨å›´çš„<code>è®¡æ•°æ•°å­—</code></p><p>æ•°ç»„<code>show</code>ç”¨äºå‚¨å­˜ç»™<code>ç”¨æˆ·</code>çœ‹åˆ°çš„å†…å®¹ï¼Œå¯ä»¥æ˜¯<code>Unkown</code>,<code>ç©ºç™½</code>ï¼Œ<code>æ•°å­—</code>ï¼Œ<code>æ——å¸œ</code></p><p>æ•°ç»„<code>check</code>ç”¨äºè®°å½•æ£‹ç›˜çš„å“ªäº›åœ°å—è¢«æ£€æŸ¥è¿‡äº†ï¼Œé˜²æ­¢åé¢ç”¨<strong>é€’å½’</strong>æ‰“å¼€æˆç‰‡çš„ç©ºç™½åŒºæ—¶ï¼Œå‡ºç°æ— é™é€’å½’ã€‚</p><p><strong>è§„å®š</strong>ï¼šæ£€æŸ¥è¿‡çš„åæ ‡å‚¨å­˜<code>å­—ç¬¦1</code>,æ²¡æ£€æŸ¥è¿‡çš„åæ ‡å‚¨å­˜<code>å­—ç¬¦0</code>,å¤§å‡ºæ¥çš„<strong>ä¸€åœˆ</strong>é»˜è®¤å‚¨å­˜<code>å­—ç¬¦1</code></p><h2 id="å®ç°æ¸¸æˆç”¨çš„å‡½æ•°"><a href="#å®ç°æ¸¸æˆç”¨çš„å‡½æ•°" class="headerlink" title="å®ç°æ¸¸æˆç”¨çš„å‡½æ•°"></a>å®ç°æ¸¸æˆç”¨çš„å‡½æ•°</h2><h3 id="å…ˆçœ‹çœ‹æœ‰å“ªäº›è¦å£°æ˜åœ¨game-hé‡Œçš„"><a href="#å…ˆçœ‹çœ‹æœ‰å“ªäº›è¦å£°æ˜åœ¨game-hé‡Œçš„" class="headerlink" title="å…ˆçœ‹çœ‹æœ‰å“ªäº›è¦å£°æ˜åœ¨game.hé‡Œçš„"></a>å…ˆçœ‹çœ‹æœ‰å“ªäº›è¦å£°æ˜åœ¨<code>game.h</code>é‡Œçš„</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">Menu</span><span class="params">()</span>;<span class="comment">//è¿™ä¸ªåœ¨ä¸Šæ–‡å®ç°è¿‡äº†</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¸€ä¸‹å‡½æ•°å°†åœ¨ä¸‹æ–‡å®ç°</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆå§‹åŒ–æ£‹ç›˜</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">InitBoard</span><span class="params">(<span class="type">char</span> board[ROWS][COLS], <span class="type">char</span> sign)</span>;</span><br><span class="line"><span class="comment">//å±•ç¤ºæ£‹ç›˜</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">DisplayBoard</span><span class="params">(<span class="type">char</span> board[ROWS][COLS])</span>;</span><br><span class="line"><span class="comment">//åˆå§‹åŒ–checkæ£‹ç›˜</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">InitCheck</span><span class="params">(<span class="type">char</span> check[ROWS][COLS])</span>;</span><br><span class="line"><span class="comment">//è®¾ç½®åœ°é›·/æ•°å­—</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">SetMine</span><span class="params">(<span class="type">char</span> board[ROWS][COLS],<span class="type">int</span> rank)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">SetNum</span><span class="params">(<span class="type">char</span> board[ROWS][COLS])</span>;</span><br><span class="line"><span class="comment">//ç©å®¶æ’é›·ç”¨çš„å‡½æ•°</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">OPMine</span><span class="params">(<span class="type">char</span> mine[ROWS][COLS],<span class="type">char</span> show[ROWS][COLS],<span class="type">char</span> check[ROWS][COLS])</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><em>å¥½ï¼Œæœ‰äº†ç›®æ ‡ï¼Œæ¥ä¸‹æ¥å°±å»ä¸€ä¸ªä¸€ä¸ªå®ç°</em></p><p><strong>æ³¨</strong>ï¼šä»¥ä¸‹ä»£ç å‡å†™åœ¨<code>game.c</code>æ–‡ä»¶é‡Œ</p><h3 id="InitBoard"><a href="#InitBoard" class="headerlink" title="InitBoard()"></a>InitBoard()</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">InitBoard</span><span class="params">(<span class="type">char</span> board[ROWS][COLS],<span class="type">char</span> sign)</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; ROWS; i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; COLS; j++)</span><br><span class="line">&#123;</span><br><span class="line">board[i][j] = sign;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œåˆå§‹åŒ–çš„æ–¹å¼æ¯”è¾ƒç®€å•ç²—æš´ï¼Œå°±æ˜¯ç”¨å½¢å‚<code>sign</code>å¡«å……æ•´ä¸ªäºŒç»´æ•°ç»„</p><h3 id="DisplayBoard-å‡½æ•°"><a href="#DisplayBoard-å‡½æ•°" class="headerlink" title="DisplayBoard()å‡½æ•°"></a>DisplayBoard()å‡½æ•°</h3><p>è¿™é‡Œé‡‡ç”¨çš„å±•ç¤ºæ–¹å¼æ˜¯å¸¦æ¨ªçºµåæ ‡çš„</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">DisplayBoard</span><span class="params">(<span class="type">char</span> board[ROWS][COLS])</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//æ‰“å°ä¸€æ’åˆ—åæ ‡</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> k = <span class="number">0</span>; k &lt;= COL; k++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, k);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line"><span class="comment">//æ‰“å°ä¸€æ’æ¨ªåˆ†å‰²çº¿</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> k = <span class="number">0</span>; k &lt;= COL; k++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;--&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= ROW; i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d|&quot;</span>, i);<span class="comment">//è¿™å¥è¯æ‰“å°æ¨ªæ’åæ ‡å’Œç«–åˆ†å‰²çº¿</span></span><br><span class="line"><span class="comment">//æ‰“å°ä¸€æ’æ£‹ç›˜å†…å®¹</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= COL; j++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%c &quot;</span>, board[i][j]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="InitCheck-å‡½æ•°"><a href="#InitCheck-å‡½æ•°" class="headerlink" title="InitCheck()å‡½æ•°"></a>InitCheck()å‡½æ•°</h3><p>è¿™é‡Œå¤ç”¨äº†<code>InitBoard()</code>å‡½æ•°ï¼Œæ˜¯åœ¨å…¶åŸºç¡€ä¸Šå¢åŠ äº†å†…å®¹</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">InitCheck</span><span class="params">(<span class="type">char</span> check[ROWS][COLS])</span></span><br><span class="line">&#123;</span><br><span class="line">InitBoard(check, <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//å°†è¾¹ç¼˜å¤§å‡ºæ¥çš„ä¸€åœˆæ”¹ä¸º&#x27;1&#x27;</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> k = <span class="number">0</span>; k &lt; COLS; k++)</span><br><span class="line">&#123;</span><br><span class="line">check[<span class="number">0</span>][k] = <span class="string">&#x27;1&#x27;</span>;</span><br><span class="line">check[ROWS - <span class="number">1</span>][k] = <span class="string">&#x27;1&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; ROWS <span class="number">-1</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">check[i][<span class="number">0</span>] = <span class="string">&#x27;1&#x27;</span>;</span><br><span class="line">check[i][COLS - <span class="number">1</span>] = <span class="string">&#x27;1&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="SetMine-å‡½æ•°"><a href="#SetMine-å‡½æ•°" class="headerlink" title="SetMine()å‡½æ•°"></a>SetMine()å‡½æ•°</h3><p>è¿™é‡Œè¦ä½¿ç”¨<code>rand()</code>å‡½æ•°æ­é…<code>%</code>è¿ç®—ï¼Œæ¥éšæœºç”Ÿæˆé›·çš„åæ ‡</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">SetMine</span><span class="params">(<span class="type">char</span> board[ROWS][COLS],<span class="type">int</span> rank)</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="type">int</span> x = <span class="number">0</span>;</span><br><span class="line"><span class="type">int</span> y = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> count = <span class="number">0</span>;count &lt; rank;)</span><br><span class="line">&#123;</span><br><span class="line">x = rand() % ROW + <span class="number">1</span>;<span class="comment">//xçš„èŒƒå›´æ˜¯1~ROW</span></span><br><span class="line">y = rand() % COL + <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (board[x][y] == Blank)</span><br><span class="line">&#123;</span><br><span class="line">count++;</span><br><span class="line">board[x][y] = Bomb;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="SetNum-å‡½æ•°"><a href="#SetNum-å‡½æ•°" class="headerlink" title="SetNum()å‡½æ•°"></a>SetNum()å‡½æ•°</h3><p>è¿™é‡Œéå†ä¸€éæ•°ç»„å¹¶é‡‡ç”¨<code>ä¹å®«æ ¼å¼</code>è®¡æ•°</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è¯¥å‡½æ•°ç”¨äºä¹å®«æ ¼å¼è®¡æ•°ï¼Œå¹¶åœ¨ä¸‹ä¸ªå‡½æ•°ä¸­è¢«è°ƒç”¨</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">CountMine</span><span class="params">(<span class="type">char</span> board[ROWS][COLS], <span class="type">int</span> x, <span class="type">int</span> y)</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="type">int</span> sum = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = x - <span class="number">1</span>; i &lt;= x + <span class="number">1</span>; i++)<span class="comment">//ä¸Šä¸­ä¸‹ä¸‰è¡Œ</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = y - <span class="number">1</span>; j &lt;= y + <span class="number">1</span>; j++)<span class="comment">//å·¦ä¸­å³ä¸‰åˆ—</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (i != x || j != y)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (board[i][j] == Bomb)</span><br><span class="line">&#123;</span><br><span class="line">sum++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">SetNum</span><span class="params">(<span class="type">char</span> board[ROWS][COLS])</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//éå†äºŒç»´æ•°ç»„</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= ROW; i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt;= COLS; j++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (board[i][j] == Blank)<span class="comment">//ä»…æ“ä½œéé›·çš„æ ¼å­</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (CountMine(board, i, j))</span><br><span class="line">&#123;</span><br><span class="line">board[i][j] = <span class="string">&#x27;0&#x27;</span> + CountMine(board, i, j);<span class="comment">//å°†è¿”å›çš„æ•°å­—è½¬åŒ–æˆå­—ç¬¦</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="OPMine-å‡½æ•°â€“æ ¸å¿ƒå‡½æ•°"><a href="#OPMine-å‡½æ•°â€“æ ¸å¿ƒå‡½æ•°" class="headerlink" title="OPMine()å‡½æ•°â€“æ ¸å¿ƒå‡½æ•°"></a>OPMine()å‡½æ•°â€“æ ¸å¿ƒå‡½æ•°</h3><p>è¯¥å‡½æ•°ä¸ºæ¸¸æˆçš„<code>æ ¸å¿ƒå‡½æ•°</code>ï¼Œæœ‰å†…ç½®èœå•ï¼Œä¸”å¤šæ¬¡è°ƒç”¨å…¶å®ƒå‡½æ•°ï¼Œå…¶ä¸­<code>å‡½æ•°</code>çš„å…·ä½“å®ç°è§<code>å››çº§æ ‡é¢˜</code>å¤„</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">OPMine</span><span class="params">(<span class="type">char</span> mine[ROWS][COLS],<span class="type">char</span> show[ROWS][COLS],<span class="type">char</span> check[ROWS][COLS])</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="type">int</span> x = <span class="number">0</span>;<span class="comment">//æ¨ªçºµåæ ‡</span></span><br><span class="line"><span class="type">int</span> y = <span class="number">0</span>;</span><br><span class="line"><span class="type">int</span> flag = <span class="number">1</span>;<span class="comment">//ç”¨äºèœå•é€‰é¡¹</span></span><br><span class="line"><span class="type">int</span> cont = <span class="number">1</span>;<span class="comment">//contä¸º0æ—¶æ¸¸æˆç»“æŸ</span></span><br><span class="line"><span class="keyword">while</span> (cont)</span><br><span class="line">&#123;</span><br><span class="line">system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">DisplayBoard(show);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;æ’é›·(1)\næ’æ——/æ‹”æ——(2)\nè¯·è¾“å…¥:&gt;&quot;</span>);</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;flag);</span><br><span class="line"></span><br><span class="line"><span class="keyword">switch</span> (flag)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//æ’é›·</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;åæ ‡æ ¼å¼,ä¾‹&gt;2(ç©ºæ ¼)2\n&quot;</span>);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;è¯·è¾“å…¥åæ ‡:&gt;&quot;</span>);</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;x, &amp;y);</span><br><span class="line"><span class="keyword">if</span> (show[x][y] == Flag)</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;æ­¤å¤„ä¸ºæ——å¸œï¼Œä¸å¯æ’é›·\n&quot;</span>);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (show[x][y] != UN)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;ä¸å¯é‡å¤æ’æŸ¥\n&quot;</span>);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å…·ä½“æ’é›·æ“ä½œ</span></span><br><span class="line">cont = FindMine(mine,show,check, x, y);</span><br><span class="line"><span class="keyword">if</span> (cont)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//æ£€æŸ¥æ˜¯å¦èµ¢å¾—æ¸¸æˆ</span></span><br><span class="line">cont = CheckWin(mine,show);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//æ’æ——</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;åæ ‡æ ¼å¼,ä¾‹&gt;2(ç©ºæ ¼)2\n&quot;</span>);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;è¯·è¾“å…¥åæ ‡:&gt;&quot;</span>);</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;x, &amp;y);</span><br><span class="line">SetFlag(show, x, y);<span class="comment">//æ’æ——å‡½æ•°</span></span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">&#123;</span><br><span class="line">system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;\nè¾“å…¥é”™è¯¯(æ¼\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="SetFlag-å‡½æ•°"><a href="#SetFlag-å‡½æ•°" class="headerlink" title="SetFlag()å‡½æ•°"></a>SetFlag()å‡½æ•°</h4><p>å…ˆæè½¯æŸ¿å­ï¼Œæ’æ——å‡½æ•°æ¯”è¾ƒç®€å•</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">SetFlag</span><span class="params">(<span class="type">char</span> show[ROWS][COLS], <span class="type">int</span> x, <span class="type">int</span> y)</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (show[x][y] == UN)<span class="comment">//æ’æ——</span></span><br><span class="line">&#123;</span><br><span class="line">show[x][y] = Flag;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (show[x][y] == Flag)<span class="comment">//æ‹”æ——</span></span><br><span class="line">&#123;</span><br><span class="line">show[x][y] = UN;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;æŠ¥é”™\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="ExpandBlank-å‡½æ•°"><a href="#ExpandBlank-å‡½æ•°" class="headerlink" title="ExpandBlank()å‡½æ•°"></a>ExpandBlank()å‡½æ•°</h4><p>è¿™ä¸ªå‡½æ•°ç”¨äºæ‰“å¼€æˆç‰‡çš„<code>ç©ºç™½åŒº</code>,å› ä¸ºè¦ä»è¿ç€çš„ç©ºç™½è¿ç»­å¼€ä¸‹å»ï¼Œæ‰€ä»¥è¦ç”¨åˆ°<code>å‡½æ•°é€’å½’</code>,æ­¤æ—¶<code>äºŒç»´æ•°ç»„check</code>ç”¨äºé˜²æ­¢æ­»é€’å½’</p><p><strong>æ³¨</strong>ï¼šè¿™ä¸ªå‡½æ•°ä¸€å®šè¦å†™åœ¨ä¸‹ä¸€ä¸ªå‡½æ•°(FindMine)å‰</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">ExpandBlank</span><span class="params">(<span class="type">char</span> mine[ROWS][COLS], <span class="type">char</span> show[ROWS][COLS], <span class="type">char</span> check[ROWS][COLS],<span class="type">int</span> x,<span class="type">int</span> y)</span></span><br><span class="line">&#123;</span><br><span class="line">show[x][y] = mine[x][y];<span class="comment">//å°†ç”¨æˆ·çœ‹åˆ°çš„æ ¼å­æ”¹æˆmineä¸­çš„æ ¼å­,åŒ…æ‹¬ç©ºç™½å’Œæ•°å­—æ ¼å­</span></span><br><span class="line">check[x][y] = <span class="string">&#x27;1&#x27;</span>;<span class="comment">//æ¢æµ‹è¿‡çš„æ ¼å­æ”¾`1`</span></span><br><span class="line"><span class="keyword">if</span> (mine[x][y] == Blank)<span class="comment">//ä»…ç©ºç™½æ ¼å­ä¼šè§¦å‘é€’å½’ï¼Œæ•°å­—æ ¼å­ä¸ä¼š</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//ä¹å®«æ ¼å¼æ¢æµ‹</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = x - <span class="number">1</span>; i &lt;= x + <span class="number">1</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = y - <span class="number">1</span>; j &lt;= y + <span class="number">1</span>; j++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (check[i][j] == <span class="string">&#x27;0&#x27;</span> &amp;&amp; mine[i][j] != Bomb &amp;&amp; show[i][j] != Flag)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//å«é›·çš„æ ¼å­ä¸ä¼šæ‰§è¡ŒExpandBlankå‡½æ•°ï¼Œå°±ä¸ä¼šæŠŠé›·æ”¾å‡ºæ¥ç»™ç”¨æˆ·çœ‹ï¼Œä½†æ•°å­—æ ¼å­ä¼š</span></span><br><span class="line">ExpandBlank(mine, show, check, i, j);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="FindMine-å‡½æ•°"><a href="#FindMine-å‡½æ•°" class="headerlink" title="FindMine()å‡½æ•°"></a>FindMine()å‡½æ•°</h4><p>æ’é›·ç”¨çš„å‡½æ•°</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">FindMine</span><span class="params">(<span class="type">char</span> mine[ROWS][COLS], <span class="type">char</span> show[ROW][COLS],<span class="type">char</span> check[ROWS][COLS], <span class="type">int</span> x, <span class="type">int</span> y)</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (mine[x][y] == Bomb)</span><br><span class="line">&#123;</span><br><span class="line">DisplayBoard(mine);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;ç‚¸æ­»ï¼Œæ¸¸æˆç»“æŸ:)\n&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;<span class="comment">//è¿”å›0æ¥ç»“æŸæ¸¸æˆ</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (mine[x][y] != Blank)</span><br><span class="line">&#123;</span><br><span class="line">show[x][y] = mine[x][y];</span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span>;<span class="comment">//è¿”å›1æ¥ç»§ç»­æ¸¸æˆ</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//è¿™é‡Œæœ‰å¯¹ä¸Šä¸€ä¸ªå‡½æ•°çš„è°ƒç”¨</span></span><br><span class="line">ExpandBlank(mine, show, check,x,y);</span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="CheckWin-å‡½æ•°"><a href="#CheckWin-å‡½æ•°" class="headerlink" title="CheckWin()å‡½æ•°"></a>CheckWin()å‡½æ•°</h4><p>ç”¨äºæ£€æŸ¥ç©å®¶æ˜¯å¦å®Œå…¨æ’é›·ï¼Œèµ¢å¾—æ¸¸æˆ</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">CheckWin</span><span class="params">(<span class="type">char</span> mine[ROWS][COLS], <span class="type">char</span> show[ROWS][COLS])</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="type">int</span> count = <span class="number">0</span>;<span class="comment">//ç»Ÿè®¡æ²¡æ’é›·çš„æ ¼å­æ•°</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= ROW; i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= COL; j++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (show[i][j] == UN || show[i][j] == Flag)</span><br><span class="line">&#123;</span><br><span class="line">count++;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (count == EZ_RANK)<span class="comment">//ç»Ÿè®¡æ•°==é›·æ•°</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;æ­å–œæ’é›·æˆåŠŸ!\n&quot;</span>);</span><br><span class="line">DisplayBoard(mine);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;<span class="comment">//è¿”å›0ï¼Œåœæ­¢æ¸¸æˆ</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>è‡³æ­¤æ¸¸æˆæ‰€éœ€çš„ä»£ç å…¨éƒ¨å®Œæˆï¼Œå·²ç»å¯ä»¥ç¼–è¯‘å‡ºæ¥ç©è€å•¦ã€‚</p><p>è¯¥å®è·µé¡¹ç›®ä¸»è¦ç»ƒä¹ äº†<code>äºŒç»´æ•°ç»„</code>,<code>å‡½æ•°</code>,<code>å‡½æ•°é€’å½’</code>,<code>å®å®šä¹‰</code>ç­‰å†…å®¹ï¼Œä»£ç é‡åœ¨å…¥é—¨å­¦ä¹ ä¸­ç®—è¾ƒå¤§çš„ï¼Œæœ¬äººåœ¨åˆæ¬¡ç¼–å†™çš„æ—¶å€™ä¹Ÿå†™å‡ºäº†ä¸å°‘bugï¼Œdebugçš„è¿‡ç¨‹æ˜¯ç›¸å½“<del>å¿«ä¹</del></p><p>å»ºè®®å¤šå¤šç”»ç¤ºæ„å›¾ï¼Œ<strong>è€ä¸‹æ€§å­</strong>å†™ä»£ç å’Œdebug,å“ªæ€•æ˜¯å®ç°è¿™æ ·çš„å°æ¸¸æˆé¡¹ç›®ï¼Œä¹Ÿæ˜¯é¢‡æœ‰æ„ä¹‰çš„</p>]]></content>
      
      
      
        <tags>
            
            <tag> Cè¯­è¨€ å®è·µé¡¹ç›® </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç©è½¬Nç»„è¾“å…¥å’Œå¤šç»„è¾“å…¥</title>
      <link href="/2023/10/18/mutiInput/"/>
      <url>/2023/10/18/mutiInput/</url>
      
        <content type="html"><![CDATA[<h1 id="å¼•å…¥"><a href="#å¼•å…¥" class="headerlink" title="å¼•å…¥"></a>å¼•å…¥</h1><p>å½“æˆ‘ä»¬åœ¨å†™IOå‹OJæ—¶ï¼Œ<code>å¤šç»„è¾“å…¥</code>ä¾¿æ˜¯æˆ‘ä»¬ç»•è¿‡ä¸å¼€çš„è¯é¢˜äº†ï¼Œä½†<strong>ä¸ç”¨æ‹…å¿ƒ</strong>ï¼Œå¯èƒ½åˆè§å¤šç»„è¾“å…¥ä¼šè§‰å¾—éš¾ä»¥ç†è§£ï¼Œä½†ç”¨å¤šäº†ä¹‹åå°±ä¼šå‘ç°ï¼Œ<code>å¤šç»„è¾“å…¥</code> èŠ±æ ·å¹¶ä¸å¤šï¼Œæ··ç†Ÿäº†å°±<strong>å¾ˆç®€å•äº†</strong></p><h2 id="å…ˆçœ‹çœ‹ä¸€ç»„è¾“å…¥è¾“å‡ºå¦‚ä½•å®Œæˆçš„"><a href="#å…ˆçœ‹çœ‹ä¸€ç»„è¾“å…¥è¾“å‡ºå¦‚ä½•å®Œæˆçš„" class="headerlink" title="å…ˆçœ‹çœ‹ä¸€ç»„è¾“å…¥è¾“å‡ºå¦‚ä½•å®Œæˆçš„"></a>å…ˆçœ‹çœ‹ä¸€ç»„è¾“å…¥è¾“å‡ºå¦‚ä½•å®Œæˆçš„</h2><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/Snipaste_2023-10-19_17-06-13.jpg"></p><p><em>å¦‚å›¾</em>ï¼šä¸€ç»„è¾“å…¥æ—¶ï¼Œç”¨<code>scanf</code>è·å–ä¸€ç»„è¾“å…¥ï¼Œå¹¶åœ¨ä¸»ä½“éƒ¨åˆ†å®Œæˆæ•°æ®çš„å¤„ç†ï¼Œäº§ç”Ÿç»“æœï¼Œæœ€åç”¨<code>printf</code>è¾“å‡ºäº§ç”Ÿçš„ä¸€ç»„ç»“æœã€‚</p><p><em>ä»¥ä¸‹ç”¨å®ç°åŠ æ³•çš„ç¨‹åºåšæ¼”ç¤º</em></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> a,b;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>,&amp;a,&amp;b);<span class="comment">//è·å–ä¸€ç»„è¾“å…¥</span></span><br><span class="line">    <span class="type">int</span> sum = a + b;<span class="comment">//äº§ç”Ÿç»“æœ</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,sum);<span class="comment">//è¾“å‡ºç»“æœ</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ç„¶åå‡çº§åˆ°Nç»„è¾“å…¥"><a href="#ç„¶åå‡çº§åˆ°Nç»„è¾“å…¥" class="headerlink" title="ç„¶åå‡çº§åˆ°Nç»„è¾“å…¥"></a>ç„¶åå‡çº§åˆ°Nç»„è¾“å…¥</h1><p>æœ‰çš„OJé¢˜åœ¨ä¸€ä¸ªæµ‹è¯•æ–‡ä»¶ä¸­ä¼šå…ˆè¾“å…¥ä¸€ä¸ª<code>n</code>,å‘Šè¯‰ä½ æ¥ä¸‹æ¥æœ‰<code>n</code>ç»„è¾“å…¥ï¼Œä½ å°±è¦äº§ç”Ÿ<code>n</code>ç»„è¾“å‡º,ä¹Ÿå°±æ˜¯è¯´è¦å°†<code>ä¸€ç»„è¾“å…¥è¾“å‡º</code><strong>é‡å¤æ€§åœ°</strong>å®Œæˆ<code>næ¬¡</code>ã€‚éš¾é“æˆ‘ä»¬è¦æŠŠä»£ç é‡å¤<code>næ¬¡</code>å—ï¼Ÿæ˜¾ç„¶ä¸ç°å®ã€‚</p><p>æ‰€ä»¥æ˜¯æ—¶å€™ä½¿ç”¨<strong>å¾ªç¯</strong>äº†ï¼Œå…·ä½“ç”¨æ³•å¦‚ä¸‹</p><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/Snipaste_2023-10-20_07-34-35.jpg"></p><p>å¦‚å›¾ï¼Œå…ˆç”¨ä¸€ä¸ª<code>scanf</code>è·å–å¾ªç¯æ¬¡æ•°<code>n</code>,ç„¶ååˆ›å»ºä¸€ä¸ªå¾ªç¯ï¼Œå°†<code>ä¸€ç»„è¾“å…¥è¾“å‡º</code>æ”¾å…¥å¾ªç¯ä½“ï¼Œä¸€æ¬¡ä¸€æ¬¡å¾ªç¯å¤„ç†å³å¯</p><h2 id="å˜é‡çš„é‡ç½®"><a href="#å˜é‡çš„é‡ç½®" class="headerlink" title="å˜é‡çš„é‡ç½®"></a>å˜é‡çš„é‡ç½®</h2><p>ä¸ºé˜²æ­¢å‰åä¸¤æ¬¡å¾ªç¯äº§ç”Ÿå¹²æ‰°ï¼Œæœ‰ä¸¤ç§å¤„ç†<code>å˜é‡</code>çš„æ–¹å¼</p><p>1.(æ¨è)é™¤äº†è¾“å…¥çš„å˜é‡ï¼Œ<strong>å…¶å®ƒæ‰€æœ‰å˜é‡</strong>åœ¨å¾ªç¯ä½“å†…å£°æ˜ï¼Œè¿™äº›å˜é‡ä¼šåœ¨ä¸€æ¬¡å¾ªç¯å<em>é”€æ¯</em>ï¼Œä¸‹ä¸€æ¬¡å¾ªç¯å¼€å§‹æ—¶<strong>è‡ªåŠ¨</strong><em>é‡æ–°å£°æ˜</em>ï¼Œä»è€Œå®Œæˆ<strong>å˜é‡çš„è‡ªåŠ¨é‡ç½®</strong></p><p><em>ä»¥ä¸‹é¢è¿™ä¸ªä¸€æ¬¡æ±‚å’Œ3ä¸ªæ•°çš„ç¨‹åºä¸ºä¾‹</em></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> n = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);<span class="comment">//è·å–å¾ªç¯æ¬¡æ•°n</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i =<span class="number">0</span>;i&lt;n;i++)<span class="comment">//åˆ›å»ºå¾ªç¯</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//ä»¥ä¸‹å®Œæˆä¸€ç»„è¾“å…¥è¾“å‡º</span></span><br><span class="line">        <span class="type">int</span> sum = <span class="number">0</span>;<span class="comment">//å£°æ˜ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œä¸‹æ¬¡å¾ªç¯æ—¶ä¼šè‡ªåŠ¨é‡å£°æ˜</span></span><br><span class="line">        <span class="type">int</span> num = <span class="number">0</span>;<span class="comment">//å‚¨å­˜è¾“å…¥çš„æ•°å­—</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j =<span class="number">0</span>;j&lt;<span class="number">3</span>;j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;num);</span><br><span class="line">            sum+=num;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,sum);<span class="comment">//å®Œæˆè¾“å‡º</span></span><br><span class="line">        <span class="comment">//æœ¬æ¬¡å¾ªç¯èµ°å®Œåå˜é‡sumè¢«é”€æ¯ï¼Œç„¶åè¿›å…¥ä¸‹ä¸€æ¬¡å¾ªç¯,å®Œæˆé‡ç½®</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>2.åœ¨å¾ªç¯å¤–éƒ¨å£°æ˜å˜é‡ï¼Œç„¶ååœ¨<strong>å¾ªç¯æœ«å°¾</strong>æ‰‹åŠ¨é‡ç½®å˜é‡</p><p><em>ä»¥ä¸‹é¢è¿™ä¸ªä¸€æ¬¡æ±‚å’Œ3ä¸ªæ•°çš„ç¨‹åºä¸ºä¾‹</em></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> sum = <span class="number">0</span>;<span class="comment">//å£°æ˜åœ¨å¾ªç¯å¤–éƒ¨</span></span><br><span class="line">    <span class="type">int</span> n = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);<span class="comment">//è·å–å¾ªç¯æ¬¡æ•°n</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i =<span class="number">0</span>;i&lt;n;i++)<span class="comment">//åˆ›å»ºå¾ªç¯</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//ä»¥ä¸‹å®Œæˆä¸€ç»„è¾“å…¥è¾“å‡º</span></span><br><span class="line">        <span class="type">int</span> num = <span class="number">0</span>;<span class="comment">//å‚¨å­˜è¾“å…¥çš„æ•°å­—</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j =<span class="number">0</span>;j&lt;<span class="number">3</span>;j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;num);</span><br><span class="line">            sum+=num;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,sum);<span class="comment">//å®Œæˆè¾“å‡º</span></span><br><span class="line">        sum = <span class="number">0</span>;<span class="comment">//é‡ç½®sum</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="è¦ä¸è¦ç”¨æ•°ç»„å‚¨å­˜è¾“å…¥ï¼Œæˆ–å‚¨å­˜ç»“æœå†ä¸€æ¬¡æ€§è¾“å‡ºï¼Ÿ"><a href="#è¦ä¸è¦ç”¨æ•°ç»„å‚¨å­˜è¾“å…¥ï¼Œæˆ–å‚¨å­˜ç»“æœå†ä¸€æ¬¡æ€§è¾“å‡ºï¼Ÿ" class="headerlink" title="è¦ä¸è¦ç”¨æ•°ç»„å‚¨å­˜è¾“å…¥ï¼Œæˆ–å‚¨å­˜ç»“æœå†ä¸€æ¬¡æ€§è¾“å‡ºï¼Ÿ"></a>è¦ä¸è¦ç”¨æ•°ç»„å‚¨å­˜è¾“å…¥ï¼Œæˆ–å‚¨å­˜ç»“æœå†ä¸€æ¬¡æ€§è¾“å‡ºï¼Ÿ</h2><p>ç­”æ¡ˆæ˜¯ï¼š<strong>å¯ä»¥ï¼Œä½†æ²¡å¿…è¦</strong>ã€‚</p><p>åªéœ€è¦åƒä¸Šå›¾é‚£ä¹ˆå†™å³å¯ï¼Œå› ä¸ºè¾“å…¥æ˜¯ä¸€æ¬¡æ€§å–‚è¿›å»çš„ ã€‚å­˜æ•°ç»„å†è¾“å‡ºï¼Œå’Œæ¯äº§ç”Ÿä¸€ä¸ªç»“æœå°±è¾“å‡ºä¸€æ¬¡ï¼Œæœ€ç»ˆå‘ˆç°å‡ºæ¥æ˜¯ä¸€æ ·çš„ï¼ˆå¦‚ä¸‹å›¾ï¼‰</p><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/%E5%A4%9A%E7%BB%84%E8%BE%93%E5%87%BA.gif"></p><h1 id="ç°åœ¨ï¼Œå‹‡å£«ï¼Œæ¥æŒ‘æˆ˜å¤šç»„è¾“å…¥å§"><a href="#ç°åœ¨ï¼Œå‹‡å£«ï¼Œæ¥æŒ‘æˆ˜å¤šç»„è¾“å…¥å§" class="headerlink" title="ç°åœ¨ï¼Œå‹‡å£«ï¼Œæ¥æŒ‘æˆ˜å¤šç»„è¾“å…¥å§"></a>ç°åœ¨ï¼Œå‹‡å£«ï¼Œæ¥æŒ‘æˆ˜å¤šç»„è¾“å…¥å§</h1><h2 id="scanfçš„è¿”å›å€¼"><a href="#scanfçš„è¿”å›å€¼" class="headerlink" title="scanfçš„è¿”å›å€¼"></a>scanfçš„è¿”å›å€¼</h2><p>å¤šç»„è¾“å…¥æ—¶ï¼Œç©¶ç«Ÿä¼šè¾“å…¥å¤šå°‘ç»„æ•°æ®ï¼Œä¹Ÿä¸å‘Šè¯‰ä½ äº†ï¼Œ<strong>ä½†æ˜¯</strong>ï¼Œæ­¤æ—¶<code>scanf</code>çš„è¿”å›å€¼å°±æ´¾ä¸Šç”¨åœºäº†ã€‚å’Œæˆ‘ä»¬åœ¨ç»ˆç«¯æ‰‹æ‰“è¾“å…¥ä¸åŒ,OJçš„è¾“å…¥æ˜¯å–‚ä¸€ä¸ªæ–‡ä»¶è¿›å»ï¼Œæ‰€ä»¥å½“<strong>è¾“å…¥ç»“æŸæ—¶</strong>ï¼Œ<code>scanf</code>çš„è¿”å›å€¼æ˜¯<code>EOF</code><em>(æ„ä¸ºæ–‡ä»¶ç»“å°¾end of file)</em>,è€Œå½“æˆåŠŸè¾“å…¥æ•°æ®æ—¶ï¼Œåˆ™ä¼šè¿”å›è¾“å…¥æ•°æ®çš„ä¸ªæ•°(æ–‡æ¡£æˆªå›¾å¦‚ä¸‹)</p><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/Snipaste_2023-10-20_20-46-54.jpg"></p><h2 id="ç»“åˆå¾ªç¯"><a href="#ç»“åˆå¾ªç¯" class="headerlink" title="ç»“åˆå¾ªç¯"></a>ç»“åˆå¾ªç¯</h2><p>é‚£ä¹ˆå°±æŠŠ<code>scanf</code>æ”¾å…¥<code>while</code>å¾ªç¯å§,æ¯æ¬¡è¯•å›¾è·å–ä¸‹ä¸€ç»„è¾“å…¥æ—¶ï¼Œæ£€æµ‹æ˜¯å¦è¿”å›å€¼ä¸º<code>EOF</code>,è‹¥æ˜¯ï¼Œåˆ™è·³å‡ºå¾ªç¯ï¼Œç»“æŸç¨‹åºï¼›è‹¥å¦ï¼Œåˆ™ç»§ç»­å¾ªç¯</p><p><em>ä»¥ä¸‹é¢è¿™ä¸ªä¸€æ¬¡æ±‚å’Œ3ä¸ªæ•°çš„ç¨‹åºä¸ºä¾‹</em></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> num = <span class="number">0</span>;<span class="comment">//å…ˆå£°æ˜è‡³å°‘ä¸€ä¸ªå¾…è¾“å…¥çš„å˜é‡</span></span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n) != EOF)<span class="comment">//åˆ›å»ºå¾ªç¯ï¼Œæ¯æ¬¡å¾ªç¯å¼€å§‹æ—¶scanfä¸€æ¬¡ï¼Œå¹¶æ£€æµ‹æ˜¯å¦è¿”å›EOF</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//å¼€å§‹æ„å»ºå¾ªåä½“</span></span><br><span class="line">        <span class="type">int</span> sum = <span class="number">0</span>;</span><br><span class="line">        sum+=n;</span><br><span class="line">        <span class="comment">//å®Œæˆå‰©ä¸‹çš„ä¸¤æ¬¡è¾“å…¥</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i =<span class="number">0</span>; i &lt; <span class="number">3</span> - <span class="number">1</span>;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">            sum+=n</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,sum);<span class="comment">//å®Œæˆä¸€æ¬¡è¾“å‡º</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//scanfè¿”å›EOFåè·³å‡ºå¾ªç¯</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åŸºæœ¬æ¶æ„"><a href="#åŸºæœ¬æ¶æ„" class="headerlink" title="åŸºæœ¬æ¶æ„"></a>åŸºæœ¬æ¶æ„</h2><p>ä»¥åå†è¦å†™<code>å¤šç»„è¾“å…¥</code>ï¼ŒåŸºæœ¬å°±åƒä¸Šé¢é‚£ä¸ªç¨‹åºä¸€æ ·</p><p>1.å…ˆå£°æ˜è‡³å°‘ä¸€ä¸ªå¾…è¾“å…¥çš„å˜é‡</p><p>2.åˆ›å»ºå¾ªç¯ï¼Œæ¯æ¬¡å¾ªç¯å¼€å§‹æ—¶scanfä¸€æ¬¡ï¼Œå¹¶æ£€æµ‹æ˜¯å¦è¿”å›EOF</p><p>3.å¼€å§‹æ„å»ºå¾ªåä½“(åŒ…æ‹¬å®Œæˆå‰©ä¸‹çš„è¾“å…¥,å®Œæˆä¸€ç»„è¾“å‡º)<strong>åˆ«å¿˜äº†å›è½¦ï¼ï¼ï¼</strong></p><p>4.ç›´è‡³scanfè¿”å›EOFåè·³å‡ºå¾ªç¯</p><h1 id="æƒ³æ¨¡æ‹Ÿä¸€ä¸‹å¤šç»„è¾“å…¥çœ‹çœ‹ï¼Ÿ"><a href="#æƒ³æ¨¡æ‹Ÿä¸€ä¸‹å¤šç»„è¾“å…¥çœ‹çœ‹ï¼Ÿ" class="headerlink" title="æƒ³æ¨¡æ‹Ÿä¸€ä¸‹å¤šç»„è¾“å…¥çœ‹çœ‹ï¼Ÿ"></a>æƒ³æ¨¡æ‹Ÿä¸€ä¸‹å¤šç»„è¾“å…¥çœ‹çœ‹ï¼Ÿ</h1><p>åƒä¸‹å›¾ä¸€æ ·æ¯ç»„æ•°æ®é—´åŠ ä¸ª<code>ç©ºæ ¼</code>å°±è¡Œï¼Œä»€ä¹ˆï¼Ÿé¢˜ç›®çš„æ ·ä¾‹è¾“å…¥æœ‰<code>å›è½¦</code>ï¼Ÿä¸ç”¨ç®¡å®ƒï¼Œæ”¾å¿ƒå¤§èƒ†åœ°<code>æ¢æˆç©ºæ ¼</code>å°±è¡Œã€‚è‡ªå·±<code>æµ‹è¯•</code>ç¨‹åºï¼Œåªéœ€è¦<strong>è¾“å‡º</strong>ä¸€æ ·å°±è¡Œï¼Œè‡³äºæ€ä¹ˆè¾“å…¥ï¼Œ<strong>æ²¡å¿…è¦</strong>å’Œé¢˜ç›®ä¸€æ¨¡ä¸€æ ·</p><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/mutiInpuut.gif"></p><h1 id="æ³¨æ„ï¼ï¼ï¼ä¸è¦è¯•å›¾åœ¨ç»ˆç«¯åœæ­¢ç¨‹åº"><a href="#æ³¨æ„ï¼ï¼ï¼ä¸è¦è¯•å›¾åœ¨ç»ˆç«¯åœæ­¢ç¨‹åº" class="headerlink" title="æ³¨æ„ï¼ï¼ï¼ä¸è¦è¯•å›¾åœ¨ç»ˆç«¯åœæ­¢ç¨‹åº"></a>æ³¨æ„ï¼ï¼ï¼ä¸è¦è¯•å›¾åœ¨ç»ˆç«¯åœæ­¢ç¨‹åº</h1><p>å› ä¸ºå’ŒOJä¸åŒï¼Œåœ¨æœ¬åœ°è¿è¡Œç¨‹åºæ—¶ï¼Œä¸æ˜¯æ–‡ä»¶è¾“å…¥ï¼Œè€Œæ˜¯ç»ˆç«¯è¾“å…¥,æ²¡æ³•è®©<code>scanf</code>è¿”å›<code>EOF</code>,<del>ç‚«è¿ˆï¼Œæ ¹æœ¬åœä¸æ¥</del></p><p>ä½ è¦æ˜¯æƒ³ç«‹å³<code>ä¸­æ–­</code>ç¨‹åºï¼Œé‚£å°±æŒ‰<code>ctrl+c</code></p>]]></content>
      
      
      
        <tags>
            
            <tag> Cè¯­è¨€ å¤šç»„è¾“å…¥ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>=Cè¯­è¨€= æ•´å‹å˜é‡ä¸è¿‡å¤§çš„æ•´æ•°</title>
      <link href="/2023/10/14/BiiigInt/"/>
      <url>/2023/10/14/BiiigInt/</url>
      
        <content type="html"><![CDATA[<h2 id="æ•´å‹å®¶æ—"><a href="#æ•´å‹å®¶æ—" class="headerlink" title="æ•´å‹å®¶æ—"></a>æ•´å‹å®¶æ—</h2><p>åœ¨ä½¿ç”¨Cè¯­è¨€å†™ç¨‹åºæ—¶ï¼Œä¼šå‚¨å­˜å„ç§é•¿åº¦çš„æ•´å‹,è€Œåœ¨æ•´å‹å®¶æ—ä¸­ï¼Œé•¿åº¦çš„æ¯”è¾ƒå¦‚ä¸‹</p><p><code>char &lt; short &lt;= int &lt;= long &lt;long long </code></p><h2 id="æ•´å‹æ˜¯å¦‚ä½•å‚¨å­˜åœ¨å†…å­˜ä¸­çš„"><a href="#æ•´å‹æ˜¯å¦‚ä½•å‚¨å­˜åœ¨å†…å­˜ä¸­çš„" class="headerlink" title="æ•´å‹æ˜¯å¦‚ä½•å‚¨å­˜åœ¨å†…å­˜ä¸­çš„"></a>æ•´å‹æ˜¯å¦‚ä½•å‚¨å­˜åœ¨å†…å­˜ä¸­çš„</h2><p><em>ä»¥<code>char</code>ä¸ºä¾‹</em><br><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/Snipaste_2023-10-14_15-33-30.jpg" alt="char"></p><p><code>char</code>çš„é•¿åº¦ä¸º1ä¸ª<code>å­—èŠ‚</code>ï¼Œ8ä¸ª<code>æ¯”ç‰¹ä½</code>,å…¶ä¸­<strong>æœ€é«˜ä½</strong>æ˜¯<strong>ç¬¦å·ä½</strong>,<code>0</code>è¡¨ç¤ºæ­£æ•°ï¼Œ<code>1</code>è¡¨ç¤ºè´Ÿæ•°ï¼Œå‰©ä¸‹çš„ä½æ•°ç”¨äºå‚¨å­˜å˜é‡çš„<strong>ç»å¯¹å€¼</strong></p><hr><p>è€Œå½“ä½¿ç”¨æ— ç¬¦å·æ•´å‹(å¸¦å‰ç¼€<code>unsigned</code>)æ—¶ï¼Œåªéœ€æŠŠç¬¦å·ä½ä¹Ÿç”¨äºå­˜å€¼å³å¯</p><h2 id="èƒ½å¤Ÿå‚¨å­˜çš„æœ€å¤§æ­£æ•´æ•°"><a href="#èƒ½å¤Ÿå‚¨å­˜çš„æœ€å¤§æ­£æ•´æ•°" class="headerlink" title="èƒ½å¤Ÿå‚¨å­˜çš„æœ€å¤§æ­£æ•´æ•°"></a>èƒ½å¤Ÿå‚¨å­˜çš„æœ€å¤§æ­£æ•´æ•°</h2><p><code>int</code>é•¿åº¦ä¸º4<code>å­—èŠ‚</code>,èƒ½å¤Ÿå‚¨å­˜çš„æœ€å¤§å€¼ä¸º<code>2çš„31æ¬¡æ–¹-1</code>,å³<strong>2,147,483,647</strong></p><p><code>unsigned int</code>èƒ½å¤Ÿå‚¨å­˜çš„æœ€å¤§å€¼ä¸º<strong>4294967295</strong></p><p><code>unsigned long long</code>é•¿åº¦ä¸º8<code>å­—èŠ‚</code>,èƒ½å¤Ÿå‚¨å­˜çš„æœ€å¤§å€¼ä¸º<code>2çš„64æ¬¡æ–¹-1</code>,å³<strong>18,446,744,073,709,551,615</strong></p><hr><h2 id="é™åˆ¶"><a href="#é™åˆ¶" class="headerlink" title="é™åˆ¶"></a>é™åˆ¶</h2><p>è™½ç„¶<code>unsigned long long</code>å·²ç»å¾ˆå¤§äº†ï¼Œä½†å½“é‡åˆ°<code>æŒ‡æ•°</code>,<code>é˜¶ä¹˜</code>ä¹‹ç±»çš„è¿ç®—æ—¶ä»ç„¶å¯èƒ½<strong>å­˜ä¸ä¸‹!</strong>(å…‰<code>21!</code>å°±æ¯”<code>unsigned long long</code>é•¿äº†)</p><h2 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h2><p>è¿‡å¤§çš„æ•´æ•°ï¼Œå¯èƒ½å‡ºç°åœ¨<strong>ç¨‹åºçš„è¿‡ç¨‹</strong>ä¸­ï¼Œä¹Ÿå¯èƒ½å‡ºç°åœ¨<strong>è¾“å‡º</strong>ä¸­ï¼Œå¯¹äºè¿‡ç¨‹ï¼Œå¯ä»¥å°è¯•<strong>æ”¹å˜å®ç°æ€è·¯</strong>ï¼Œè®©è¿‡ç¨‹ä¸­ä¸å‡ºç°è¿‡å¤§çš„æ•´æ•°ï¼›å¯¹äºè¾“å‡ºï¼Œå¯ä»¥å°è¯•<strong>æ”¹å˜è¾“å‡ºçš„ç±»å‹</strong>ï¼Œé‡‡ç”¨è¾“å‡º<strong>å­—ç¬¦æˆ–å­—ç¬¦ä¸²</strong></p><h1 id="ä»¥ä¸‹çš†ä¸ºä¾‹é¢˜"><a href="#ä»¥ä¸‹çš†ä¸ºä¾‹é¢˜" class="headerlink" title="ä»¥ä¸‹çš†ä¸ºä¾‹é¢˜"></a>ä»¥ä¸‹çš†ä¸ºä¾‹é¢˜</h1><h2 id="1-æ±‚n-çš„ç»“å°¾æœ‰å¤šå°‘ä¸ª0"><a href="#1-æ±‚n-çš„ç»“å°¾æœ‰å¤šå°‘ä¸ª0" class="headerlink" title="1.æ±‚n!çš„ç»“å°¾æœ‰å¤šå°‘ä¸ª0"></a>1.æ±‚n!çš„ç»“å°¾æœ‰å¤šå°‘ä¸ª0</h2><p>æœ€ç›´ç™½çš„æ€è·¯å°±æ˜¯æŠŠ<code>n!</code>ç®—å‡ºæ¥ï¼Œç„¶åç”¨<code>%10</code>å†<code>/=10</code>çš„æ–¹æ³•ç»Ÿè®¡æœ«å°¾çš„<code>0</code>,æƒ³æ³•å¾ˆç®€å•ï¼Œâ€œå®ç°â€èµ·æ¥ä¹Ÿä¸éš¾ï¼Œ<strong>ä½†ä¸å¹¸çš„æ˜¯</strong>ï¼Œ<code>21!</code>å°±å·²ç»å‚¨å­˜ä¸äº†äº†ï¼Œæ‰€ä»¥ä¸èƒ½æš´åŠ›æ±‚è§£</p><p>æ‰€ä»¥è¦<strong>æ”¹å˜æ€è·¯</strong>ï¼Œå…ˆä»æœ«å°¾0æ˜¯æ€ä¹ˆæ¥çš„ä¸‹æ‰‹ã€‚æœ«å°¾çš„nä¸ª0æ¥è‡ªå› å¼åˆ†è§£å10çš„næ¬¡æ–¹ï¼Œè€Œé‡‡ç”¨è´¨å› æ•°åˆ†è§£çš„æ–¹æ³•ï¼Œå¯ä»¥å‘ç°<code>0</code>æ¥è‡ªåˆ†è§£å<code>2çš„næ¬¡æ–¹</code>å’Œ<code>5çš„næ¬¡æ–¹</code>,è€Œä¸€ä¸ªæ•°åˆ†è§£å<code>2çš„næ¬¡æ–¹</code>å¿…å®šæ¯”<code>5çš„næ¬¡æ–¹</code> å¤šï¼Œæ‰€ä»¥åªéœ€ç»Ÿè®¡<code>5çš„næ¬¡æ–¹</code>ã€‚<strong>æ³¨æ„</strong>ï¼šå°±åˆ«å†å€’å›å»ï¼Œæƒ³ç€å…ˆç®—å‡ºé˜¶ä¹˜å†æ±‚<code>5çš„næ¬¡æ–¹</code>äº†ã€‚</p><p><strong>è¿™é‡Œé‡‡ç”¨é€æ­¥è®¡æ•°çš„æ–¹æ³•</strong>ï¼šç»“æœä¸­çš„<code>5çš„næ¬¡æ–¹</code>æ¥è‡ªå„ä¸ªå› æ•°ä¸­<code>5çš„Næ¬¡æ–¹</code>çš„ç´¯ä¹˜,æ‰€ä»¥åªéœ€è¦å†éæ¯ä¸ªå› æ•°ï¼Œå¹¶ç»Ÿè®¡å…¶ä¸­<code>å› æ•°5</code>çš„æ¬¡æ•°ã€‚è¿™æ ·è¿‡ç¨‹ä¸­å°±ä¸ä¼šæœ‰è¿‡å¤§çš„æ•°å­—äº†</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä»£ç å®ç°</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">count_num0</span><span class="params">(<span class="type">int</span> n)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> count = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> copy = i<span class="comment">//é˜²æ­¢æ”¹å˜å¾ªç¯å˜é‡</span></span><br><span class="line">        <span class="keyword">while</span>(copy%<span class="number">5</span> == <span class="number">0</span>)<span class="comment">//ç»Ÿè®¡å› æ•°5çš„å‡ºç°æ¬¡æ•°</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(copy%<span class="number">5</span> == <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                count++;</span><br><span class="line">            &#125;</span><br><span class="line">            copy/=<span class="number">5</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> count;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="å¿«é€Ÿè¾“å‡º1-2-â€¦â€¦-10-n"><a href="#å¿«é€Ÿè¾“å‡º1-2-â€¦â€¦-10-n" class="headerlink" title="å¿«é€Ÿè¾“å‡º1+2+â€¦â€¦+10^n"></a>å¿«é€Ÿè¾“å‡º1+2+â€¦â€¦+10^n</h2><p><em>å¦‚ä¸‹å›¾</em>ï¼šå½“æˆ‘ä»¬è¯•å›¾ç®—ä¸€ç®—ç­”æ¡ˆæ—¶ï¼Œå‘ç°<code>n</code>åˆ°äº†<code>10</code>æ—¶å°±å·²ç»ç®—ä¸å‡ºç­”æ¡ˆäº†</p><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/gao_si.png" alt="è®¡ç®—ç»“æœ"></p><p>æ‰€ä»¥è¦<strong>æ”¹å˜è¾“å‡ºç­”æ¡ˆç­”æ¡ˆçš„æ–¹å¼</strong>,è§‚å¯Ÿä¸€ä¸‹<code>n</code>åœ¨<code>1~9</code>æ—¶çš„è¾“å‡º</p><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/Snipaste_2023-10-19_07-26-54.jpg" alt="è¾“å‡º"></p><p>è¿™æ—¶æˆ‘ä»¬å‘ç°<strong>ç­”æ¡ˆé¢‡æœ‰è§„å¾‹</strong>ï¼šæ¯ä¸ªè¾“å‡ºéƒ½æ˜¯<strong>ä¸¤æ®µ</strong><code>å…ˆä¸€ä¸ª5ï¼Œç„¶ån-1ä¸ª0</code>ï¼</p><p>è¿™æ ·æˆ‘ä»¬åªéœ€<strong>ä»æœ€é«˜ä½å¾€æœ€ä½ä½</strong>é€ä½æ‰“å°å³å¯,ä»£ç å¦‚ä¸‹</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">printChar</span><span class="params">(<span class="type">int</span> n)</span><span class="comment">//ç‰ˆæœ¬ä¸€ï¼Œé€ä½æ‰“å°å­—ç¬¦(ä¸²)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;5&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i =<span class="number">0</span>;i&lt;n<span class="number">-1</span>;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;0&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å†é‡å¤ä¸€æ®µ</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;5&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i =<span class="number">0</span>;i&lt;n<span class="number">-1</span>;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;0&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">printNum</span><span class="params">(<span class="type">int</span> n)</span><span class="comment">//ç‰ˆæœ¬äºŒï¼Œé€ä½æ‰“å°æ•´å‹</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,<span class="number">5</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i =<span class="number">0</span>;i&lt;n<span class="number">-1</span>;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å†é‡å¤ä¸€æ®µ</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,<span class="number">5</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i =<span class="number">0</span>;i&lt;n<span class="number">-1</span>;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Cè¯­è¨€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¦‚ä½•åœ¨VSé‡Œä½¿ç”¨scanf</title>
      <link href="/2023/10/05/useScanf/"/>
      <url>/2023/10/05/useScanf/</url>
      
        <content type="html"><![CDATA[<h1 id="VSé‡Œæ€ä¹ˆè¿scanféƒ½ç”¨ä¸äº†ï¼Ÿ"><a href="#VSé‡Œæ€ä¹ˆè¿scanféƒ½ç”¨ä¸äº†ï¼Ÿ" class="headerlink" title="VSé‡Œæ€ä¹ˆè¿scanféƒ½ç”¨ä¸äº†ï¼Ÿ"></a>VSé‡Œæ€ä¹ˆè¿scanféƒ½ç”¨ä¸äº†ï¼Ÿ</h1><p>ä¸å°‘åˆšæ¥è§¦<a href="https://visualstudio.microsoft.com/zh-hans/free-developer-offers/">Visual Studio</a>çš„å¯èƒ½å‘ç°ä½¿ç”¨scanfä¼šæŠ¥é”™(å¦‚ä¸‹)</p><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/VS_scanf.jpg" alt="æŠ¥é”™å›¾ç‰‡"></p><p>vså‘Šè¯‰ä½ è¯´<code>scanf</code>ä¸å®‰å…¨ï¼Œç„¶åä½ ä¼šå‘ç°vsç»™ä½ æä¾›äº†<code>scanf_s</code>å»ä»£æ›¿<code>scanf</code>,<strong>ä½†æ˜¯</strong>,åªæœ‰vsèƒ½ç¼–è¯‘<code>scanf_s</code>,<strong>å¯ç§»æ¤æ€§</strong>å¤ªå·®äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦ç”¨å›<code>scanf</code>,æ‰€ä»¥è¦æ€ä¹ˆä¸è®©å®ƒæŠ¥é”™å‘¢ï¼Ÿ<strong>å¯ä»¥åœ¨æºæ–‡ä»¶å¼€å¤´æ·»åŠ ä¸€è¡Œå®å®šä¹‰(å¦‚ä¸‹)</strong></p><p><code>#define  _CRT_SECURE_NO_WARNINGS 1</code></p><p>è¿™æ ·å°±èƒ½<strong>å…³é—­æŠ¥é”™</strong>äº†,ä½†è¯·å…ˆ<strong>åˆ«æ€¥ç€èµ°</strong>,æ¯æ¬¡éƒ½è¦å¤åˆ¶ç²˜è´´ä¸€å¥å®å®šä¹‰å¤ªéº»çƒ¦äº†ï¼Œæƒ³<strong>ä¸€åŠ³æ°¸é€¸</strong>çš„è¯·å¾€ä¸‹çœ‹ã€‚</p><h1 id="ä¿®æ”¹newc-file-cppæ¥è‡ªåŠ¨æ·»åŠ å®å®šä¹‰"><a href="#ä¿®æ”¹newc-file-cppæ¥è‡ªåŠ¨æ·»åŠ å®å®šä¹‰" class="headerlink" title="ä¿®æ”¹newc++file.cppæ¥è‡ªåŠ¨æ·»åŠ å®å®šä¹‰"></a>ä¿®æ”¹newc++file.cppæ¥è‡ªåŠ¨æ·»åŠ å®å®šä¹‰</h1><p><strong>å…ˆæ¥çœ‹æ€ä¹ˆåšï¼š</strong>é¦–å…ˆæœç´¢æ‰¾åˆ°ç”µè„‘ä¸­å«åš<code>newc++file.cpp</code>çš„æ–‡ä»¶ã€‚ï¼ˆè¿™é‡Œæ¨èä½¿ç”¨<a href="https://www.voidtools.com/zh-cn/downloads/">everything</a>ï¼‰</p><hr><p><em>ååŠæ®µè·¯å¾„åº”ä¸å›¾ç‰‡ä¸€è‡´ï¼Œæ³¨æ„ä¸æ˜¯å¿«æ·æ–¹å¼</em></p><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/newcppfile.jpg" alt="c++æ–‡ä»¶çš„ä½ç½®"></p><hr><p><strong>æ³¨æ„</strong>ï¼šç”±äºæƒé™åŸå› ï¼Œ<strong>æ— æ³•</strong>ç›´æ¥ä¿®æ”¹æ­¤æ–‡ä»¶</p><p>æ‰€ä»¥å…ˆå°†è¿™ä¸ªæ–‡ä»¶å¤åˆ¶ç²˜è´´åˆ°åˆ«å¤„ï¼Œä¾‹å¦‚æ¡Œé¢ï¼Œä¸‹æ–‡ç”¨<code>å‰¯æœ¬</code>ä»£ç§°ã€‚</p><p>ç”¨è®°äº‹æœ¬ç±»è½¯ä»¶(è®°äº‹æœ¬å°±è¡Œ)æ‰“å¼€<code>å‰¯æœ¬</code>,åœ¨ç¬¬ä¸€è¡Œè¾“å…¥ä¸Šæ–‡æåˆ°çš„å®å®šä¹‰ä»£ç <code>#define  _CRT_SECURE_NO_WARNINGS 1</code>,ç„¶å<code>ctrl+s</code>ä¿å­˜ã€‚</p><p><strong>å…³é—­ç¼–è¾‘çª—å£</strong>ï¼Œå°†è¯¥<code>å‰¯æœ¬</code>ç§»åŠ¨åˆ°åŸå§‹æ–‡ä»¶æ‰€åœ¨æ–‡ä»¶å¤¹ï¼Œå¼¹å‡ºå¦‚ä¸‹çª—å£ï¼Œç„¶åé€‰æ‹©<strong>æ›¿æ¢æ–‡ä»¶</strong></p><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/Snipaste_2023-10-08_12-28-18.jpg"></p><p>æ¥ç€å¼¹å‡ºä¸‹ä¸€ä¸ªæç¤ºï¼Œç‚¹<strong>æ¥ç»­</strong></p><p><img src="https://picbed0521.oss-cn-shanghai.aliyuncs.com/blogpic/Snipaste_2023-10-08_12-28-33.jpg"></p><p>ç­‰å¾…å®ƒæ›¿æ¢å®Œæˆï¼Œç„¶å<strong>å¤§åŠŸå‘Šæˆï¼</strong>ã€‚ä¹‹åæ–°å»ºçš„æ¯ä¸€ä¸ª<code>.c</code>æˆ–<code>.cpp</code> æ–‡ä»¶éƒ½ä¼šè‡ªå¸¦é‚£æ®µå®å®šä¹‰ï¼Œäºæ˜¯<code>scanf</code>ä»æ­¤ä»»å›ä½¿ç”¨ã€‚<del>å½“ç„¶å¹³æ—¶åˆ ä»£ç çš„æ—¶å€™è®°å¾—åˆ«æŠŠé‚£æ®µå®å®šä¹‰åˆ äº†</del></p><h2 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h2><p>VSæ‰€æ–°å»ºçš„<code>.c</code>å’Œ<code>.cpp</code>æ–‡ä»¶éƒ½æºè‡ªäºå¯¹ä¸Šæ–‡<code>newc++file.cpp</code>æ–‡ä»¶çš„æ‹·è´ï¼Œé€šè¿‡ä¿®æ”¹å®ƒå°±èƒ½æ”¹å˜<code>VSæ–°å»ºæ–‡ä»¶</code>çš„åˆå§‹å†…å®¹</p>]]></content>
      
      
      
        <tags>
            
            <tag> Cè¯­è¨€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>=å›é¡¾-å‰ç«¯=ä»ç®€é™‹çš„htmlåˆ°å•ç½‘é¡µå†åˆ°å…¨æ ˆå¼€å‘</title>
      <link href="/2023/09/23/vueTheRoad/"/>
      <url>/2023/09/23/vueTheRoad/</url>
      
        <content type="html"><![CDATA[<p><a href="https://picbed.supdriver.top/html/prj_basis++/index.html">ğŸ‘‰ç‚¹æˆ‘å»ä½œä¸šä¸€</a></p><p><a href="https://picbed.supdriver.top/html/adc_v2/index.html">ğŸ‘‰ç‚¹æˆ‘å»ä½œä¸šäºŒ</a></p><p><a href="http://localhost:5173/">ğŸ‘‰ç‚¹æˆ‘å»ä½œä¸šä¸‰</a>(æŠ±æ­‰ï¼Œè¿˜æ²¡éƒ¨ç½²åˆ°æœåŠ¡å™¨é‡Œï¼Œè¿™ä¸ªåªèƒ½åœ¨æˆ‘è‡ªå·±çš„ç”µè„‘é‡Œç”¨)</p><p><a href="https://picbed.supdriver.top/video/never.mp4">ğŸ‘‰ç‚¹æˆ‘å»ä½œä¸šå››</a></p><p><del>å…¶å®è¿™ä¾ç„¶æ˜¯ä¸ªåšå®¢</del></p><hr><h1 id="ç²—ç³™çš„ä½œä¸šä¸€"><a href="#ç²—ç³™çš„ä½œä¸šä¸€" class="headerlink" title="ç²—ç³™çš„ä½œä¸šä¸€"></a>ç²—ç³™çš„ä½œä¸šä¸€</h1><p>å½“æ—¶åªå­¦è¿‡html,css,jsçš„å¿«é€Ÿå…¥é—¨ï¼Œå¯¹ç›’å­<code>&lt;div&gt;</code>çš„ç©æ³•è¿˜ä¸å¤ªç†Ÿï¼Œè¿˜åªä¼šç”¨æµ®åŠ¨ç›’å­<code>float</code>å’Œç»å¯¹å®šä½,ç»“å±€å°±æ˜¯å†™ä¸¤å¥htmlå°±å¾—æ¸…é™¤æµ®åŠ¨<del>233</del>,ç”šè‡³<code>&lt;lenged&gt;</code>ä¹Ÿä¸è®¤è¯†ï¼Œç»“æœæ‰‹åŠ¨ç”¨cssç»™å®ç°äº†ã€‚æ€»ä¹‹å°±æŒºç®€é™‹çš„</p><h1 id="ç²¾è‡´-å¹¶ä¸-ä½œä¸šäºŒ"><a href="#ç²¾è‡´-å¹¶ä¸-ä½œä¸šäºŒ" class="headerlink" title="ç²¾è‡´(å¹¶ä¸)ä½œä¸šäºŒ"></a>ç²¾è‡´<del>(å¹¶ä¸)</del>ä½œä¸šäºŒ</h1><p>ç”¨vscodeå†™ä½œä¸šäºŒçš„æ—¶å€™ï¼Œå†™ä¸€åŠå‘ç°é¼ æ ‡æ‚¬åœåœ¨<code>tag</code>æ—¶ï¼Œå®ƒä¼šç»™å‡ºå»å¾€<a href="https://developer.mozilla.org/zh-CN/"><em>MDN</em></a>å¯¹åº”å‚è€ƒé¡µçš„è¿æ¥,ç„¶åå°±å¼€å§‹ä¸€è¾¹å†™ä¸€è¾¹é˜…è¯»MDN,ç»“æœä¸€å‘ä¸å¯æ”¶æ‹¾ï¼Œå¼€å§‹è¯»çš„æ—¶é—´æ¯”å†™çš„æ—¶é—´è¿˜é•¿ã€‚æœ€åæˆåŠŸå­¦åˆ°ç¥å™¨<del>bushi</del><code>flex</code><strong>å¼¹æ€§ç›’å­æ¨¡å‹ã€‚</strong>ã€‚</p><p>ä½†è¿˜æ²¡å®Œï¼Œé™¤äº†å‚é˜…æ–‡æ¡£ï¼Œæˆ‘è¿˜å¤šæ¬¡åœ¨Bç«™é¦–é¡µå’ŒMCç™¾åº¦ç™¾ç§‘é¦–é¡µæ‰“å¼€<code>F12</code>,æŸ¥çœ‹ï¼Œå­¦ä¹ ä»–ä»¬æ˜¯å¦‚ä½•å¸ƒå±€ç›’å­çš„ï¼Œåˆ«è¯´ï¼Œå­¦æˆå“ä¹ŸæŒºæœ‰ç”¨çš„ï¼Œå¯¹ç›’å­çš„æ’ç‰ˆï¼ŒåµŒå¥—çš„æƒ³æ³•æˆç†Ÿå¤šäº†</p><p>ç»“åˆäºŒè€…ï¼Œç…§ç€å›¾ç‰‡åšä¸€ä¸ªç½‘é¡µä¾¿æ²¡ä»€ä¹ˆé—®é¢˜äº†ã€‚é‚£ä¸ªä½œä¸šäºŒæˆ‘ç”šè‡³ç›´æ¥å¼ƒæ‰äº†åˆç‰ˆï¼ˆå·²ç»æŠŠé¡¶éƒ¨åšå¥½äº†ï¼‰version2åŸºæœ¬å®Œå…¨é‡‡ç”¨<code>flexç›’å­</code>ã€‚æ¯”è¾ƒé—æ†¾çš„æ˜¯ï¼Œè™½ç„¶æ¯ä¸ªèœå•æŒ‰é’®éƒ½åŠ äº†è¶…é“¾æ¥ï¼Œä½†æ˜¯å¯¹åº”çš„ç½‘é¡µå¹¶æ²¡æœ‰åšå‡ºæ¥ï¼ˆåˆ›ä½œåŠ›æœ‰é™ï¼‰ã€‚ä½†è‡³å°‘æ˜¯ä¸ªåˆæ ¼çš„èŠ±ç“¶ï¼Œå˜¿å˜¿</p><h1 id="é€Ÿæˆä½œä¸šä¸‰"><a href="#é€Ÿæˆä½œä¸šä¸‰" class="headerlink" title="é€Ÿæˆä½œä¸šä¸‰"></a>é€Ÿæˆä½œä¸šä¸‰</h1><p>å› ä¸ºä½œä¸šä¸‰æ²¡éƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Šï¼Œåªèƒ½æ–‡å­—æè¿°äº†ï¼ˆæ‚²ï¼‰</p><p>ä½œä¸šä¸‰æˆ‘é€‰çš„æ˜¯ç”¨<code>vue</code>æ­å»ºä¸ªäººåšå®¢ï¼Œæˆ‘å…ˆæ˜¯è‡ªå­¦äº†å‡ å¤©vue,ç»“æœå‘ç°å…‰å­¦vueå°±åšä¸äº†ä¸ªäººåšå®¢ï¼Œäºæ˜¯åœ¨Bç«™ä¸Šæ‰¾äº†ä¸ªæ—¶é•¿6å°æ—¶çš„å…¨æ ˆå¼€å‘ï¼Œç”¨<code>js</code>å†™çš„æœåŠ¡ç«¯ï¼Œæ•°æ®åº“ç”¨<code>sqlite</code>,å‰ç«¯æ¡†æ¶æ˜¯<code>vue</code>.</p><p>å¥½å®¶ä¼™ï¼Œ5å¤©çˆ†è‚é¡¹ç›®ï¼ˆåŒ…æ‹¬ä½†ä¸é™äº<em>æŠ„ä»£ç </em>,<em>æ‰¾bug</em>,<em>æ‰¾bug</em>,<em>æ‰¾bug</em>ï¼‰ï¼ŒæˆåŠŸæŠŠåšå®¢çš„åŸºæœ¬åŠŸèƒ½å†™å®Œäº†ã€‚é™¤äº†<code>Naive UI</code>çš„ä»£ç æ˜¯å¤åˆ¶<strong>ç»„ä»¶åº“</strong>é‡Œçš„ï¼Œå‰©ä¸‹çš„ä»£ç åŸºæœ¬éƒ½æ˜¯æˆ‘<strong>æ‰‹æ‰“</strong>çš„ï¼Œå¯ä»¥è¯´å¿™å¾—ä¸äº¦ä¹ä¹ï¼Œè€Œä¸”å½“æ—¶æˆ‘å¹¶ä¸å¤ªæ‡‚<code>jsè¯­æ³•</code>ï¼Œä½“éªŒå¯ä»¥è¯´æ˜¯ç›¸å½“åˆºæ¿€äº†ã€‚</p><p>ä½†<strong>å›æŠ¥ä¸å°</strong>ï¼Œå°±ç®—ä¸èƒ½è¯´å…¥é—¨å§ï¼Œåˆ°æ—¶å€™è‡ªå·±åŠ åŠŸèƒ½ï¼Œç…§è‘«èŠ¦ç”»ç“¢ï¼Œè‡ªå·±å†™<code>js</code>çš„èƒ½åŠ›è¿˜æ˜¯æœ‰äº†æ»´ã€‚è€Œä¸”è¿™ä¹Ÿæ˜¯æˆ‘é¦–æ¬¡<strong>æ¥è§¦æ•°æ®åº“</strong>,æ··ä¸ªè„¸ç†Ÿï¼Œå˜¿å˜¿ã€‚è€Œä¸”<strong>æœ€é‡è¦</strong>çš„ä¸€ç‚¹ï¼Œæˆ‘æˆåŠŸå¢åŠ äº†ä¸€ä¸ª<strong>é«˜è‡ªç”±åº¦çš„ä¸ªäººåšå®¢</strong>ï¼Œ<del>è®²çœŸhexoçš„å„è‡ªé­”æ”¹æˆ‘ä¸å¤ªç©çš„æ‡‚</del>ã€‚</p><h2 id="å°¾å£°"><a href="#å°¾å£°" class="headerlink" title="å°¾å£°"></a>å°¾å£°</h2><p>ä½œä¸šä¸‰éƒ¨æ›²ä¹‹åï¼Œæˆ‘å¤§æ¦‚å°±ä¸å¤ªå»ç¢°å‰ç«¯äº†ï¼Œè‡³å°‘ä¸€å‘¨çˆ†è‚ä¸€ä¸ªå…¨æ ˆå¼€å‘é¡¹ç›®è¿™ç§ç–¯ç‹‚çš„è¡Œä¸ºä¸ä¼šå†æœ‰äº†ï¼Œæƒå½“æ˜¯ä¸€æ¬¡æŒ‘æˆ˜ç½¢ï¼Œä¸€æ¬¡å†’é™©ï¼Œä¸€æ¬¡å¯¹è¾¹ç•Œçš„æ¢ç´¢ç½¢ã€‚é‡å¿ƒå¾ˆæ˜ç¡®ï¼Œå¯¹å‰ç«¯é¡¶å¤šå†™å†™åƒè¿™ç¯‡åšå®¢ä¸€æ ·çš„æ„Ÿæ‚Ÿï¼ŒæŠ€æœ¯åšå®¢ä¸»è¦è¿˜æ˜¯åœ¨åç«¯è¯­è¨€ï¼Œç®—æ³•ï¼Œæ•°æ®ç»“æ„ä¹‹ç±»</p>]]></content>
      
      
      
        <tags>
            
            <tag> å›é¡¾ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>=ç®—æ³•=åŒæŒ‡é’ˆçš„ç§ç§åº”ç”¨(æ›´æ–°ä¸­)</title>
      <link href="/2023/09/12/%E5%8F%8C%E6%8C%87%E9%92%88/"/>
      <url>/2023/09/12/%E5%8F%8C%E6%8C%87%E9%92%88/</url>
      
        <content type="html"><![CDATA[<p><em>æ³¨ï¼šæœ¬æ–‡å†™äºCè¯­è¨€å­¦ä¹ æ—©æœŸï¼ŒåŒæŒ‡é’ˆçš„ç”¨æ³•è¾ƒä¸ºåŸºç¡€ä¸”ä¸å…¨é¢ã€‚æœ¬æ–‡ç« å°†æ¶‰åŠCè¯­è¨€æ•°ç»„è‡³æ•°æ®ç»“æ„çš„é“¾è¡¨</em></p><h2 id="Q-ä¸ºä»€ä¹ˆè¦ç”¨åŒæŒ‡é’ˆ"><a href="#Q-ä¸ºä»€ä¹ˆè¦ç”¨åŒæŒ‡é’ˆ" class="headerlink" title="Q:ä¸ºä»€ä¹ˆè¦ç”¨åŒæŒ‡é’ˆ?"></a>Q:ä¸ºä»€ä¹ˆè¦ç”¨åŒæŒ‡é’ˆ?</h2><p>A:å› ä¸º<br>é€šè¿‡ä½¿ç”¨åŒæŒ‡é’ˆå¯ä»¥ä½¿ç®—æ³•çš„<strong>æ—¶é—´å¤æ‚åº¦é™ä½</strong>(æˆ–è€…é™ä½éå†æ¬¡æ•°),æœ‰æ—¶ä¹Ÿèƒ½<strong>é™ä½ç©ºé—´å¤æ‚åº¦</strong></p><h2 id="åˆ†ç±»"><a href="#åˆ†ç±»" class="headerlink" title="åˆ†ç±»"></a>åˆ†ç±»</h2><p>æ ¹æ®åŒæŒ‡é’ˆçš„ç”¨æ³•ï¼Œå¯åˆ†ä¸º<strong>å‰ååŒæŒ‡é’ˆ</strong>,<strong>å¤´å°¾åŒæŒ‡é’ˆ</strong>,<strong>å¿«æ…¢åŒæŒ‡é’ˆ</strong>â€¦..</p><hr><h1 id="ä»¥ä¸‹ä¸ºå„ç§åŒæŒ‡é’ˆçš„åº”ç”¨åŠä»‹ç»"><a href="#ä»¥ä¸‹ä¸ºå„ç§åŒæŒ‡é’ˆçš„åº”ç”¨åŠä»‹ç»" class="headerlink" title="ä»¥ä¸‹ä¸ºå„ç§åŒæŒ‡é’ˆçš„åº”ç”¨åŠä»‹ç»"></a>ä»¥ä¸‹ä¸ºå„ç§åŒæŒ‡é’ˆçš„åº”ç”¨åŠä»‹ç»</h1><h2 id="å‰ååŒæŒ‡é’ˆ"><a href="#å‰ååŒæŒ‡é’ˆ" class="headerlink" title="å‰ååŒæŒ‡é’ˆ"></a>å‰ååŒæŒ‡é’ˆ</h2><h4 id="åº”ç”¨ä¸€-åˆ é™¤æ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹"><a href="#åº”ç”¨ä¸€-åˆ é™¤æ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹" class="headerlink" title="åº”ç”¨ä¸€ åˆ é™¤æ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹"></a>åº”ç”¨ä¸€ åˆ é™¤æ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹</h4><p><strong>è¦æ±‚</strong>:åŸåœ°åˆ é™¤,å¹¶è¿”å›æ–°æ•°ç»„çš„é•¿åº¦ï¼Œä¸éœ€è¦è€ƒè™‘æ•°ç»„ä¸­è¶…å‡ºæ–°é•¿åº¦åé¢çš„å…ƒç´ ã€‚</p><p><strong>æ€è·¯</strong>:é€šè¿‡åˆ›å»ºä¸€å‰ä¸€åä¸¤ä¸ªæŒ‡é’ˆï¼Œ<strong>å‰æŒ‡é’ˆ</strong>æŒ‡å‘<strong>ä¸Šä¸€ä¸ªå…ƒç´ </strong>ï¼Œ<strong>åæŒ‡é’ˆ</strong>å‘åå†é,ä¸€æ—¦<strong>æ‰¾åˆ°</strong>ä¸åŒçš„å…ƒç´ ,å‰æŒ‡é’ˆæŒ‡å‘<strong>ä¸‹ä¸€ä¸ªä½ç½®ï¼Œå¹¶è§†ä¸ºç©ºä½</strong>ï¼Œé€šè¿‡<strong>åæŒ‡é’ˆ</strong>æ‰¾åˆ°ç›®æ ‡å…ƒç´ ,å¹¶å­˜å…¥å‰æŒ‡é’ˆç›®å‰æ‰€æŒ‡å‘çš„<strong>ç©ºä½</strong>ã€‚ç„¶å<strong>åæŒ‡é’ˆ</strong>æ¥ç€éå†ï¼Œç›´è‡³éå†æ•´ä¸ªæ•°ç»„.</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä»£ç å®ç°</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">removeDuplicates</span><span class="params">(<span class="type">int</span>* nums, <span class="type">int</span> numsSize)</span>&#123;</span><br><span class="line">    <span class="type">int</span>* left = nums;</span><br><span class="line">    <span class="type">int</span>*right = nums+<span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> ret = <span class="number">1</span>;</span><br><span class="line">    <span class="comment">//éå†æ•°ç»„</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;numsSize<span class="number">-1</span>;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(*left != *right)</span><br><span class="line">        &#123;</span><br><span class="line">            left++;</span><br><span class="line">            *left = *right;</span><br><span class="line">            right++;</span><br><span class="line">            ret++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            right++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>åˆ†æ</strong>:è¿™ä¸ªå‡½æ•°åªéå†çš„ä¸€éæ•°ç»„ï¼Œæ²¡æœ‰å¤åˆ¶æ•°ç»„,æ‰€ä»¥<strong>æ—¶é—´å¤æ‚åº¦</strong>ä¸º<code>O(n)</code>,<strong>ç©ºé—´å¤æ‚åº¦</strong>ä¸º<code>O(1)</code>;</p><hr><h2 id="å¤´å°¾åŒæŒ‡é’ˆ"><a href="#å¤´å°¾åŒæŒ‡é’ˆ" class="headerlink" title="å¤´å°¾åŒæŒ‡é’ˆ"></a>å¤´å°¾åŒæŒ‡é’ˆ</h2><h4 id="åº”ç”¨ä¸€-ç¿»è½¬æ•°ç»„-å­—ç¬¦ä¸²"><a href="#åº”ç”¨ä¸€-ç¿»è½¬æ•°ç»„-å­—ç¬¦ä¸²" class="headerlink" title="åº”ç”¨ä¸€ ç¿»è½¬æ•°ç»„&#x2F;å­—ç¬¦ä¸²"></a>åº”ç”¨ä¸€ ç¿»è½¬æ•°ç»„&#x2F;å­—ç¬¦ä¸²</h4><p>å…³äºç¿»è½¬ï¼Œé¦–å…ˆæƒ³åˆ°çš„åº”è¯¥æ˜¯åˆ›å»ºä¸€ä¸ª<strong>ç­‰é•¿çš„ç©ºæ•°ç»„</strong>ï¼Œå†åŒæ—¶é¡ºåºéå†<strong>åŸæ•°ç»„</strong>å’Œé€†åºéå†<strong>ç©ºæ•°ç»„</strong>ï¼Œé€ä½å‚¨å­˜åˆ°ç©ºæ•°ç»„ï¼Œç„¶åå†åŒæ—¶é¡ºåºéå†ä¸¤ä¸ªæ•°ç»„ï¼Œå°†<strong>å·²é€†åº</strong>çš„æ•°ç»„æ‹·è´è‡³åŸæ•°ç»„</p><p><strong>ç¼ºç‚¹</strong>ï¼šéœ€è¦<strong>å¤šæ¬¡</strong>éå†ï¼Œä¸”<strong>ç©ºé—´å¤æ‚åº¦</strong>ä¸ºO(n)</p><p><strong>ä½¿ç”¨åŒæŒ‡é’ˆä¼˜åŒ–</strong>ï¼šæ•´ä¸ªæ•°ç»„çš„ç¿»è½¬å¯é€æ­¥æ‹†è§£ä¸ºï¼šç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªäº’æ¢ã€ç¬¬äºŒä¸ªå’Œå€’æ•°ç¬¬äºŒä¸ªäº’æ¢ã€ã€ã€ç¬¬Nä¸ªæ•°å’Œå€’æ•°ç¬¬Nä¸ªæ•°äº’æ¢ï¼Œç›´è‡³ä¸­é—´ã€‚æ­¤å¤„ä¾¿å¯ä½¿ç”¨<strong>åŒæŒ‡é’ˆ</strong>ï¼Œå¤´å°¾æŒ‡é’ˆå„è‡ªä¸€è¾¹<strong>äº¤æ¢</strong>æ‰€æŒ‡å‘çš„å†…å®¹ï¼Œä¸€è¾¹<strong>å‘ä¸­é—´é è¿‘</strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä»£ç å®ç°-è¿™é‡Œæ˜¯ç¿»è½¬å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">reverseString</span><span class="params">(<span class="type">char</span>* s, <span class="type">int</span> sSize)</span>&#123;</span><br><span class="line">    <span class="type">int</span> *left = s;<span class="comment">//å¤´æŒ‡é’ˆ</span></span><br><span class="line">    <span class="type">int</span> *right = s + sSize<span class="number">-1</span>;<span class="comment">//å°¾æŒ‡é’ˆ</span></span><br><span class="line">    <span class="keyword">while</span>(left&lt;right)<span class="comment">//å°šæœªåˆ°è¾¾ä¸­é—´æ—¶</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">char</span> tmp = *left;</span><br><span class="line">        *left = *right;</span><br><span class="line">        *right = tmp;</span><br><span class="line">        left++;</span><br><span class="line">        right--;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="å¿«æ…¢åŒæŒ‡é’ˆ"><a href="#å¿«æ…¢åŒæŒ‡é’ˆ" class="headerlink" title="å¿«æ…¢åŒæŒ‡é’ˆ"></a>å¿«æ…¢åŒæŒ‡é’ˆ</h2><h4 id="åº”ç”¨ä¸€-åˆ é™¤é“¾è¡¨å€’æ•°ç¬¬Kä¸ªèŠ‚ç‚¹"><a href="#åº”ç”¨ä¸€-åˆ é™¤é“¾è¡¨å€’æ•°ç¬¬Kä¸ªèŠ‚ç‚¹" class="headerlink" title="åº”ç”¨ä¸€ åˆ é™¤é“¾è¡¨å€’æ•°ç¬¬Kä¸ªèŠ‚ç‚¹"></a>åº”ç”¨ä¸€ åˆ é™¤é“¾è¡¨å€’æ•°ç¬¬Kä¸ªèŠ‚ç‚¹</h4><p><strong>ä¸€èˆ¬è§£æ³•</strong>ï¼šå…ˆéå†ä¸€éé“¾è¡¨è·å¾—é“¾è¡¨æ€»æ•°N,å†äºŒæ¬¡éå†åˆ°N-Kå¤„çš„èŠ‚ç‚¹ï¼Œå¹¶æ‰§è¡Œåˆ é™¤</p><p><strong>å¦‚ä½•ä¼˜åŒ–</strong>ï¼šä½¿ç”¨å¿«æ…¢åŒæŒ‡é’ˆï¼Œä»…éœ€éå†ä¸€æ¬¡ï¼Œå°±èƒ½ç”¨æ…¢æŒ‡é’ˆå®šä½ç›®æ ‡èŠ‚ç‚¹</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä»£ç å®ç°</span></span><br><span class="line"><span class="keyword">struct</span> ListNode* <span class="title function_">removeNthFromEnd</span><span class="params">(<span class="keyword">struct</span> ListNode* head, <span class="type">int</span> n)</span>&#123;</span><br><span class="line">    <span class="comment">//åˆ›å»ºå“¨å…µä½è§£å†³å¤´åˆ é—®é¢˜</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">ListNode</span>* <span class="title">dummy</span> =</span> (<span class="keyword">struct</span> ListNode*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> ListNode));</span><br><span class="line">    dummy-&gt;val = <span class="number">0</span>;</span><br><span class="line">    dummy-&gt;next = head;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">ListNode</span>* <span class="title">slow</span> =</span> dummy;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">ListNode</span>* <span class="title">fast</span> =</span> dummy;</span><br><span class="line">    <span class="keyword">while</span> (<span class="type">int</span> i = <span class="number">0</span>;i&lt;n+<span class="number">1</span>;n++)<span class="comment">//ç§»åŠ¨fast</span></span><br><span class="line">    &#123;</span><br><span class="line">        fast = fast-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span>(fast != <span class="literal">NULL</span>)<span class="comment">//åŒæ—¶éå†</span></span><br><span class="line">    &#123;</span><br><span class="line">        fast= fast-&gt;next;</span><br><span class="line">        slow= slow-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æ­¤æ—¶slowæŒ‡å‘ç›®æ ‡èŠ‚ç‚¹çš„å‰ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">ListNode</span>* <span class="title">tmp</span> =</span> slow-&gt;next;</span><br><span class="line">    slow-&gt;next = slow-&gt;next-&gt;next;</span><br><span class="line">    <span class="built_in">free</span>(tmp);</span><br><span class="line">    <span class="keyword">return</span> dummy-&gt;next;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="åº”ç”¨äºŒ-æ‰¾å‡ºå¹¶è¿”å›é“¾è¡¨ä¸­é—´çš„èŠ‚ç‚¹"><a href="#åº”ç”¨äºŒ-æ‰¾å‡ºå¹¶è¿”å›é“¾è¡¨ä¸­é—´çš„èŠ‚ç‚¹" class="headerlink" title="åº”ç”¨äºŒ æ‰¾å‡ºå¹¶è¿”å›é“¾è¡¨ä¸­é—´çš„èŠ‚ç‚¹"></a>åº”ç”¨äºŒ æ‰¾å‡ºå¹¶è¿”å›é“¾è¡¨ä¸­é—´çš„èŠ‚ç‚¹</h4><p><strong>æ³¨</strong>:å¶æ•°ä¸ªèŠ‚ç‚¹æ—¶åˆ é™¤<strong>å‰ä¸€ä¸ª</strong>ä¸­é—´èŠ‚ç‚¹</p><p><strong>ä¸€èˆ¬è§£æ³•</strong>ï¼šä¾ç„¶æ˜¯å…ˆéå†ä¸€éé“¾è¡¨ï¼Œç„¶åå®šä½ä¸­é—´çš„èŠ‚ç‚¹,äºŒæ¬¡éå†</p><p><strong>å¦‚ä½•ä¼˜åŒ–</strong>ï¼šä½¿ç”¨<strong>æ…¢æŒ‡é’ˆ</strong>(ä¸€æ­¥èµ°ä¸€ä¸ªèŠ‚ç‚¹)å’Œ<strong>å¿«æŒ‡é’ˆ</strong>(ä¸€æ­¥èµ°ä¸¤ä¸ªèŠ‚ç‚¹)ï¼ŒäºŒè€…åŒæ—¶éå†ï¼Œç›´è‡³<strong>å¿«æŒ‡é’ˆ</strong>æŒ‡å‘<code>NULL</code>æˆ–å¿«æŒ‡é’ˆæŒ‡å‘<code>å°¾èŠ‚ç‚¹</code></p><p>å½“éå†ç»“æŸæ—¶ï¼Œæ…¢æŒ‡é’ˆæŒ‡å‘ç›®æ ‡ä¸­é—´èŠ‚ç‚¹</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä»£ç å®ç°</span></span><br><span class="line"><span class="keyword">struct</span> ListNode* <span class="title function_">middleNode</span><span class="params">(<span class="keyword">struct</span> ListNode* head)</span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">ListNode</span> *<span class="title">slow</span> =</span> head;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">ListNode</span> *<span class="title">fast</span> =</span> head;</span><br><span class="line">    <span class="keyword">while</span>(fast &amp;&amp; fast-&gt;next)</span><br><span class="line">    &#123;</span><br><span class="line">        slow = slow-&gt;next;</span><br><span class="line">        fast = fast-&gt;next-&gt;next; </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> slow;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åº”ç”¨ä¸‰-å¾ªç¯é“¾è¡¨é—®é¢˜"><a href="#åº”ç”¨ä¸‰-å¾ªç¯é“¾è¡¨é—®é¢˜" class="headerlink" title="åº”ç”¨ä¸‰ å¾ªç¯é“¾è¡¨é—®é¢˜"></a>åº”ç”¨ä¸‰ å¾ªç¯é“¾è¡¨é—®é¢˜</h2>]]></content>
      
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>=ç®—æ³•=æŒ‰ä½å¼‚æˆ–^çš„ç§ç§ç©æ³•</title>
      <link href="/2023/09/04/%E7%AE%97%E6%B3%95_%E6%8C%89%E4%BD%8D%E5%BC%82%E6%88%96/"/>
      <url>/2023/09/04/%E7%AE%97%E6%B3%95_%E6%8C%89%E4%BD%8D%E5%BC%82%E6%88%96/</url>
      
        <content type="html"><![CDATA[<h2 id="ä»€ä¹ˆæ˜¯æŒ‰ä½å¼‚æˆ–"><a href="#ä»€ä¹ˆæ˜¯æŒ‰ä½å¼‚æˆ–" class="headerlink" title="ä»€ä¹ˆæ˜¯æŒ‰ä½å¼‚æˆ–^"></a>ä»€ä¹ˆæ˜¯æŒ‰ä½å¼‚æˆ–<code>^</code></h2><p>é¦–å…ˆå°†ä¸åŒæ•°åˆ¶çš„æ•°å†™æˆ<strong>äºŒè¿›åˆ¶</strong>,ä¾‹å¦‚<code>9-&gt;0b1001</code>.<br>ç„¶åæœ€æœ«ä½å¯¹é½ï¼Œä¾æ¬¡<strong>æŒ‰ä½å¼‚æˆ–</strong>.<br>è§„åˆ™:<code>0 ^ 0= 0 ; 1 ^ 1 = 0; 1 ^ 0 = 1</code><br>æ¨è®º:ä»»æ„æ•´æ•°<code>x</code>,éƒ½æœ‰<code>0^x = x</code>  ;   <code>x ^ x = 0</code>\</p><hr><p><strong>æ¥çœ‹çœ‹åº”ç”¨</strong></p><h2 id="å¯»æ‰¾ä¸€ä¸ªå•èº«ç‹—æ•°"><a href="#å¯»æ‰¾ä¸€ä¸ªå•èº«ç‹—æ•°" class="headerlink" title="å¯»æ‰¾ä¸€ä¸ªå•èº«ç‹—æ•°"></a>å¯»æ‰¾ä¸€ä¸ªå•èº«ç‹—æ•°</h2><p>åƒ<code>[1,3,2,2,3]</code>è¿™æ ·é™¤äº†æŸä¸€ä¸ªæ•°<code>1</code>,å‰©ä¸‹çš„æ•°å­—éƒ½æ˜¯æˆå¯¹çš„,ä¹Ÿå°±æ˜¯è¯´éå†ä¸€æ¬¡æ•°ç»„ï¼ŒæŠŠæ‰€æœ‰çš„å…ƒç´ <strong>æŒ‰ä½å¼‚æˆ–</strong>åœ¨ä¸€èµ·ï¼Œç»“æœä¾¿æ˜¯è½å•çš„é‚£ä¸ª<code>1</code></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä»£ç å®ç°</span></span><br><span class="line"><span class="type">int</span> arr[] = &#123;<span class="number">1</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">3</span>&#125;;</span><br><span class="line"><span class="type">int</span> sz = <span class="keyword">sizeof</span>(arr)/<span class="keyword">sizeof</span>(arr[<span class="number">0</span>]);<span class="comment">//æ±‚æ•°ç»„å¤§å°</span></span><br><span class="line"><span class="type">int</span> ret  = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i =<span class="number">0</span>;i&lt;sz;i++)</span><br><span class="line">&#123;</span><br><span class="line">    ret^=arr[i];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> ret; <span class="comment">//æ­¤æ—¶retå³ä¸ºè½å•çš„é‚£ä¸ªæ•°</span></span><br></pre></td></tr></table></figure><p><strong><em>å˜å½¢</em></strong></p><h2 id="æ¶ˆå¤±çš„æ•°"><a href="#æ¶ˆå¤±çš„æ•°" class="headerlink" title="æ¶ˆå¤±çš„æ•°"></a>æ¶ˆå¤±çš„æ•°</h2><p>å·²çŸ¥ä¸€ä¸ªç”±0~n(ç¼ºå¤±ä¸€ä¸ªæ•°)å¡«å……çš„æ•°ç»„ï¼Œä¾‹<code>[0,6,4,2,3,1]</code>,ä¾‹ä¸­çš„æ•°ç»„å°‘äº†ä¸€ä¸ª<code>5</code>,è€Œæˆ‘ä»¬å·²çŸ¥æ•°ç»„åŒ…å«0~6ä¸­çš„5ä¸ªæ•°ï¼Œå°±å¯ä»¥å°†æ•°ç»„å…ƒç´ ä¸0~6<strong>æŒ‰ä½å¼‚æˆ–</strong>åˆ°ä¸€èµ·ï¼Œå°†é—®é¢˜<em>æ¶ˆå¤±çš„æ•°</em>è½¬åŒ–ä¸ºé—®é¢˜<em>å¯»æ‰¾å•èº«ç‹—</em>,æ¶ˆå¤±çš„æ•°å˜æˆå‰©ä¸‹çš„é‚£ä¸ªå•èº«ç‹—</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä»£ç å®ç°</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">missingNumber</span><span class="params">(<span class="type">int</span>* nums, <span class="type">int</span> numsSize)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> ret = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>;i&lt;numsSize;i++&gt;)</span><br><span class="line">    &#123;</span><br><span class="line">        ret^=nums[i];<span class="comment">//å†énumsçš„æ‰€æœ‰å…ƒç´ </span></span><br><span class="line">        ret^=i;<span class="comment">//å†é0~numsSize-1</span></span><br><span class="line">    &#125;</span><br><span class="line">    ret^=numsSize;<span class="comment">//è¡¥ä¸ŠnumsSize;</span></span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong><em>è¿›é˜¶</em></strong></p><h2 id="æ‰¾åˆ°ä¸¤ä¸ªå•èº«ç‹—"><a href="#æ‰¾åˆ°ä¸¤ä¸ªå•èº«ç‹—" class="headerlink" title="æ‰¾åˆ°ä¸¤ä¸ªå•èº«ç‹—"></a>æ‰¾åˆ°ä¸¤ä¸ªå•èº«ç‹—</h2><p>æ•°ç»„å†å‡çº§ï¼Œå•èº«ç‹—å˜æˆäº†<strong>ä¸¤ä¸ª</strong>ï¼Œå¯¼è‡´ä¸èƒ½ç²—æš´åœ°æŠŠæ‰€æœ‰å…ƒç´ æŒ‰ä½å¼‚æˆ–æ¥æ±‚å‡ºä¸¤ä¸ªæ•°,ä½†æˆ‘ä»¬ä»å¯ä»¥å°†é—®é¢˜ç®€åŒ–ï¼šèƒ½å¦å°†ä¸¤ä¸ªå•èº«ç‹—åˆ†åˆ°ä¸¤ä¸ªæ•°ç»„ï¼Œä½¿ä¹‹è½¬åŒ–ä¸ºä¸¤ä¸ªç‹¬ç«‹çš„<em>æ±‚å•ä¸ªå•èº«ç‹—é—®é¢˜</em>ã€‚äºæ˜¯éš¾ç‚¹æ¥åˆ°äº†å¦‚ä½•<strong>åˆ†ç»„</strong></p><h3 id="æ–¹æ¡ˆä¹‹ä¸€ä¾¿æ˜¯è¿ç”¨æŒ‰ä½å¼‚æˆ–å’Œå³ç§»è¿ç®—ç¬¦"><a href="#æ–¹æ¡ˆä¹‹ä¸€ä¾¿æ˜¯è¿ç”¨æŒ‰ä½å¼‚æˆ–å’Œå³ç§»è¿ç®—ç¬¦" class="headerlink" title="æ–¹æ¡ˆä¹‹ä¸€ä¾¿æ˜¯è¿ç”¨æŒ‰ä½å¼‚æˆ–å’Œå³ç§»è¿ç®—ç¬¦"></a>æ–¹æ¡ˆä¹‹ä¸€ä¾¿æ˜¯è¿ç”¨<strong>æŒ‰ä½å¼‚æˆ–</strong>å’Œ<strong>å³ç§»è¿ç®—ç¬¦</strong></h3><p>å› ä¸ºä¸¤ä¸ªä¸åŒçš„æ•°ï¼Œåœ¨äºŒè¿›åˆ¶ä¸Šä½œæ¯”è¾ƒï¼Œå°±è‡³å°‘æœ‰ä¸€ä½æ˜¯ä¸åŒçš„ï¼Œä»¥é‚£ä¸€ä½ä¸º<code>0</code>æˆ–<code>1</code>åˆ†æˆä¸¤ç»„ï¼Œä¾¿å¯å°†ä¸¤ä¸ªå•èº«ç‹—åˆ†å¼€.è€Œè‹¥è¦æŸ¥æ‰¾å…·ä½“æ˜¯å“ªä¸€ä½ï¼Œå°†åˆ—è¡¨ä¸­<strong>æ‰€æœ‰å…ƒç´ </strong>ï¼ˆå°±åŒ…æ‹¬äº†ä¸¤æ•°ï¼‰<strong>æŒ‰ä½å¼‚æˆ–</strong>åå†ç”¨<strong>å³ç§»è¿ç®—ç¬¦</strong>é€ä½æ£€éªŒæ˜¯å¦ä¸º<code>1</code>,ä¹‹åä¾¿å¯è½»æ¾åˆ†ç»„ï¼Œå¹¶ç›´æ¥<strong>æŒ‰ä½å¼‚æˆ–</strong>å¾—å‡ºç»“æœ</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä»£ç å®ç°</span></span><br><span class="line"><span class="type">int</span>* <span class="title function_">singleNumber</span><span class="params">(<span class="type">int</span>* nums, <span class="type">int</span> numsSize, <span class="type">int</span> ret[<span class="number">2</span>])</span>&#123;</span><br><span class="line">    <span class="type">int</span> ret1 = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> ret2 = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> n = <span class="number">0</span>;<span class="comment">//ç”¨äºè®°å½•&quot;1&quot;åœ¨å“ªä¸€ä½</span></span><br><span class="line">    <span class="type">int</span> tmp = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i =<span class="number">0</span>;i&lt;numsSize;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        tmp^=nums[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>((tmp&gt;&gt;n) !=<span class="number">1</span> )</span><br><span class="line">    &#123;</span><br><span class="line">        n++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i&lt;nums;i++&gt;)<span class="comment">//å†æ¬¡å†é</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>((nums[i]&gt;&gt;n ==<span class="number">1</span>))<span class="comment">//åˆ†ç»„1</span></span><br><span class="line">        &#123;</span><br><span class="line">            ret1^=nums[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>  <span class="comment">//åˆ†ç»„2</span></span><br><span class="line">        &#123;</span><br><span class="line">            ret2^=nums[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ret[<span class="number">0</span>] = ret1;</span><br><span class="line">    ret[<span class="number">1</span>] = ret2;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ€è€ƒ:3ä¸ªï¼Œ4ä¸ªâ€¦.Nä¸ªå•èº«ç‹—æ—¶å‘¢ï¼Ÿ</p>]]></content>
      
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>=Cè¯­è¨€=åŠ¨æ€å†…å­˜åˆ†é…é‡ä¸Šå‡½æ•°-ç»å…¸é”™è¯¯çº é”™</title>
      <link href="/2023/08/28/mistake1/"/>
      <url>/2023/08/28/mistake1/</url>
      
        <content type="html"><![CDATA[<h3 id="ç›´æ¥å®Œæ•´ä»£ç "><a href="#ç›´æ¥å®Œæ•´ä»£ç " class="headerlink" title="ç›´æ¥å®Œæ•´ä»£ç "></a>ç›´æ¥å®Œæ•´ä»£ç </h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">GetMemory</span><span class="params">(<span class="type">char</span>* p)</span>   <span class="comment">//ç”³è¯·å†…å­˜</span></span><br><span class="line">&#123;</span><br><span class="line">p = (<span class="type">char</span>*)<span class="built_in">malloc</span>(<span class="number">100</span>);  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">Test</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="type">char</span>* str = <span class="literal">NULL</span>;</span><br><span class="line">GetMemory(str);</span><br><span class="line"><span class="built_in">strcpy</span>(str, <span class="string">&quot;hello world&quot;</span>); <span class="comment">//å¤åˆ¶å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="built_in">printf</span>(str);  <span class="comment">//è¾“å‡ºå­—ç¬¦ä¸²</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">Test();</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><p>æ¨æµ‹è¿™æ®µä»£ç çš„çš„ç›®çš„æ˜¯é€šè¿‡<code>GetMemory</code>å‡½æ•°ç”³è¯·å†…å­˜ï¼Œç„¶åæŠŠè¿”å›çš„åœ°å€å­˜å…¥æŒ‡é’ˆå˜é‡<code>str</code>,å†æŠŠå­—ç¬¦ä¸²<code>&quot;hello world&quot;</code>å¤åˆ¶åˆ°<code>str</code>æ‰€æŒ‡å‘çš„å†…å­˜ä¸­ï¼Œæœ€å<code>printf</code>è¾“å‡º</p><h4 id="é€æ­¥çº é”™"><a href="#é€æ­¥çº é”™" class="headerlink" title="é€æ­¥çº é”™"></a>é€æ­¥çº é”™</h4><h5 id="GetMemory"><a href="#GetMemory" class="headerlink" title="GetMemory"></a><code>GetMemory</code></h5><ol><li>é¦–å…ˆæ˜¯ä¼ å‚é”™è¯¯ã€‚è‹¥åœ¨å‡½æ•°å†…ä¿®æ”¹å¤–éƒ¨çš„ä¸€çº§æŒ‡é’ˆï¼Œä¸èƒ½ç›´æ¥å°†å¤–éƒ¨ä¸€çº§æŒ‡é’ˆä½œä¸º<strong>å®å‚</strong>ä¼ å…¥ï¼šå› ä¸ºå‡½æ•°ä¼šå°†<strong>å®å‚</strong>èµ‹ç»™<strong>å½¢å‚</strong>ï¼Œç¨‹åºè¿è¡Œåˆ°å¤§æ‹¬å·å¤–é¢åï¼Œ<strong>å½¢å‚</strong>è¢«é”€æ¯ï¼Œ<strong>å®å‚</strong>æ²¡æœ‰å˜åŒ–ã€‚æ‰€ä»¥åº”è¯¥ä½¿ç”¨<code>char** p</code>äºŒçº§æŒ‡é’ˆä½œä¸º<strong>å½¢å‚</strong>,å‚¨å­˜åœ°å€æ—¶ä½¿ç”¨<code>*p</code>\</li><li>å…¶æ¬¡æ˜¯å†…å­˜æ³„æ¼ã€‚å¼€è¾Ÿçš„å†…å­˜çš„åœ°å€å¹¶æ²¡æœ‰ä¼ é€’ç»™å®å‚ï¼Œå½¢å‚åˆæœ€åé”€æ¯äº†ï¼ŒåŒæ—¶æ²¡æœ‰é‡Šæ”¾å†…å­˜ï¼Œå‡½æ•°è¿è¡Œå®Œåç”³è¯·çš„å†…å­˜æ— æ³•æ‰¾åˆ°ï¼Œå¯¼è‡´æœ€ç»ˆæ— æ³•é‡Šæ”¾ï¼Œé€ æˆå†…å­˜æ³„æ¼</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ›´åˆé€‚çš„ä»£ç </span></span><br><span class="line"><span class="type">void</span> <span class="title function_">GetMenmory</span><span class="params">(<span class="type">char</span>** p)</span></span><br><span class="line">&#123;</span><br><span class="line">    *p = (<span class="type">char</span>*)<span class="built_in">malloc</span>(<span class="number">100</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="Test"><a href="#Test" class="headerlink" title="Test"></a><code>Test</code></h5><ol><li>NULLçš„å¤§é—®é¢˜ã€‚å‡è®¾<code>malloc</code>è¿”å›çš„åœ°å€å·²ç»å­˜å…¥<code>str</code>,ä½†ä»»ç„¶ç¼ºå°‘å¯¹ç©ºæŒ‡é’ˆçš„åˆ¤æ–­,å¯¼è‡´<code>strcmp</code>ä¸­ä¼ å…¥äº†ç©ºæŒ‡é’ˆ-&gt;æŠ¥é”™;<code>printf</code>ä¸­ä¼ å…¥ç©ºæŒ‡é’ˆ-&gt;æŠ¥é”™</li><li>æ²¡æœ‰é‡Šæ”¾å†…å­˜-&gt;å†…å­˜æ³„æ¼ã€‚<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ›´é€‚åˆçš„ä»£ç </span></span><br><span class="line"><span class="type">void</span> <span class="title function_">Test</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">char</span>* str = <span class="literal">NULL</span>;</span><br><span class="line">    GetMemory(str);</span><br><span class="line">    <span class="keyword">if</span>(str == MULL)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">strcpy</span>(str,<span class="string">&quot;hello world&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>,str);</span><br><span class="line">    <span class="built_in">free</span>(str); <span class="comment">//é˜²æ­¢å†…å­˜æ³„æ¼</span></span><br><span class="line">    str = <span class="literal">NULL</span>; <span class="comment">//æ¸…é™¤é‡æŒ‡é’ˆ</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
